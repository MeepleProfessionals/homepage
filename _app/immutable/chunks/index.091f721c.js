var rn=Object.defineProperty;var an=(L,t,c)=>t in L?rn(L,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):L[t]=c;var Ot=(L,t,c)=>(an(L,typeof t!="symbol"?t+"":t,c),c),de=(L,t,c)=>{if(!t.has(L))throw TypeError("Cannot "+c)};var A=(L,t,c)=>(de(L,t,"read from private field"),c?c.call(L):t.get(L)),Z=(L,t,c)=>{if(t.has(L))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(L):t.set(L,c)},pt=(L,t,c,e)=>(de(L,t,"write to private field"),e?e.call(L,c):t.set(L,c),c),ie=(L,t,c,e)=>({set _(g){pt(L,t,g,c)},get _(){return A(L,t,e)}}),st=(L,t,c)=>(de(L,t,"access private method"),c);import{S as SvelteComponent,i as init,s as safe_not_equal,I as create_slot,k as element,a as space,l as claim_element,m as children,h as detach,c as claim_space,n as attr,b as insert_hydration,E as append_hydration,a0 as listen,J as update_slot_base,K as get_all_dirty_from_scope,L as get_slot_changes,g as transition_in,v as group_outros,d as transition_out,f as check_outros,a2 as run_all,a3 as null_to_empty,a4 as add_render_callback,a5 as create_in_transition,a6 as create_out_transition,a7 as bubble,X as svg_element,Y as claim_svg_element,a8 as onDestroy,H as globals,t as tick,w as binding_callbacks,F as noop,q as text,r as claim_text,u as set_data,a9 as set_input_value,y as create_component,z as claim_component,A as mount_component,B as destroy_component}from"./index.f30d4c5b.js";import{g as getAugmentedNamespace}from"./Render.7d8ec792.js";function commonjsRequire(L){throw new Error('Could not dynamically require "'+L+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,c){module.exports=c()})(globalThis,()=>(()=>{var __webpack_modules__=[,(L,t)=>{var mt;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=vt,t.bytesToString=H,t.createValidAbsoluteUrl=gt,t.getModificationDate=yt,t.getVerbosityLevel=dt,t.info=ot,t.isArrayBuffer=ft,t.isArrayEqual=wt,t.normalizeUnicode=Et,t.objectFromMap=T,t.objectSize=v,t.setVerbosityLevel=tt,t.shadow=z,t.string32=a,t.stringToBytes=s,t.stringToPDFString=et,t.stringToUTF8String=rt,t.unreachable=_t,t.utf8StringToString=ut,t.warn=ht;const c=[1,0,0,1,0,0];t.IDENTITY_MATRIX=c;const e=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=e;const g=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=g;const P=1.35;t.LINE_FACTOR=P;const M=.35;t.LINE_DESCENT_FACTOR=M;const G=M/P;t.BASELINE_FACTOR=G;const S={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=S;const C={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=C;const y="pdfjs_internal_editor_";t.AnnotationEditorPrefix=y;const U={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=U;const x={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=x;const D={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=D;const m={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=m;const u={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=u;const i={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=i;const _={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=_;const w={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=w;const F={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=F;const b={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=b;const n={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=n;const l={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=l;const h={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=h;const r={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=r;const p={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=p;const O={O:"PageOpen",C:"PageClose"};t.PageActionEventType=O;const o={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=o;const W={NONE:0,BINARY:1};t.CMapCompressionType=W;const $={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=$;const J={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=J;let Q=o.WARNINGS;function tt(at){Number.isInteger(at)&&(Q=at)}function dt(){return Q}function ot(at){Q>=o.INFOS&&console.log(`Info: ${at}`)}function ht(at){Q>=o.WARNINGS&&console.log(`Warning: ${at}`)}function _t(at){throw new Error(at)}function vt(at,R){at||_t(R)}function St(at){switch(at==null?void 0:at.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function gt(at,R=null,B=null){if(!at)return null;try{if(B&&typeof at=="string"){if(B.addDefaultProtocol&&at.startsWith("www.")){const bt=at.match(/\./g);(bt==null?void 0:bt.length)>=2&&(at=`http://${at}`)}if(B.tryConvertEncoding)try{at=rt(at)}catch{}}const ct=R?new URL(at,R):new URL(at);if(St(ct))return ct}catch{}return null}function z(at,R,B,ct=!1){return Object.defineProperty(at,R,{value:B,enumerable:!ct,configurable:!0,writable:!1}),B}const d=function(){function R(B,ct){this.constructor===R&&_t("Cannot initialize BaseException."),this.message=B,this.name=ct}return R.prototype=new Error,R.constructor=R,R}();t.BaseException=d;class f extends d{constructor(R,B){super(R,"PasswordException"),this.code=B}}t.PasswordException=f;class E extends d{constructor(R,B){super(R,"UnknownErrorException"),this.details=B}}t.UnknownErrorException=E;class q extends d{constructor(R){super(R,"InvalidPDFException")}}t.InvalidPDFException=q;class I extends d{constructor(R){super(R,"MissingPDFException")}}t.MissingPDFException=I;class V extends d{constructor(R,B){super(R,"UnexpectedResponseException"),this.status=B}}t.UnexpectedResponseException=V;class N extends d{constructor(R){super(R,"FormatError")}}t.FormatError=N;class j extends d{constructor(R){super(R,"AbortException")}}t.AbortException=j;function H(at){(typeof at!="object"||(at==null?void 0:at.length)===void 0)&&_t("Invalid argument for bytesToString");const R=at.length,B=8192;if(R<B)return String.fromCharCode.apply(null,at);const ct=[];for(let bt=0;bt<R;bt+=B){const Tt=Math.min(bt+B,R),kt=at.subarray(bt,Tt);ct.push(String.fromCharCode.apply(null,kt))}return ct.join("")}function s(at){typeof at!="string"&&_t("Invalid argument for stringToBytes");const R=at.length,B=new Uint8Array(R);for(let ct=0;ct<R;++ct)B[ct]=at.charCodeAt(ct)&255;return B}function a(at){return String.fromCharCode(at>>24&255,at>>16&255,at>>8&255,at&255)}function v(at){return Object.keys(at).length}function T(at){const R=Object.create(null);for(const[B,ct]of at)R[B]=ct;return R}function k(){const at=new Uint8Array(4);return at[0]=1,new Uint32Array(at.buffer,0,1)[0]===1}function X(){try{return new Function(""),!0}catch{return!1}}class nt{static get isLittleEndian(){return z(this,"isLittleEndian",k())}static get isEvalSupported(){return z(this,"isEvalSupported",X())}static get isOffscreenCanvasSupported(){return z(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?z(this,"platform",{isWin:!1,isMac:!1}):z(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=nt;const K=[...Array(256).keys()].map(at=>at.toString(16).padStart(2,"0"));class it{static makeHexColor(R,B,ct){return`#${K[R]}${K[B]}${K[ct]}`}static scaleMinMax(R,B){let ct;R[0]?(R[0]<0&&(ct=B[0],B[0]=B[1],B[1]=ct),B[0]*=R[0],B[1]*=R[0],R[3]<0&&(ct=B[2],B[2]=B[3],B[3]=ct),B[2]*=R[3],B[3]*=R[3]):(ct=B[0],B[0]=B[2],B[2]=ct,ct=B[1],B[1]=B[3],B[3]=ct,R[1]<0&&(ct=B[2],B[2]=B[3],B[3]=ct),B[2]*=R[1],B[3]*=R[1],R[2]<0&&(ct=B[0],B[0]=B[1],B[1]=ct),B[0]*=R[2],B[1]*=R[2]),B[0]+=R[4],B[1]+=R[4],B[2]+=R[5],B[3]+=R[5]}static transform(R,B){return[R[0]*B[0]+R[2]*B[1],R[1]*B[0]+R[3]*B[1],R[0]*B[2]+R[2]*B[3],R[1]*B[2]+R[3]*B[3],R[0]*B[4]+R[2]*B[5]+R[4],R[1]*B[4]+R[3]*B[5]+R[5]]}static applyTransform(R,B){const ct=R[0]*B[0]+R[1]*B[2]+B[4],bt=R[0]*B[1]+R[1]*B[3]+B[5];return[ct,bt]}static applyInverseTransform(R,B){const ct=B[0]*B[3]-B[1]*B[2],bt=(R[0]*B[3]-R[1]*B[2]+B[2]*B[5]-B[4]*B[3])/ct,Tt=(-R[0]*B[1]+R[1]*B[0]+B[4]*B[1]-B[5]*B[0])/ct;return[bt,Tt]}static getAxialAlignedBoundingBox(R,B){const ct=it.applyTransform(R,B),bt=it.applyTransform(R.slice(2,4),B),Tt=it.applyTransform([R[0],R[3]],B),kt=it.applyTransform([R[2],R[1]],B);return[Math.min(ct[0],bt[0],Tt[0],kt[0]),Math.min(ct[1],bt[1],Tt[1],kt[1]),Math.max(ct[0],bt[0],Tt[0],kt[0]),Math.max(ct[1],bt[1],Tt[1],kt[1])]}static inverseTransform(R){const B=R[0]*R[3]-R[1]*R[2];return[R[3]/B,-R[1]/B,-R[2]/B,R[0]/B,(R[2]*R[5]-R[4]*R[3])/B,(R[4]*R[1]-R[5]*R[0])/B]}static singularValueDecompose2dScale(R){const B=[R[0],R[2],R[1],R[3]],ct=R[0]*B[0]+R[1]*B[2],bt=R[0]*B[1]+R[1]*B[3],Tt=R[2]*B[0]+R[3]*B[2],kt=R[2]*B[1]+R[3]*B[3],Ft=(ct+kt)/2,xt=Math.sqrt((ct+kt)**2-4*(ct*kt-Tt*bt))/2,Mt=Ft+xt||1,Pt=Ft-xt||1;return[Math.sqrt(Mt),Math.sqrt(Pt)]}static normalizeRect(R){const B=R.slice(0);return R[0]>R[2]&&(B[0]=R[2],B[2]=R[0]),R[1]>R[3]&&(B[1]=R[3],B[3]=R[1]),B}static intersect(R,B){const ct=Math.max(Math.min(R[0],R[2]),Math.min(B[0],B[2])),bt=Math.min(Math.max(R[0],R[2]),Math.max(B[0],B[2]));if(ct>bt)return null;const Tt=Math.max(Math.min(R[1],R[3]),Math.min(B[1],B[3])),kt=Math.min(Math.max(R[1],R[3]),Math.max(B[1],B[3]));return Tt>kt?null:[ct,Tt,bt,kt]}static bezierBoundingBox(R,B,ct,bt,Tt,kt,Ft,xt){const Mt=[],Pt=[[],[]];let Lt,Dt,It,Rt,jt,Ut,Ht,qt;for(let Xt=0;Xt<2;++Xt){if(Xt===0?(Dt=6*R-12*ct+6*Tt,Lt=-3*R+9*ct-9*Tt+3*Ft,It=3*ct-3*R):(Dt=6*B-12*bt+6*kt,Lt=-3*B+9*bt-9*kt+3*xt,It=3*bt-3*B),Math.abs(Lt)<1e-12){if(Math.abs(Dt)<1e-12)continue;Rt=-It/Dt,0<Rt&&Rt<1&&Mt.push(Rt);continue}Ht=Dt*Dt-4*It*Lt,qt=Math.sqrt(Ht),!(Ht<0)&&(jt=(-Dt+qt)/(2*Lt),0<jt&&jt<1&&Mt.push(jt),Ut=(-Dt-qt)/(2*Lt),0<Ut&&Ut<1&&Mt.push(Ut))}let Nt=Mt.length,Bt;const Gt=Nt;for(;Nt--;)Rt=Mt[Nt],Bt=1-Rt,Pt[0][Nt]=Bt*Bt*Bt*R+3*Bt*Bt*Rt*ct+3*Bt*Rt*Rt*Tt+Rt*Rt*Rt*Ft,Pt[1][Nt]=Bt*Bt*Bt*B+3*Bt*Bt*Rt*bt+3*Bt*Rt*Rt*kt+Rt*Rt*Rt*xt;return Pt[0][Gt]=R,Pt[1][Gt]=B,Pt[0][Gt+1]=Ft,Pt[1][Gt+1]=xt,Pt[0].length=Pt[1].length=Gt+2,[Math.min(...Pt[0]),Math.min(...Pt[1]),Math.max(...Pt[0]),Math.max(...Pt[1])]}}t.Util=it;const lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function et(at){if(at[0]>="ï"){let B;if(at[0]==="þ"&&at[1]==="ÿ"?B="utf-16be":at[0]==="ÿ"&&at[1]==="þ"?B="utf-16le":at[0]==="ï"&&at[1]==="»"&&at[2]==="¿"&&(B="utf-8"),B)try{const ct=new TextDecoder(B,{fatal:!0}),bt=s(at);return ct.decode(bt)}catch(ct){ht(`stringToPDFString: "${ct}".`)}}const R=[];for(let B=0,ct=at.length;B<ct;B++){const bt=lt[at.charCodeAt(B)];R.push(bt?String.fromCharCode(bt):at.charAt(B))}return R.join("")}function rt(at){return decodeURIComponent(escape(at))}function ut(at){return unescape(encodeURIComponent(at))}function ft(at){return typeof at=="object"&&(at==null?void 0:at.byteLength)!==void 0}function wt(at,R){if(at.length!==R.length)return!1;for(let B=0,ct=at.length;B<ct;B++)if(at[B]!==R[B])return!1;return!0}function yt(at=new Date){return[at.getUTCFullYear().toString(),(at.getUTCMonth()+1).toString().padStart(2,"0"),at.getUTCDate().toString().padStart(2,"0"),at.getUTCHours().toString().padStart(2,"0"),at.getUTCMinutes().toString().padStart(2,"0"),at.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ct{constructor(){Z(this,mt,!1);this.promise=new Promise((R,B)=>{this.resolve=ct=>{pt(this,mt,!0),R(ct)},this.reject=ct=>{pt(this,mt,!0),B(ct)}})}get settled(){return A(this,mt)}}mt=new WeakMap,t.PromiseCapability=Ct;let Y=null,At=null;function Et(at){return Y||(Y=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,At=new Map([["ﬅ","ſt"]])),at.replaceAll(Y,(R,B,ct)=>B?B.normalize("NFKC"):At.get(ct))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var L,c,e,g,Kt,M,re,S,C,y,U,x,D,m,u,ue,_,w,fe,b,n;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:h,NodeCMapReaderFactory:r,NodeFilterFactory:p,NodeStandardFontDataFactory:O}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=h,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=r,exports.DefaultFilterFactory=DefaultFilterFactory=p,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=O}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:h}=__w_pdfjs_require__(21);createPDFNetworkStream=r=>new h(r)}else{const{PDFNetworkStream:h}=__w_pdfjs_require__(24),{PDFFetchStream:r}=__w_pdfjs_require__(25);createPDFNetworkStream=p=>(0,_display_utils.isValidFetchUrl)(p.url)?new r(p):new h(p)}function getDocument(h){if(typeof h=="string"||h instanceof URL?h={url:h}:(0,_util.isArrayBuffer)(h)&&(h={data:h}),typeof h!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!h.url&&!h.data&&!h.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const r=new PDFDocumentLoadingTask,{docId:p}=r,O=h.url?getUrlProp(h.url):null,o=h.data?getDataProp(h.data):null,W=h.httpHeaders||null,$=h.withCredentials===!0,J=h.password??null,Q=h.range instanceof PDFDataRangeTransport?h.range:null,tt=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let dt=h.worker instanceof PDFWorker?h.worker:null;const ot=h.verbosity,ht=typeof h.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(h.docBaseUrl)?h.docBaseUrl:null,_t=typeof h.cMapUrl=="string"?h.cMapUrl:null,vt=h.cMapPacked!==!1,St=h.CMapReaderFactory||DefaultCMapReaderFactory,gt=typeof h.standardFontDataUrl=="string"?h.standardFontDataUrl:null,z=h.StandardFontDataFactory||DefaultStandardFontDataFactory,d=h.stopAtErrors!==!0,f=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,E=h.isEvalSupported!==!1,q=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!_is_node.isNodeJS,I=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,V=typeof h.disableFontFace=="boolean"?h.disableFontFace:_is_node.isNodeJS,N=h.fontExtraProperties===!0,j=h.enableXfa===!0,H=h.ownerDocument||globalThis.document,s=h.disableRange===!0,a=h.disableStream===!0,v=h.disableAutoFetch===!0,T=h.pdfBug===!0,k=Q?Q.length:h.length??NaN,X=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!_is_node.isNodeJS&&!V,nt=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:St===_display_utils.DOMCMapReaderFactory&&z===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(_t,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(gt,document.baseURI),K=h.canvasFactory||new DefaultCanvasFactory({ownerDocument:H}),it=h.filterFactory||new DefaultFilterFactory({docId:p,ownerDocument:H}),lt=null;(0,_util.setVerbosityLevel)(ot);const et={canvasFactory:K,filterFactory:it};if(nt||(et.cMapReaderFactory=new St({baseUrl:_t,isCompressed:vt}),et.standardFontDataFactory=new z({baseUrl:gt})),!dt){const ft={verbosity:ot,port:_worker_options.GlobalWorkerOptions.workerPort};dt=ft.port?PDFWorker.fromPort(ft):new PDFWorker(ft),r._worker=dt}const rt={docId:p,apiVersion:"3.6.172",data:o,password:J,disableAutoFetch:v,rangeChunkSize:tt,length:k,docBaseUrl:ht,enableXfa:j,evaluatorOptions:{maxImageSize:f,disableFontFace:V,ignoreErrors:d,isEvalSupported:E,isOffscreenCanvasSupported:q,canvasMaxAreaInBytes:I,fontExtraProperties:N,useSystemFonts:X,cMapUrl:nt?_t:null,standardFontDataUrl:nt?gt:null}},ut={ignoreErrors:d,isEvalSupported:E,disableFontFace:V,fontExtraProperties:N,enableXfa:j,ownerDocument:H,disableAutoFetch:v,pdfBug:T,styleElement:lt};return dt.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");const ft=_fetchDocument(dt,rt),wt=new Promise(function(yt){let Ct;Q?Ct=new _transport_stream.PDFDataTransportStream({length:k,initialData:Q.initialData,progressiveDone:Q.progressiveDone,contentDispositionFilename:Q.contentDispositionFilename,disableRange:s,disableStream:a},Q):o||(Ct=createPDFNetworkStream({url:O,length:k,httpHeaders:W,withCredentials:$,rangeChunkSize:tt,disableRange:s,disableStream:a})),yt(Ct)});return Promise.all([ft,wt]).then(function([yt,Ct]){if(r.destroyed)throw new Error("Loading aborted");const Y=new _message_handler.MessageHandler(p,yt,dt.port),At=new WorkerTransport(Y,r,Ct,ut,et);r._transport=At,Y.send("Ready",null)})}).catch(r._capability.reject),r}async function _fetchDocument(h,r){if(h.destroyed)throw new Error("Worker was destroyed");const p=await h.messageHandler.sendWithPromise("GetDocRequest",r,r.data?[r.data.buffer]:null);if(h.destroyed)throw new Error("Worker was destroyed");return p}function getUrlProp(h){if(h instanceof URL)return h.href;try{return new URL(h,window.location).href}catch{if(_is_node.isNodeJS&&typeof h=="string")return h}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(h){if(_is_node.isNodeJS&&typeof Buffer<"u"&&h instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(h);if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return(0,_util.stringToBytes)(h);if(typeof h=="object"&&!isNaN(h==null?void 0:h.length)||(0,_util.isArrayBuffer)(h))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ie(t,L)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var r;this.destroyed=!0,await((r=this._transport)==null?void 0:r.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=t;L=new WeakMap,Z(PDFDocumentLoadingTask,L,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(r,p,O=!1,o=null){this.length=r,this.initialData=p,this.progressiveDone=O,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(r){this._rangeListeners.push(r)}addProgressListener(r){this._progressListeners.push(r)}addProgressiveReadListener(r){this._progressiveReadListeners.push(r)}addProgressiveDoneListener(r){this._progressiveDoneListeners.push(r)}onDataRange(r,p){for(const O of this._rangeListeners)O(r,p)}onDataProgress(r,p){this._readyCapability.promise.then(()=>{for(const O of this._progressListeners)O(r,p)})}onDataProgressiveRead(r){this._readyCapability.promise.then(()=>{for(const p of this._progressiveReadListeners)p(r)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const r of this._progressiveDoneListeners)r()})}transportReady(){this._readyCapability.resolve()}requestDataRange(r,p){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(r,p){this._pdfInfo=r,this._transport=p}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(r){return this._transport.getPage(r)}getPageIndex(r){return this._transport.getPageIndex(r)}getDestinations(){return this._transport.getDestinations()}getDestination(r){return this._transport.getDestination(r)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(r=!1){return this._transport.startCleanup(r||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(r,p,O,o=!1){Z(this,g);Z(this,M);Z(this,c,null);Z(this,e,!1);this._pageIndex=r,this._pageInfo=p,this._transport=O,this._stats=o?new _display_utils.StatTimer:null,this._pdfBug=o,this.commonObjs=O.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:r,rotation:p=this.rotate,offsetX:O=0,offsetY:o=0,dontFlip:W=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:p,offsetX:O,offsetY:o,dontFlip:W})}getAnnotations({intent:r="display"}={}){const p=this._transport.getRenderingIntent(r);return this._transport.getAnnotations(this._pageIndex,p.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var r;return((r=this._transport._htmlForXfa)==null?void 0:r.children[this._pageIndex])||null}render({canvasContext:r,viewport:p,intent:O="display",annotationMode:o=_util.AnnotationMode.ENABLE,transform:W=null,background:$=null,optionalContentConfigPromise:J=null,annotationCanvasMap:Q=null,pageColors:tt=null,printAnnotationStorage:dt=null}){var z,d,f;if((z=arguments[0])!=null&&z.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(d=this._stats)==null||d.time("Overall");const ot=this._transport.getRenderingIntent(O,o,dt);pt(this,e,!1),st(this,M,re).call(this),J||(J=this._transport.getOptionalContentConfig());let ht=this._intentStates.get(ot.cacheKey);ht||(ht=Object.create(null),this._intentStates.set(ot.cacheKey,ht)),ht.streamReaderCancelTimeout&&(clearTimeout(ht.streamReaderCancelTimeout),ht.streamReaderCancelTimeout=null);const _t=!!(ot.renderingIntent&_util.RenderingIntentFlag.PRINT);ht.displayReadyCapability||(ht.displayReadyCapability=new _util.PromiseCapability,ht.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(ot));const vt=E=>{var q,I;ht.renderTasks.delete(St),(this._maybeCleanupAfterRender||_t)&&pt(this,e,!0),st(this,g,Kt).call(this,!_t),E?(St.capability.reject(E),this._abortOperatorList({intentState:ht,reason:E instanceof Error?E:new Error(E)})):St.capability.resolve(),(q=this._stats)==null||q.timeEnd("Rendering"),(I=this._stats)==null||I.timeEnd("Overall")},St=new InternalRenderTask({callback:vt,params:{canvasContext:r,viewport:p,transform:W,background:$},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Q,operatorList:ht.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_t,pdfBug:this._pdfBug,pageColors:tt});(ht.renderTasks||(ht.renderTasks=new Set)).add(St);const gt=St.task;return Promise.all([ht.displayReadyCapability.promise,J]).then(([E,q])=>{var I;if(A(this,e)){vt();return}(I=this._stats)==null||I.time("Rendering"),St.initializeGraphics({transparency:E,optionalContentConfig:q}),St.operatorListChanged()}).catch(vt),gt}getOperatorList({intent:r="display",annotationMode:p=_util.AnnotationMode.ENABLE,printAnnotationStorage:O=null}={}){var Q;function o(){$.operatorList.lastChunk&&($.opListReadCapability.resolve($.operatorList),$.renderTasks.delete(J))}const W=this._transport.getRenderingIntent(r,p,O,!0);let $=this._intentStates.get(W.cacheKey);$||($=Object.create(null),this._intentStates.set(W.cacheKey,$));let J;return $.opListReadCapability||(J=Object.create(null),J.operatorListChanged=o,$.opListReadCapability=new _util.PromiseCapability,($.renderTasks||($.renderTasks=new Set)).add(J),$.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Q=this._stats)==null||Q.time("Page Request"),this._pumpOperatorList(W)),$.opListReadCapability.promise}streamTextContent({includeMarkedContent:r=!1,disableNormalization:p=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:r===!0,disableNormalization:p===!0},{highWaterMark:100,size(o){return o.items.length}})}getTextContent(r={}){if(this._transport._htmlForXfa)return this.getXfa().then(O=>_xfa_text.XfaText.textContent(O));const p=this.streamTextContent(r);return new Promise(function(O,o){function W(){$.read().then(function({value:Q,done:tt}){if(tt){O(J);return}Object.assign(J.styles,Q.styles),J.items.push(...Q.items),W()},o)}const $=p.getReader(),J={items:[],styles:Object.create(null)};W()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const r=[];for(const p of this._intentStates.values())if(this._abortOperatorList({intentState:p,reason:new Error("Page was destroyed."),force:!0}),!p.opListReadCapability)for(const O of p.renderTasks)r.push(O.completed),O.cancel();return this.objs.clear(),pt(this,e,!1),st(this,M,re).call(this),Promise.all(r)}cleanup(r=!1){pt(this,e,!0);const p=st(this,g,Kt).call(this,!1);return r&&p&&this._stats&&(this._stats=new _display_utils.StatTimer),p}_startRenderPage(r,p){var o,W;const O=this._intentStates.get(p);O&&((o=this._stats)==null||o.timeEnd("Page Request"),(W=O.displayReadyCapability)==null||W.resolve(r))}_renderPageChunk(r,p){for(let O=0,o=r.length;O<o;O++)p.operatorList.fnArray.push(r.fnArray[O]),p.operatorList.argsArray.push(r.argsArray[O]);p.operatorList.lastChunk=r.lastChunk,p.operatorList.separateAnnots=r.separateAnnots;for(const O of p.renderTasks)O.operatorListChanged();r.lastChunk&&st(this,g,Kt).call(this,!0)}_pumpOperatorList({renderingIntent:r,cacheKey:p,annotationStorageMap:O}){const W=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:p,annotationStorage:O}).getReader(),$=this._intentStates.get(p);$.streamReader=W;const J=()=>{W.read().then(({value:Q,done:tt})=>{if(tt){$.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Q,$),J())},Q=>{if($.streamReader=null,!this._transport.destroyed){if($.operatorList){$.operatorList.lastChunk=!0;for(const tt of $.renderTasks)tt.operatorListChanged();st(this,g,Kt).call(this,!0)}if($.displayReadyCapability)$.displayReadyCapability.reject(Q);else if($.opListReadCapability)$.opListReadCapability.reject(Q);else throw Q}})};J()}_abortOperatorList({intentState:r,reason:p,force:O=!1}){if(r.streamReader){if(r.streamReaderCancelTimeout&&(clearTimeout(r.streamReaderCancelTimeout),r.streamReaderCancelTimeout=null),!O){if(r.renderTasks.size>0)return;if(p instanceof _display_utils.RenderingCancelledException){let o=RENDERING_CANCELLED_TIMEOUT;p.extraDelay>0&&p.extraDelay<1e3&&(o+=p.extraDelay),r.streamReaderCancelTimeout=setTimeout(()=>{r.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:r,reason:p,force:!0})},o);return}}if(r.streamReader.cancel(new _util.AbortException(p.message)).catch(()=>{}),r.streamReader=null,!this._transport.destroyed){for(const[o,W]of this._intentStates)if(W===r){this._intentStates.delete(o);break}this.cleanup()}}}get stats(){return this._stats}}c=new WeakMap,e=new WeakMap,g=new WeakSet,Kt=function(r=!1){if(st(this,M,re).call(this),!A(this,e))return!1;if(r)return pt(this,c,setTimeout(()=>{pt(this,c,null),st(this,g,Kt).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:p,operatorList:O}of this._intentStates.values())if(p.size>0||!O.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),pt(this,e,!1),!0},M=new WeakSet,re=function(){A(this,c)&&(clearTimeout(A(this,c)),pt(this,c,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Z(this,S,new Set);Z(this,C,Promise.resolve())}postMessage(r,p){const O={data:structuredClone(r,p?{transfer:p}:null)};A(this,C).then(()=>{for(const o of A(this,S))o.call(this,O)})}addEventListener(r,p){A(this,S).add(p)}removeEventListener(r,p){A(this,S).delete(p)}terminate(){A(this,S).clear()}}S=new WeakMap,C=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const h=(y=document==null?void 0:document.currentScript)==null?void 0:y.src;h&&(PDFWorkerUtil.fallbackWorkerSrc=h.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(h,r){let p;try{if(p=new URL(h),!p.origin||p.origin==="null")return!1}catch{return!1}const O=new URL(r,p);return p.origin===O.origin},PDFWorkerUtil.createCDNWrapper=function(h){const r=`importScripts("${h}");`;return URL.createObjectURL(new Blob([r]))}}const _PDFWorker=class{constructor({name:h=null,port:r=null,verbosity:p=(0,_util.getVerbosityLevel)()}={}){if(r&&A(_PDFWorker,U).has(r))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=h,this.destroyed=!1,this.verbosity=p,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,r){A(_PDFWorker,U).set(r,this),this._initializeFromPort(r);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(h){this._port=h,this._messageHandler=new _message_handler.MessageHandler("main","worker",h),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:h}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,h)||(h=PDFWorkerUtil.createCDNWrapper(new URL(h,window.location).href));const r=new Worker(h),p=new _message_handler.MessageHandler("main","worker",r),O=()=>{r.removeEventListener("error",o),p.destroy(),r.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=()=>{this._webWorker||O()};r.addEventListener("error",o),p.on("test",$=>{if(r.removeEventListener("error",o),this.destroyed){O();return}$?(this._messageHandler=p,this._port=r,this._webWorker=r,this._readyCapability.resolve(),p.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),p.destroy(),r.terminate())}),p.on("ready",$=>{if(r.removeEventListener("error",o),this.destroyed){O();return}try{W()}catch{this._setupFakeWorker()}});const W=()=>{const $=new Uint8Array;p.send("test",$,[$.buffer])};W();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(h=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const r=new LoopbackPort;this._port=r;const p=`fake${PDFWorkerUtil.fakeWorkerId++}`,O=new _message_handler.MessageHandler(p+"_worker",p,r);h.setup(O,r);const o=new _message_handler.MessageHandler(p,p+"_worker",r);this._messageHandler=o,this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})}).catch(h=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${h.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),A(_PDFWorker,U).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(h){if(!(h!=null&&h.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return A(this,U).has(h.port)?A(this,U).get(h.port):new _PDFWorker(h)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var h;try{return((h=globalThis.pdfjsWorker)==null?void 0:h.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;U=new WeakMap,Z(PDFWorker,U,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(r,p,O,o,W){Z(this,u);Z(this,x,new Map);Z(this,D,new Map);Z(this,m,new Map);this.messageHandler=r,this.loadingTask=p,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this._params=o,this.canvasFactory=W.canvasFactory,this.filterFactory=W.filterFactory,this.cMapReaderFactory=W.cMapReaderFactory,this.standardFontDataFactory=W.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=O,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(r,p=_util.AnnotationMode.ENABLE,O=null,o=!1){let W=_util.RenderingIntentFlag.DISPLAY,$=null;switch(r){case"any":W=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":W=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${r}`)}switch(p){case _util.AnnotationMode.DISABLE:W+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:W+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:W+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,$=(W&_util.RenderingIntentFlag.PRINT&&O instanceof _annotation_storage.PrintAnnotationStorage?O:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${p}`)}return o&&(W+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:W,cacheKey:`${W}_${_annotation_storage.AnnotationStorage.getHash($)}`,annotationStorageMap:$}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const r=[];for(const O of A(this,D).values())r.push(O._destroy());A(this,D).clear(),A(this,m).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const p=this.messageHandler.sendWithPromise("Terminate",null);return r.push(p),Promise.all(r).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),A(this,x).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:r,loadingTask:p}=this;r.on("GetReader",(O,o)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=W=>{this._lastProgress={loaded:W.loaded,total:W.total}},o.onPull=()=>{this._fullReader.read().then(function({value:W,done:$}){if($){o.close();return}(0,_util.assert)(W instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(W),1,[W])}).catch(W=>{o.error(W)})},o.onCancel=W=>{this._fullReader.cancel(W),o.ready.catch($=>{if(!this.destroyed)throw $})}}),r.on("ReaderHeadersReady",O=>{const o=new _util.PromiseCapability,W=this._fullReader;return W.headersReady.then(()=>{var $;(!W.isStreamingSupported||!W.isRangeSupported)&&(this._lastProgress&&(($=p.onProgress)==null||$.call(p,this._lastProgress)),W.onProgress=J=>{var Q;(Q=p.onProgress)==null||Q.call(p,{loaded:J.loaded,total:J.total})}),o.resolve({isStreamingSupported:W.isStreamingSupported,isRangeSupported:W.isRangeSupported,contentLength:W.contentLength})},o.reject),o.promise}),r.on("GetRangeReader",(O,o)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const W=this._networkStream.getRangeReader(O.begin,O.end);if(!W){o.close();return}o.onPull=()=>{W.read().then(function({value:$,done:J}){if(J){o.close();return}(0,_util.assert)($ instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array($),1,[$])}).catch($=>{o.error($)})},o.onCancel=$=>{W.cancel($),o.ready.catch(J=>{if(!this.destroyed)throw J})}}),r.on("GetDoc",({pdfInfo:O})=>{this._numPages=O.numPages,this._htmlForXfa=O.htmlForXfa,delete O.htmlForXfa,p._capability.resolve(new PDFDocumentProxy(O,this))}),r.on("DocException",function(O){let o;switch(O.name){case"PasswordException":o=new _util.PasswordException(O.message,O.code);break;case"InvalidPDFException":o=new _util.InvalidPDFException(O.message);break;case"MissingPDFException":o=new _util.MissingPDFException(O.message);break;case"UnexpectedResponseException":o=new _util.UnexpectedResponseException(O.message,O.status);break;case"UnknownErrorException":o=new _util.UnknownErrorException(O.message,O.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}p._capability.reject(o)}),r.on("PasswordRequest",O=>{if(this._passwordCapability=new _util.PromiseCapability,p.onPassword){const o=W=>{W instanceof Error?this._passwordCapability.reject(W):this._passwordCapability.resolve({password:W})};try{p.onPassword(o,O.code)}catch(W){this._passwordCapability.reject(W)}}else this._passwordCapability.reject(new _util.PasswordException(O.message,O.code));return this._passwordCapability.promise}),r.on("DataLoaded",O=>{var o;(o=p.onProgress)==null||o.call(p,{loaded:O.length,total:O.length}),this.downloadInfoCapability.resolve(O)}),r.on("StartRenderPage",O=>{if(this.destroyed)return;A(this,D).get(O.pageIndex)._startRenderPage(O.transparency,O.cacheKey)}),r.on("commonobj",([O,o,W])=>{var $;if(!this.destroyed&&!this.commonObjs.has(O))switch(o){case"Font":const J=this._params;if("error"in W){const dt=W.error;(0,_util.warn)(`Error during font loading: ${dt}`),this.commonObjs.resolve(O,dt);break}const Q=J.pdfBug&&(($=globalThis.FontInspector)!=null&&$.enabled)?(dt,ot)=>globalThis.FontInspector.fontAdded(dt,ot):null,tt=new _font_loader.FontFaceObject(W,{isEvalSupported:J.isEvalSupported,disableFontFace:J.disableFontFace,ignoreErrors:J.ignoreErrors,inspectFont:Q});this.fontLoader.bind(tt).catch(dt=>r.sendWithPromise("FontFallback",{id:O})).finally(()=>{!J.fontExtraProperties&&tt.data&&(tt.data=null),this.commonObjs.resolve(O,tt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(O,W);break;default:throw new Error(`Got unknown common object type ${o}`)}}),r.on("obj",([O,o,W,$])=>{var Q;if(this.destroyed)return;const J=A(this,D).get(o);if(!J.objs.has(O))switch(W){case"Image":if(J.objs.resolve(O,$),$){let tt;if($.bitmap){const{width:dt,height:ot}=$;tt=dt*ot*4}else tt=((Q=$.data)==null?void 0:Q.length)||0;tt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(J._maybeCleanupAfterRender=!0)}break;case"Pattern":J.objs.resolve(O,$);break;default:throw new Error(`Got unknown object type ${W}`)}}),r.on("DocProgress",O=>{var o;this.destroyed||(o=p.onProgress)==null||o.call(p,{loaded:O.loaded,total:O.total})}),r.on("FetchBuiltInCMap",O=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(O):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),r.on("FetchStandardFontData",O=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(O):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((r=this._fullReader)==null?void 0:r.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(r){if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request."));const p=r-1,O=A(this,m).get(p);if(O)return O;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:p}).then(W=>{if(this.destroyed)throw new Error("Transport destroyed");const $=new PDFPageProxy(p,W,this,this._params.pdfBug);return A(this,D).set(p,$),$});return A(this,m).set(p,o),o}getPageIndex(r){return typeof r!="object"||r===null||!Number.isInteger(r.num)||r.num<0||!Number.isInteger(r.gen)||r.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:r.num,gen:r.gen})}getAnnotations(r,p){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:p})}getFieldObjects(){return st(this,u,ue).call(this,"GetFieldObjects")}hasJSActions(){return st(this,u,ue).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(r){return typeof r!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(r){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:r})}getStructTree(r){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:r})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(r=>new _optional_content_config.OptionalContentConfig(r))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const r="GetMetadata",p=A(this,x).get(r);if(p)return p;const O=this.messageHandler.sendWithPromise(r,null).then(o=>{var W,$;return{info:o[0],metadata:o[1]?new _metadata.Metadata(o[1]):null,contentDispositionFilename:((W=this._fullReader)==null?void 0:W.filename)??null,contentLength:(($=this._fullReader)==null?void 0:$.contentLength)??null}});return A(this,x).set(r,O),O}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(r=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const p of A(this,D).values())if(!p.cleanup())throw new Error(`startCleanup: Page ${p.pageNumber} is currently rendering.`);this.commonObjs.clear(),r||this.fontLoader.clear(),A(this,x).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:r,enableXfa:p}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r,enableXfa:p})}}x=new WeakMap,D=new WeakMap,m=new WeakMap,u=new WeakSet,ue=function(r,p=null){const O=A(this,x).get(r);if(O)return O;const o=this.messageHandler.sendWithPromise(r,p);return A(this,x).set(r,o),o};class PDFObjects{constructor(){Z(this,w);Z(this,_,Object.create(null))}get(r,p=null){if(p){const o=st(this,w,fe).call(this,r);return o.capability.promise.then(()=>p(o.data)),null}const O=A(this,_)[r];if(!(O!=null&&O.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${r}.`);return O.data}has(r){const p=A(this,_)[r];return(p==null?void 0:p.capability.settled)||!1}resolve(r,p=null){const O=st(this,w,fe).call(this,r);O.data=p,O.capability.resolve()}clear(){var r;for(const p in A(this,_)){const{data:O}=A(this,_)[p];(r=O==null?void 0:O.bitmap)==null||r.close()}pt(this,_,Object.create(null))}}_=new WeakMap,w=new WeakSet,fe=function(r){const p=A(this,_)[r];return p||(A(this,_)[r]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(r){Z(this,b,null);pt(this,b,r),this.onContinue=null}get promise(){return A(this,b).capability.promise}cancel(r=0){A(this,b).cancel(null,r)}get separateAnnots(){const{separateAnnots:r}=A(this,b).operatorList;if(!r)return!1;const{annotationCanvasMap:p}=A(this,b);return r.form||r.canvas&&(p==null?void 0:p.size)>0}}b=new WeakMap,exports.RenderTask=RenderTask;const l=class{constructor({callback:r,params:p,objs:O,commonObjs:o,annotationCanvasMap:W,operatorList:$,pageIndex:J,canvasFactory:Q,filterFactory:tt,useRequestAnimationFrame:dt=!1,pdfBug:ot=!1,pageColors:ht=null}){this.callback=r,this.params=p,this.objs=O,this.commonObjs=o,this.annotationCanvasMap=W,this.operatorListIdx=null,this.operatorList=$,this._pageIndex=J,this.canvasFactory=Q,this.filterFactory=tt,this._pdfBug=ot,this.pageColors=ht,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=dt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=p.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:r=!1,optionalContentConfig:p}){var J,Q;if(this.cancelled)return;if(this._canvas){if(A(l,n).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");A(l,n).add(this._canvas)}this._pdfBug&&((J=globalThis.StepperManager)!=null&&J.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:O,viewport:o,transform:W,background:$}=this.params;this.gfx=new _canvas.CanvasGraphics(O,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:p},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:W,viewport:o,transparency:r,background:$}),this.operatorListIdx=0,this.graphicsReady=!0,(Q=this.graphicsReadyCallback)==null||Q.call(this)}cancel(r=null,p=0){var O;this.running=!1,this.cancelled=!0,(O=this.gfx)==null||O.endDrawing(),this._canvas&&A(l,n).delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",p))}operatorListChanged(){var r;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(r=this.stepper)==null||r.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&A(l,n).delete(this._canvas),this.callback())))}};let InternalRenderTask=l;n=new WeakMap,Z(InternalRenderTask,n,new WeakSet);const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(L,t,c)=>{var S,C,y,Oe,x;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var e=c(1),g=c(4),P=c(8);class M{constructor(){Z(this,y);Z(this,S,!1);Z(this,C,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(m,u){const i=A(this,C).get(m);return i===void 0?u:Object.assign(u,i)}getRawValue(m){return A(this,C).get(m)}remove(m){if(A(this,C).delete(m),A(this,C).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const u of A(this,C).values())if(u instanceof g.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(m,u){const i=A(this,C).get(m);let _=!1;if(i!==void 0)for(const[w,F]of Object.entries(u))i[w]!==F&&(_=!0,i[w]=F);else _=!0,A(this,C).set(m,u);_&&st(this,y,Oe).call(this),u instanceof g.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(u.constructor._type)}has(m){return A(this,C).has(m)}getAll(){return A(this,C).size>0?(0,e.objectFromMap)(A(this,C)):null}setAll(m){for(const[u,i]of Object.entries(m))this.setValue(u,i)}get size(){return A(this,C).size}resetModified(){A(this,S)&&(pt(this,S,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new G(this)}get serializable(){if(A(this,C).size===0)return null;const m=new Map;for(const[u,i]of A(this,C)){const _=i instanceof g.AnnotationEditor?i.serialize():i;_&&m.set(u,_)}return m}static getHash(m){if(!m)return"";const u=new P.MurmurHash3_64;for(const[i,_]of m)u.update(`${i}:${JSON.stringify(_)}`);return u.hexdigest()}}S=new WeakMap,C=new WeakMap,y=new WeakSet,Oe=function(){A(this,S)||(pt(this,S,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=M;class G extends M{constructor(u){super();Z(this,x,null);pt(this,x,structuredClone(u.serializable))}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return A(this,x)}}x=new WeakMap,t.PrintAnnotationStorage=G},(L,t,c)=>{var M,G,S,C,y,U;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var e=c(5),g=c(1);const x=class{constructor(m){Z(this,M,this.focusin.bind(this));Z(this,G,this.focusout.bind(this));Z(this,S,!1);Z(this,C,!1);Z(this,y,!1);Ot(this,"_uiManager",null);Z(this,U,x._zIndex++);this.constructor===x&&(0,g.unreachable)("Cannot initialize AnnotationEditor."),this.parent=m.parent,this.id=m.id,this.width=this.height=null,this.pageIndex=m.parent.pageIndex,this.name=m.name,this.div=null,this._uiManager=m.uiManager;const{rotation:u,rawDims:{pageWidth:i,pageHeight:_,pageX:w,pageY:F}}=this.parent.viewport;this.rotation=u,this.pageRotation=(360+u-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,_],this.pageTranslation=[w,F];const[b,n]=this.parentDimensions;this.x=m.x/b,this.y=m.y/n,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,g.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(m){this._uiManager.addCommands(m)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=A(this,U)}setParent(m){m!==null&&(this.pageIndex=m.pageIndex,this.pageDimensions=m.pageDimensions),this.parent=m}focusin(m){A(this,S)?pt(this,S,!1):this.parent.setSelected(this)}focusout(m){var i;if(!this.isAttachedToDOM)return;const u=m.relatedTarget;u!=null&&u.closest(`#${this.id}`)||(m.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(m){const u=this.parent.div.getBoundingClientRect();this.startX=m.clientX-u.x,this.startY=m.clientY-u.y,m.dataTransfer.setData("text/plain",this.id),m.dataTransfer.effectAllowed="move"}setAt(m,u,i,_){const[w,F]=this.parentDimensions;[i,_]=this.screenToPageTranslation(i,_),this.x=(m+i)/w,this.y=(u+_)/F,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(m,u){const[i,_]=this.parentDimensions;[m,u]=this.screenToPageTranslation(m,u),this.x+=m/i,this.y+=u/_,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(m,u){switch(this.parentRotation){case 90:return[u,-m];case 180:return[-m,-u];case 270:return[-u,m];default:return[m,u]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:m}=this._uiManager.viewParameters,[u,i]=this.pageDimensions;return[u*m,i*m]}setDims(m,u){const[i,_]=this.parentDimensions;this.div.style.width=`${100*m/i}%`,this.div.style.height=`${100*u/_}%`}fixDims(){const{style:m}=this.div,{height:u,width:i}=m,_=i.endsWith("%"),w=u.endsWith("%");if(_&&w)return;const[F,b]=this.parentDimensions;_||(m.width=`${100*parseFloat(i)/F}%`),w||(m.height=`${100*parseFloat(u)/b}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",A(this,M)),this.div.addEventListener("focusout",A(this,G));const[m,u]=this.getInitialTranslation();return this.translate(m,u),(0,e.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(m){const{isMac:u}=g.FeatureTest.platform;if(m.button!==0||m.ctrlKey&&u){m.preventDefault();return}m.ctrlKey&&!u||m.shiftKey||m.metaKey&&u?this.parent.toggleSelected(this):this.parent.setSelected(this),pt(this,S,!0)}getRect(m,u){const i=this.parentScale,[_,w]=this.pageDimensions,[F,b]=this.pageTranslation,n=m/i,l=u/i,h=this.x*_,r=this.y*w,p=this.width*_,O=this.height*w;switch(this.rotation){case 0:return[h+n+F,w-r-l-O+b,h+n+p+F,w-r-l+b];case 90:return[h+l+F,w-r+n+b,h+l+O+F,w-r+n+p+b];case 180:return[h-n-p+F,w-r+l+b,h-n+F,w-r+l+O+b];case 270:return[h-l-O+F,w-r-n-p+b,h-l+F,w-r-n+b];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(m,u){const[i,_,w,F]=m,b=w-i,n=F-_;switch(this.rotation){case 0:return[i,u-F,b,n];case 90:return[i,u-_,n,b];case 180:return[w,u-_,b,n];case 270:return[w,u-F,n,b];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){pt(this,y,!0)}disableEditMode(){pt(this,y,!1)}isInEditMode(){return A(this,y)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var m;(m=this.div)==null||m.addEventListener("focusin",A(this,M))}serialize(){(0,g.unreachable)("An editor must be serializable")}static deserialize(m,u,i){const _=new this.prototype.constructor({parent:u,id:u.getNextId(),uiManager:i});_.rotation=m.rotation;const[w,F]=_.pageDimensions,[b,n,l,h]=_.getRectInCurrentCoords(m.rect,F);return _.x=b/w,_.y=n/F,_.width=l/w,_.height=h/F,_}remove(){this.div.removeEventListener("focusin",A(this,M)),this.div.removeEventListener("focusout",A(this,G)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var m;(m=this.div)==null||m.classList.add("selectedEditor")}unselect(){var m;(m=this.div)==null||m.classList.remove("selectedEditor")}updateParams(m,u){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return A(this,C)}set isEditing(m){pt(this,C,m),m?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let P=x;M=new WeakMap,G=new WeakMap,S=new WeakMap,C=new WeakMap,y=new WeakMap,U=new WeakMap,Ot(P,"_colorManager",new e.ColorManager),Ot(P,"_zIndex",1),t.AnnotationEditor=P},(L,t,c)=>{var x,D,m,u,i,_,Ie,b,n,l,h,r,p,O,o,W,$,J,Q,tt,dt,ot,ht,_t,vt,St,gt,z,d,f,E,Le,I,pe,N,Ne,H,Be,a,Wt,T,te,X,je,K,Ue,lt,ge,rt,ee,ft,me;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=P,t.opacityToHex=M;var e=c(1),g=c(6);function P(Ct,Y,At){for(const Et of At)Y.addEventListener(Et,Ct[Et].bind(Ct))}function M(Ct){return Math.round(Math.min(255,Math.max(1,255*Ct))).toString(16).padStart(2,"0")}class G{constructor(){Z(this,x,0)}getId(){return`${e.AnnotationEditorPrefix}${ie(this,x)._++}`}}x=new WeakMap;class S{constructor(Y=128){Z(this,D,[]);Z(this,m,!1);Z(this,u,void 0);Z(this,i,-1);pt(this,u,Y)}add({cmd:Y,undo:At,mustExec:Et,type:mt=NaN,overwriteIfSameType:at=!1,keepUndo:R=!1}){if(Et&&Y(),A(this,m))return;const B={cmd:Y,undo:At,type:mt};if(A(this,i)===-1){A(this,D).length>0&&(A(this,D).length=0),pt(this,i,0),A(this,D).push(B);return}if(at&&A(this,D)[A(this,i)].type===mt){R&&(B.undo=A(this,D)[A(this,i)].undo),A(this,D)[A(this,i)]=B;return}const ct=A(this,i)+1;ct===A(this,u)?A(this,D).splice(0,1):(pt(this,i,ct),ct<A(this,D).length&&A(this,D).splice(ct)),A(this,D).push(B)}undo(){A(this,i)!==-1&&(pt(this,m,!0),A(this,D)[A(this,i)].undo(),pt(this,m,!1),pt(this,i,A(this,i)-1))}redo(){A(this,i)<A(this,D).length-1&&(pt(this,i,A(this,i)+1),pt(this,m,!0),A(this,D)[A(this,i)].cmd(),pt(this,m,!1))}hasSomethingToUndo(){return A(this,i)!==-1}hasSomethingToRedo(){return A(this,i)<A(this,D).length-1}destroy(){pt(this,D,null)}}D=new WeakMap,m=new WeakMap,u=new WeakMap,i=new WeakMap,t.CommandManager=S;class C{constructor(Y){Z(this,_);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:At}=e.FeatureTest.platform;for(const[Et,mt]of Y)for(const at of Et){const R=at.startsWith("mac+");At&&R?(this.callbacks.set(at.slice(4),mt),this.allKeys.add(at.split("+").at(-1))):!At&&!R&&(this.callbacks.set(at,mt),this.allKeys.add(at.split("+").at(-1)))}}exec(Y,At){if(!this.allKeys.has(At.key))return;const Et=this.callbacks.get(st(this,_,Ie).call(this,At));Et&&(Et.bind(Y)(),At.stopPropagation(),At.preventDefault())}}_=new WeakSet,Ie=function(Y){Y.altKey&&this.buffer.push("alt"),Y.ctrlKey&&this.buffer.push("ctrl"),Y.metaKey&&this.buffer.push("meta"),Y.shiftKey&&this.buffer.push("shift"),this.buffer.push(Y.key);const At=this.buffer.join("+");return this.buffer.length=0,At},t.KeyboardManager=C;const F=class{get _colors(){const Y=new Map([["CanvasText",null],["Canvas",null]]);return(0,g.getColorValues)(Y),(0,e.shadow)(this,"_colors",Y)}convert(Y){const At=(0,g.getRGB)(Y);if(!window.matchMedia("(forced-colors: active)").matches)return At;for(const[Et,mt]of this._colors)if(mt.every((at,R)=>at===At[R]))return F._colorsMapping.get(Et);return At}getHexCode(Y){const At=this._colors.get(Y);return At?e.Util.makeHexColor(...At):Y}};let y=F;Ot(y,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=y;const yt=class{constructor(Y,At,Et){Z(this,E);Z(this,I);Z(this,N);Z(this,H);Z(this,a);Z(this,T);Z(this,X);Z(this,K);Z(this,lt);Z(this,rt);Z(this,ft);Z(this,b,null);Z(this,n,new Map);Z(this,l,new Map);Z(this,h,null);Z(this,r,new S);Z(this,p,0);Z(this,O,null);Z(this,o,new Set);Z(this,W,null);Z(this,$,new G);Z(this,J,!1);Z(this,Q,e.AnnotationEditorType.NONE);Z(this,tt,new Set);Z(this,dt,this.copy.bind(this));Z(this,ot,this.cut.bind(this));Z(this,ht,this.paste.bind(this));Z(this,_t,this.keydown.bind(this));Z(this,vt,this.onEditingAction.bind(this));Z(this,St,this.onPageChanging.bind(this));Z(this,gt,this.onScaleChanging.bind(this));Z(this,z,this.onRotationChanging.bind(this));Z(this,d,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Z(this,f,null);pt(this,f,Y),pt(this,W,At),A(this,W)._on("editingaction",A(this,vt)),A(this,W)._on("pagechanging",A(this,St)),A(this,W)._on("scalechanging",A(this,gt)),A(this,W)._on("rotationchanging",A(this,z)),pt(this,h,Et),this.viewParameters={realScale:g.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){st(this,I,pe).call(this),A(this,W)._off("editingaction",A(this,vt)),A(this,W)._off("pagechanging",A(this,St)),A(this,W)._off("scalechanging",A(this,gt)),A(this,W)._off("rotationchanging",A(this,z));for(const Y of A(this,l).values())Y.destroy();A(this,l).clear(),A(this,n).clear(),A(this,o).clear(),pt(this,b,null),A(this,tt).clear(),A(this,r).destroy()}onPageChanging({pageNumber:Y}){pt(this,p,Y-1)}focusMainContainer(){A(this,f).focus()}addShouldRescale(Y){A(this,o).add(Y)}removeShouldRescale(Y){A(this,o).delete(Y)}onScaleChanging({scale:Y}){this.commitOrRemove(),this.viewParameters.realScale=Y*g.PixelsPerInch.PDF_TO_CSS_UNITS;for(const At of A(this,o))At.onScaleChanging()}onRotationChanging({pagesRotation:Y}){this.commitOrRemove(),this.viewParameters.rotation=Y}addToAnnotationStorage(Y){!Y.isEmpty()&&A(this,h)&&!A(this,h).has(Y.id)&&A(this,h).setValue(Y.id,Y)}copy(Y){if(Y.preventDefault(),A(this,b)&&A(this,b).commitOrRemove(),!this.hasSelection)return;const At=[];for(const Et of A(this,tt))Et.isEmpty()||At.push(Et.serialize());At.length!==0&&Y.clipboardData.setData("application/pdfjs",JSON.stringify(At))}cut(Y){this.copy(Y),this.delete()}paste(Y){Y.preventDefault();let At=Y.clipboardData.getData("application/pdfjs");if(!At)return;try{At=JSON.parse(At)}catch(mt){(0,e.warn)(`paste: "${mt.message}".`);return}if(!Array.isArray(At))return;this.unselectAll();const Et=A(this,l).get(A(this,p));try{const mt=[];for(const B of At){const ct=Et.deserialize(B);if(!ct)return;mt.push(ct)}const at=()=>{for(const B of mt)st(this,lt,ge).call(this,B);st(this,ft,me).call(this,mt)},R=()=>{for(const B of mt)B.remove()};this.addCommands({cmd:at,undo:R,mustExec:!0})}catch(mt){(0,e.warn)(`paste: "${mt.message}".`)}}keydown(Y){var At;(At=this.getActive())!=null&&At.shouldGetKeyboardEvents()||yt._keyboardManager.exec(this,Y)}onEditingAction(Y){["undo","redo","delete","selectAll"].includes(Y.name)&&this[Y.name]()}setEditingState(Y){Y?(st(this,E,Le).call(this),st(this,N,Ne).call(this),st(this,a,Wt).call(this,{isEditing:A(this,Q)!==e.AnnotationEditorType.NONE,isEmpty:st(this,rt,ee).call(this),hasSomethingToUndo:A(this,r).hasSomethingToUndo(),hasSomethingToRedo:A(this,r).hasSomethingToRedo(),hasSelectedEditor:!1})):(st(this,I,pe).call(this),st(this,H,Be).call(this),st(this,a,Wt).call(this,{isEditing:!1}))}registerEditorTypes(Y){if(!A(this,O)){pt(this,O,Y);for(const At of A(this,O))st(this,T,te).call(this,At.defaultPropertiesToUpdate)}}getId(){return A(this,$).getId()}get currentLayer(){return A(this,l).get(A(this,p))}get currentPageIndex(){return A(this,p)}addLayer(Y){A(this,l).set(Y.pageIndex,Y),A(this,J)?Y.enable():Y.disable()}removeLayer(Y){A(this,l).delete(Y.pageIndex)}updateMode(Y){if(pt(this,Q,Y),Y===e.AnnotationEditorType.NONE)this.setEditingState(!1),st(this,K,Ue).call(this);else{this.setEditingState(!0),st(this,X,je).call(this);for(const At of A(this,l).values())At.updateMode(Y)}}updateToolbar(Y){Y!==A(this,Q)&&A(this,W).dispatch("switchannotationeditormode",{source:this,mode:Y})}updateParams(Y,At){if(A(this,O)){for(const Et of A(this,tt))Et.updateParams(Y,At);for(const Et of A(this,O))Et.updateDefaultParams(Y,At)}}getEditors(Y){const At=[];for(const Et of A(this,n).values())Et.pageIndex===Y&&At.push(Et);return At}getEditor(Y){return A(this,n).get(Y)}addEditor(Y){A(this,n).set(Y.id,Y)}removeEditor(Y){var At;A(this,n).delete(Y.id),this.unselect(Y),(At=A(this,h))==null||At.remove(Y.id)}setActiveEditor(Y){A(this,b)!==Y&&(pt(this,b,Y),Y&&st(this,T,te).call(this,Y.propertiesToUpdate))}toggleSelected(Y){if(A(this,tt).has(Y)){A(this,tt).delete(Y),Y.unselect(),st(this,a,Wt).call(this,{hasSelectedEditor:this.hasSelection});return}A(this,tt).add(Y),Y.select(),st(this,T,te).call(this,Y.propertiesToUpdate),st(this,a,Wt).call(this,{hasSelectedEditor:!0})}setSelected(Y){for(const At of A(this,tt))At!==Y&&At.unselect();A(this,tt).clear(),A(this,tt).add(Y),Y.select(),st(this,T,te).call(this,Y.propertiesToUpdate),st(this,a,Wt).call(this,{hasSelectedEditor:!0})}isSelected(Y){return A(this,tt).has(Y)}unselect(Y){Y.unselect(),A(this,tt).delete(Y),st(this,a,Wt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return A(this,tt).size!==0}undo(){A(this,r).undo(),st(this,a,Wt).call(this,{hasSomethingToUndo:A(this,r).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:st(this,rt,ee).call(this)})}redo(){A(this,r).redo(),st(this,a,Wt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:A(this,r).hasSomethingToRedo(),isEmpty:st(this,rt,ee).call(this)})}addCommands(Y){A(this,r).add(Y),st(this,a,Wt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:st(this,rt,ee).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Y=[...A(this,tt)],At=()=>{for(const mt of Y)mt.remove()},Et=()=>{for(const mt of Y)st(this,lt,ge).call(this,mt)};this.addCommands({cmd:At,undo:Et,mustExec:!0})}commitOrRemove(){var Y;(Y=A(this,b))==null||Y.commitOrRemove()}selectAll(){for(const Y of A(this,tt))Y.commit();st(this,ft,me).call(this,A(this,n).values())}unselectAll(){if(A(this,b)){A(this,b).commitOrRemove();return}if(A(this,tt).size!==0){for(const Y of A(this,tt))Y.unselect();A(this,tt).clear(),st(this,a,Wt).call(this,{hasSelectedEditor:!1})}}isActive(Y){return A(this,b)===Y}getActive(){return A(this,b)}getMode(){return A(this,Q)}};let U=yt;b=new WeakMap,n=new WeakMap,l=new WeakMap,h=new WeakMap,r=new WeakMap,p=new WeakMap,O=new WeakMap,o=new WeakMap,W=new WeakMap,$=new WeakMap,J=new WeakMap,Q=new WeakMap,tt=new WeakMap,dt=new WeakMap,ot=new WeakMap,ht=new WeakMap,_t=new WeakMap,vt=new WeakMap,St=new WeakMap,gt=new WeakMap,z=new WeakMap,d=new WeakMap,f=new WeakMap,E=new WeakSet,Le=function(){A(this,f).addEventListener("keydown",A(this,_t))},I=new WeakSet,pe=function(){A(this,f).removeEventListener("keydown",A(this,_t))},N=new WeakSet,Ne=function(){document.addEventListener("copy",A(this,dt)),document.addEventListener("cut",A(this,ot)),document.addEventListener("paste",A(this,ht))},H=new WeakSet,Be=function(){document.removeEventListener("copy",A(this,dt)),document.removeEventListener("cut",A(this,ot)),document.removeEventListener("paste",A(this,ht))},a=new WeakSet,Wt=function(Y){Object.entries(Y).some(([Et,mt])=>A(this,d)[Et]!==mt)&&A(this,W).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(A(this,d),Y)})},T=new WeakSet,te=function(Y){A(this,W).dispatch("annotationeditorparamschanged",{source:this,details:Y})},X=new WeakSet,je=function(){if(!A(this,J)){pt(this,J,!0);for(const Y of A(this,l).values())Y.enable()}},K=new WeakSet,Ue=function(){if(this.unselectAll(),A(this,J)){pt(this,J,!1);for(const Y of A(this,l).values())Y.disable()}},lt=new WeakSet,ge=function(Y){const At=A(this,l).get(Y.pageIndex);At?At.addOrRebuild(Y):this.addEditor(Y)},rt=new WeakSet,ee=function(){if(A(this,n).size===0)return!0;if(A(this,n).size===1)for(const Y of A(this,n).values())return Y.isEmpty();return!1},ft=new WeakSet,me=function(Y){A(this,tt).clear();for(const At of Y)At.isEmpty()||(A(this,tt).add(At),At.select());st(this,a,Wt).call(this,{hasSelectedEditor:!0})},Ot(U,"_keyboardManager",new C([[["ctrl+a","mac+meta+a"],yt.prototype.selectAll],[["ctrl+z","mac+meta+z"],yt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],yt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],yt.prototype.delete],[["Escape","mac+Escape"],yt.prototype.unselectAll]])),t.AnnotationEditorUIManager=U},(L,t,c)=>{var dt,ot,ht,_t,vt,St,gt,z,d,Jt,E,$t,I,Vt;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=h,t.getColorValues=W,t.getCurrentTransform=$,t.getCurrentTransformInverse=J,t.getFilenameFromUrl=w,t.getPdfFilenameFromUrl=F,t.getRGB=o,t.getXfaPageViewport=O,t.isDataScheme=i,t.isPdfFile=_,t.isValidFetchUrl=n,t.loadScript=l,t.setLayerDimensions=Q;var e=c(7),g=c(1);const P="http://www.w3.org/2000/svg",M="pdfjs_internal_id_";t.AnnotationPrefix=M;const tt=class{};let G=tt;Ot(G,"CSS",96),Ot(G,"PDF",72),Ot(G,"PDF_TO_CSS_UNITS",tt.CSS/tt.PDF),t.PixelsPerInch=G;class S extends e.BaseFilterFactory{constructor({docId:H,ownerDocument:s=globalThis.document}={}){super();Z(this,d);Z(this,E);Z(this,I);Z(this,dt,void 0);Z(this,ot,void 0);Z(this,ht,void 0);Z(this,_t,void 0);Z(this,vt,void 0);Z(this,St,void 0);Z(this,gt,void 0);Z(this,z,0);pt(this,ht,H),pt(this,_t,s)}addFilter(H){if(!H)return"none";let s=A(this,d,Jt).get(H);if(s)return s;let a,v,T,k;if(H.length===1){const lt=H[0],et=new Array(256);for(let rt=0;rt<256;rt++)et[rt]=lt[rt]/255;k=a=v=T=et.join(",")}else{const[lt,et,rt]=H,ut=new Array(256),ft=new Array(256),wt=new Array(256);for(let yt=0;yt<256;yt++)ut[yt]=lt[yt]/255,ft[yt]=et[yt]/255,wt[yt]=rt[yt]/255;a=ut.join(","),v=ft.join(","),T=wt.join(","),k=`${a}${v}${T}`}if(s=A(this,d,Jt).get(k),s)return A(this,d,Jt).set(H,s),s;const X=`g_${A(this,ht)}_transfer_map_${ie(this,z)._++}`,nt=`url(#${X})`;A(this,d,Jt).set(H,nt),A(this,d,Jt).set(k,nt);const K=A(this,_t).createElementNS(P,"filter",P);K.setAttribute("id",X),K.setAttribute("color-interpolation-filters","sRGB");const it=A(this,_t).createElementNS(P,"feComponentTransfer");return K.append(it),st(this,I,Vt).call(this,it,"feFuncR",a),st(this,I,Vt).call(this,it,"feFuncG",v),st(this,I,Vt).call(this,it,"feFuncB",T),A(this,E,$t).append(K),nt}addHCMFilter(H,s){var rt;const a=`${H}-${s}`;if(A(this,St)===a)return A(this,gt);if(pt(this,St,a),pt(this,gt,"none"),(rt=A(this,vt))==null||rt.remove(),!H||!s)return A(this,gt);A(this,E,$t).style.color=H,H=getComputedStyle(A(this,E,$t)).getPropertyValue("color");const v=o(H);H=g.Util.makeHexColor(...v),A(this,E,$t).style.color=s,s=getComputedStyle(A(this,E,$t)).getPropertyValue("color");const T=o(s);if(s=g.Util.makeHexColor(...T),A(this,E,$t).style.color="",H==="#000000"&&s==="#ffffff"||H===s)return A(this,gt);const k=new Array(256);for(let ut=0;ut<=255;ut++){const ft=ut/255;k[ut]=ft<=.03928?ft/12.92:((ft+.055)/1.055)**2.4}const X=k.join(","),nt=`g_${A(this,ht)}_hcm_filter`,K=pt(this,vt,A(this,_t).createElementNS(P,"filter",P));K.setAttribute("id",nt),K.setAttribute("color-interpolation-filters","sRGB");let it=A(this,_t).createElementNS(P,"feComponentTransfer");K.append(it),st(this,I,Vt).call(this,it,"feFuncR",X),st(this,I,Vt).call(this,it,"feFuncG",X),st(this,I,Vt).call(this,it,"feFuncB",X);const lt=A(this,_t).createElementNS(P,"feColorMatrix");lt.setAttribute("type","matrix"),lt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),K.append(lt),it=A(this,_t).createElementNS(P,"feComponentTransfer"),K.append(it);const et=(ut,ft)=>{const wt=v[ut]/255,yt=T[ut]/255,Ct=new Array(ft+1);for(let Y=0;Y<=ft;Y++)Ct[Y]=wt+Y/ft*(yt-wt);return Ct.join(",")};return st(this,I,Vt).call(this,it,"feFuncR",et(0,5)),st(this,I,Vt).call(this,it,"feFuncG",et(1,5)),st(this,I,Vt).call(this,it,"feFuncB",et(2,5)),A(this,E,$t).append(K),pt(this,gt,`url(#${nt})`),A(this,gt)}destroy(H=!1){H&&A(this,gt)||(A(this,ot)&&(A(this,ot).parentNode.parentNode.remove(),pt(this,ot,null)),A(this,dt)&&(A(this,dt).clear(),pt(this,dt,null)),pt(this,z,0))}}dt=new WeakMap,ot=new WeakMap,ht=new WeakMap,_t=new WeakMap,vt=new WeakMap,St=new WeakMap,gt=new WeakMap,z=new WeakMap,d=new WeakSet,Jt=function(){return A(this,dt)||pt(this,dt,new Map)},E=new WeakSet,$t=function(){if(!A(this,ot)){const H=A(this,_t).createElement("div"),{style:s}=H;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const a=A(this,_t).createElementNS(P,"svg");a.setAttribute("width",0),a.setAttribute("height",0),pt(this,ot,A(this,_t).createElementNS(P,"defs")),H.append(a),a.append(A(this,ot)),A(this,_t).body.append(H)}return A(this,ot)},I=new WeakSet,Vt=function(H,s,a){const v=A(this,_t).createElementNS(P,s);v.setAttribute("type","discrete"),v.setAttribute("tableValues",a),H.append(v)},t.DOMFilterFactory=S;class C extends e.BaseCanvasFactory{constructor({ownerDocument:j=globalThis.document}={}){super(),this._document=j}_createCanvas(j,H){const s=this._document.createElement("canvas");return s.width=j,s.height=H,s}}t.DOMCanvasFactory=C;async function y(N,j=!1){if(n(N,document.baseURI)){const H=await fetch(N);if(!H.ok)throw new Error(H.statusText);return j?new Uint8Array(await H.arrayBuffer()):(0,g.stringToBytes)(await H.text())}return new Promise((H,s)=>{const a=new XMLHttpRequest;a.open("GET",N,!0),j&&(a.responseType="arraybuffer"),a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){let v;if(j&&a.response?v=new Uint8Array(a.response):!j&&a.responseText&&(v=(0,g.stringToBytes)(a.responseText)),v){H(v);return}}s(new Error(a.statusText))}},a.send(null)})}class U extends e.BaseCMapReaderFactory{_fetchData(j,H){return y(j,this.isCompressed).then(s=>({cMapData:s,compressionType:H}))}}t.DOMCMapReaderFactory=U;class x extends e.BaseStandardFontDataFactory{_fetchData(j){return y(j,!0)}}t.DOMStandardFontDataFactory=x;class D extends e.BaseSVGFactory{_createSVG(j){return document.createElementNS(P,j)}}t.DOMSVGFactory=D;class m{constructor({viewBox:j,scale:H,rotation:s,offsetX:a=0,offsetY:v=0,dontFlip:T=!1}){this.viewBox=j,this.scale=H,this.rotation=s,this.offsetX=a,this.offsetY=v;const k=(j[2]+j[0])/2,X=(j[3]+j[1])/2;let nt,K,it,lt;switch(s%=360,s<0&&(s+=360),s){case 180:nt=-1,K=0,it=0,lt=1;break;case 90:nt=0,K=1,it=1,lt=0;break;case 270:nt=0,K=-1,it=-1,lt=0;break;case 0:nt=1,K=0,it=0,lt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}T&&(it=-it,lt=-lt);let et,rt,ut,ft;nt===0?(et=Math.abs(X-j[1])*H+a,rt=Math.abs(k-j[0])*H+v,ut=(j[3]-j[1])*H,ft=(j[2]-j[0])*H):(et=Math.abs(k-j[0])*H+a,rt=Math.abs(X-j[1])*H+v,ut=(j[2]-j[0])*H,ft=(j[3]-j[1])*H),this.transform=[nt*H,K*H,it*H,lt*H,et-nt*H*k-it*H*X,rt-K*H*k-lt*H*X],this.width=ut,this.height=ft}get rawDims(){const{viewBox:j}=this;return(0,g.shadow)(this,"rawDims",{pageWidth:j[2]-j[0],pageHeight:j[3]-j[1],pageX:j[0],pageY:j[1]})}clone({scale:j=this.scale,rotation:H=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:v=!1}={}){return new m({viewBox:this.viewBox.slice(),scale:j,rotation:H,offsetX:s,offsetY:a,dontFlip:v})}convertToViewportPoint(j,H){return g.Util.applyTransform([j,H],this.transform)}convertToViewportRectangle(j){const H=g.Util.applyTransform([j[0],j[1]],this.transform),s=g.Util.applyTransform([j[2],j[3]],this.transform);return[H[0],H[1],s[0],s[1]]}convertToPdfPoint(j,H){return g.Util.applyInverseTransform([j,H],this.transform)}}t.PageViewport=m;class u extends g.BaseException{constructor(j,H,s=0){super(j,"RenderingCancelledException"),this.type=H,this.extraDelay=s}}t.RenderingCancelledException=u;function i(N){const j=N.length;let H=0;for(;H<j&&N[H].trim()==="";)H++;return N.substring(H,H+5).toLowerCase()==="data:"}function _(N){return typeof N=="string"&&/\.pdf$/i.test(N)}function w(N,j=!1){return j||([N]=N.split(/[#?]/,1)),N.substring(N.lastIndexOf("/")+1)}function F(N,j="document.pdf"){if(typeof N!="string")return j;if(i(N))return(0,g.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),j;const H=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=H.exec(N);let v=s.exec(a[1])||s.exec(a[2])||s.exec(a[3]);if(v&&(v=v[0],v.includes("%")))try{v=s.exec(decodeURIComponent(v))[0]}catch{}return v||j}class b{constructor(){Ot(this,"started",Object.create(null));Ot(this,"times",[])}time(j){j in this.started&&(0,g.warn)(`Timer is already running for ${j}`),this.started[j]=Date.now()}timeEnd(j){j in this.started||(0,g.warn)(`Timer has not been started for ${j}`),this.times.push({name:j,start:this.started[j],end:Date.now()}),delete this.started[j]}toString(){const j=[];let H=0;for(const{name:s}of this.times)H=Math.max(s.length,H);for(const{name:s,start:a,end:v}of this.times)j.push(`${s.padEnd(H)} ${v-a}ms
`);return j.join("")}}t.StatTimer=b;function n(N,j){try{const{protocol:H}=j?new URL(N,j):new URL(N);return H==="http:"||H==="https:"}catch{return!1}}function l(N,j=!1){return new Promise((H,s)=>{const a=document.createElement("script");a.src=N,a.onload=function(v){j&&a.remove(),H(v)},a.onerror=function(){s(new Error(`Cannot load script at: ${a.src}`))},(document.head||document.documentElement).append(a)})}function h(N){console.log("Deprecated API usage: "+N)}let r;class p{static toDateObject(j){if(!j||typeof j!="string")return null;r||(r=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const H=r.exec(j);if(!H)return null;const s=parseInt(H[1],10);let a=parseInt(H[2],10);a=a>=1&&a<=12?a-1:0;let v=parseInt(H[3],10);v=v>=1&&v<=31?v:1;let T=parseInt(H[4],10);T=T>=0&&T<=23?T:0;let k=parseInt(H[5],10);k=k>=0&&k<=59?k:0;let X=parseInt(H[6],10);X=X>=0&&X<=59?X:0;const nt=H[7]||"Z";let K=parseInt(H[8],10);K=K>=0&&K<=23?K:0;let it=parseInt(H[9],10)||0;return it=it>=0&&it<=59?it:0,nt==="-"?(T+=K,k+=it):nt==="+"&&(T-=K,k-=it),new Date(Date.UTC(s,a,v,T,k,X))}}t.PDFDateString=p;function O(N,{scale:j=1,rotation:H=0}){const{width:s,height:a}=N.attributes.style,v=[0,0,parseInt(s),parseInt(a)];return new m({viewBox:v,scale:j,rotation:H})}function o(N){if(N.startsWith("#")){const j=parseInt(N.slice(1),16);return[(j&16711680)>>16,(j&65280)>>8,j&255]}return N.startsWith("rgb(")?N.slice(4,-1).split(",").map(j=>parseInt(j)):N.startsWith("rgba(")?N.slice(5,-1).split(",").map(j=>parseInt(j)).slice(0,3):((0,g.warn)(`Not a valid color format: "${N}"`),[0,0,0])}function W(N){const j=document.createElement("span");j.style.visibility="hidden",document.body.append(j);for(const H of N.keys()){j.style.color=H;const s=window.getComputedStyle(j).color;N.set(H,o(s))}j.remove()}function $(N){const{a:j,b:H,c:s,d:a,e:v,f:T}=N.getTransform();return[j,H,s,a,v,T]}function J(N){const{a:j,b:H,c:s,d:a,e:v,f:T}=N.getTransform().invertSelf();return[j,H,s,a,v,T]}function Q(N,j,H=!1,s=!0){if(j instanceof m){const{pageWidth:a,pageHeight:v}=j.rawDims,{style:T}=N,k=`calc(var(--scale-factor) * ${a}px)`,X=`calc(var(--scale-factor) * ${v}px)`;!H||j.rotation%180===0?(T.width=k,T.height=X):(T.width=X,T.height=k)}s&&N.setAttribute("data-main-rotation",j.rotation)}},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var e=c(1);class g{constructor(){this.constructor===g&&(0,e.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(y){return"none"}addHCMFilter(y,U){return"none"}destroy(y=!1){}}t.BaseFilterFactory=g;class P{constructor(){this.constructor===P&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(y,U){if(y<=0||U<=0)throw new Error("Invalid canvas size");const x=this._createCanvas(y,U);return{canvas:x,context:x.getContext("2d")}}reset(y,U,x){if(!y.canvas)throw new Error("Canvas is not specified");if(U<=0||x<=0)throw new Error("Invalid canvas size");y.canvas.width=U,y.canvas.height=x}destroy(y){if(!y.canvas)throw new Error("Canvas is not specified");y.canvas.width=0,y.canvas.height=0,y.canvas=null,y.context=null}_createCanvas(y,U){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=P;class M{constructor({baseUrl:y=null,isCompressed:U=!0}){this.constructor===M&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=y,this.isCompressed=U}async fetch({name:y}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!y)throw new Error("CMap name must be specified.");const U=this.baseUrl+y+(this.isCompressed?".bcmap":""),x=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(U,x).catch(D=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${U}`)})}_fetchData(y,U){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=M;class G{constructor({baseUrl:y=null}){this.constructor===G&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=y}async fetch({filename:y}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!y)throw new Error("Font filename must be specified.");const U=`${this.baseUrl}${y}`;return this._fetchData(U).catch(x=>{throw new Error(`Unable to load font data at: ${U}`)})}_fetchData(y){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=G;class S{constructor(){this.constructor===S&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(y,U,x=!1){if(y<=0||U<=0)throw new Error("Invalid SVG dimensions");const D=this._createSVG("svg:svg");return D.setAttribute("version","1.1"),x||(D.setAttribute("width",`${y}px`),D.setAttribute("height",`${U}px`)),D.setAttribute("preserveAspectRatio","none"),D.setAttribute("viewBox",`0 0 ${y} ${U}`),D}createElement(y){if(typeof y!="string")throw new Error("Invalid SVG element type");return this._createSVG(y)}_createSVG(y){(0,e.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=S},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var e=c(1);const g=3285377520,P=4294901760,M=65535;class G{constructor(C){this.h1=C?C&4294967295:g,this.h2=C?C&4294967295:g}update(C){let y,U;if(typeof C=="string"){y=new Uint8Array(C.length*2),U=0;for(let h=0,r=C.length;h<r;h++){const p=C.charCodeAt(h);p<=255?y[U++]=p:(y[U++]=p>>>8,y[U++]=p&255)}}else if((0,e.isArrayBuffer)(C))y=C.slice(),U=y.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const x=U>>2,D=U-x*4,m=new Uint32Array(y.buffer,0,x);let u=0,i=0,_=this.h1,w=this.h2;const F=3432918353,b=461845907,n=F&M,l=b&M;for(let h=0;h<x;h++)h&1?(u=m[h],u=u*F&P|u*n&M,u=u<<15|u>>>17,u=u*b&P|u*l&M,_^=u,_=_<<13|_>>>19,_=_*5+3864292196):(i=m[h],i=i*F&P|i*n&M,i=i<<15|i>>>17,i=i*b&P|i*l&M,w^=i,w=w<<13|w>>>19,w=w*5+3864292196);switch(u=0,D){case 3:u^=y[x*4+2]<<16;case 2:u^=y[x*4+1]<<8;case 1:u^=y[x*4],u=u*F&P|u*n&M,u=u<<15|u>>>17,u=u*b&P|u*l&M,x&1?_^=u:w^=u}this.h1=_,this.h2=w}hexdigest(){let C=this.h1,y=this.h2;return C^=y>>>1,C=C*3981806797&P|C*36045&M,y=y*4283543511&P|((y<<16|C>>>16)*2950163797&P)>>>16,C^=y>>>1,C=C*444984403&P|C*60499&M,y=y*3301882366&P|((y<<16|C>>>16)*3120437893&P)>>>16,C^=y>>>1,(C>>>0).toString(16).padStart(8,"0")+(y>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=G},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var e=c(1),g=c(10);class P{constructor({ownerDocument:S=globalThis.document,styleElement:C=null}){this._document=S,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(S){this.nativeFontFaces.push(S),this._document.fonts.add(S)}insertRule(S){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const C=this.styleElement.sheet;C.insertRule(S,C.cssRules.length)}clear(){for(const S of this.nativeFontFaces)this._document.fonts.delete(S);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(S){if(S.attached||S.missingFile)return;if(S.attached=!0,this.isFontLoadingAPISupported){const y=S.createNativeFontFace();if(y){this.addNativeFontFace(y);try{await y.loaded}catch(U){throw(0,e.warn)(`Failed to load font '${y.family}': '${U}'.`),S.disableFontFace=!0,U}}return}const C=S.createFontFaceRule();if(C){if(this.insertRule(C),this.isSyncFontLoadingSupported)return;await new Promise(y=>{const U=this._queueLoadingCallback(y);this._prepareFontLoadEvent(S,U)})}}get isFontLoadingAPISupported(){var C;const S=!!((C=this._document)!=null&&C.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",S)}get isSyncFontLoadingSupported(){let S=!1;return(g.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(S=!0),(0,e.shadow)(this,"isSyncFontLoadingSupported",S)}_queueLoadingCallback(S){function C(){for((0,e.assert)(!U.done,"completeRequest() cannot be called twice."),U.done=!0;y.length>0&&y[0].done;){const x=y.shift();setTimeout(x.callback,0)}}const{loadingRequests:y}=this,U={done:!1,complete:C,callback:S};return y.push(U),U}get _loadTestFont(){const S=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,e.shadow)(this,"_loadTestFont",S)}_prepareFontLoadEvent(S,C){function y(o,W){return o.charCodeAt(W)<<24|o.charCodeAt(W+1)<<16|o.charCodeAt(W+2)<<8|o.charCodeAt(W+3)&255}function U(o,W,$,J){const Q=o.substring(0,W),tt=o.substring(W+$);return Q+J+tt}let x,D;const m=this._document.createElement("canvas");m.width=1,m.height=1;const u=m.getContext("2d");let i=0;function _(o,W){if(++i>30){(0,e.warn)("Load test font never loaded."),W();return}if(u.font="30px "+o,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){W();return}setTimeout(_.bind(null,o,W))}const w=`lt${Date.now()}${this.loadTestFontId++}`;let F=this._loadTestFont;F=U(F,976,w.length,w);const n=16,l=1482184792;let h=y(F,n);for(x=0,D=w.length-3;x<D;x+=4)h=h-l+y(w,x)|0;x<w.length&&(h=h-l+y(w+"XXX",x)|0),F=U(F,n,4,(0,e.string32)(h));const r=`url(data:font/opentype;base64,${btoa(F)});`,p=`@font-face {font-family:"${w}";src:${r}}`;this.insertRule(p);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const o of[S.loadedName,w]){const W=this._document.createElement("span");W.textContent="Hi",W.style.fontFamily=o,O.append(W)}this._document.body.append(O),_(w,()=>{O.remove(),C.complete()})}}t.FontLoader=P;class M{constructor(S,{isEvalSupported:C=!0,disableFontFace:y=!1,ignoreErrors:U=!1,inspectFont:x=null}){this.compiledGlyphs=Object.create(null);for(const D in S)this[D]=S[D];this.isEvalSupported=C!==!1,this.disableFontFace=y===!0,this.ignoreErrors=U===!0,this._inspectFont=x}createNativeFontFace(){var C;if(!this.data||this.disableFontFace)return null;let S;if(!this.cssFontInfo)S=new FontFace(this.loadedName,this.data,{});else{const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style=`oblique ${this.cssFontInfo.italicAngle}deg`),S=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}return(C=this._inspectFont)==null||C.call(this,this),S}createFontFaceRule(){var U;if(!this.data||this.disableFontFace)return null;const S=(0,e.bytesToString)(this.data),C=`url(data:${this.mimetype};base64,${btoa(S)});`;let y;if(!this.cssFontInfo)y=`@font-face {font-family:"${this.loadedName}";src:${C}}`;else{let x=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(x+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),y=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${x}src:${C}}`}return(U=this._inspectFont)==null||U.call(this,this,C),y}getPathGenerator(S,C){if(this.compiledGlyphs[C]!==void 0)return this.compiledGlyphs[C];let y;try{y=S.get(this.loadedName+"_path_"+C)}catch(U){if(!this.ignoreErrors)throw U;return(0,e.warn)(`getPathGenerator - ignoring character: "${U}".`),this.compiledGlyphs[C]=function(x,D){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const U=[];for(const x of y){const D=x.args!==void 0?x.args.join(","):"";U.push("c.",x.cmd,"(",D,`);
`)}return this.compiledGlyphs[C]=new Function("c","size",U.join(""))}return this.compiledGlyphs[C]=function(U,x){for(const D of y)D.cmd==="scale"&&(D.args=[x,-x]),U[D.cmd].apply(U,D.args)}}}t.FontFaceObject=M},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const c=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=c},(L,t,c)=>{var ht,_e,vt,be;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var e=c(1),g=c(6),P=c(12),M=c(13),G=c(10);const S=16,C=100,y=4096,U=15,x=10,D=1e3,m=16;function u(z,d){if(z._removeMirroring)throw new Error("Context is already forwarding operations.");z.__originalSave=z.save,z.__originalRestore=z.restore,z.__originalRotate=z.rotate,z.__originalScale=z.scale,z.__originalTranslate=z.translate,z.__originalTransform=z.transform,z.__originalSetTransform=z.setTransform,z.__originalResetTransform=z.resetTransform,z.__originalClip=z.clip,z.__originalMoveTo=z.moveTo,z.__originalLineTo=z.lineTo,z.__originalBezierCurveTo=z.bezierCurveTo,z.__originalRect=z.rect,z.__originalClosePath=z.closePath,z.__originalBeginPath=z.beginPath,z._removeMirroring=()=>{z.save=z.__originalSave,z.restore=z.__originalRestore,z.rotate=z.__originalRotate,z.scale=z.__originalScale,z.translate=z.__originalTranslate,z.transform=z.__originalTransform,z.setTransform=z.__originalSetTransform,z.resetTransform=z.__originalResetTransform,z.clip=z.__originalClip,z.moveTo=z.__originalMoveTo,z.lineTo=z.__originalLineTo,z.bezierCurveTo=z.__originalBezierCurveTo,z.rect=z.__originalRect,z.closePath=z.__originalClosePath,z.beginPath=z.__originalBeginPath,delete z._removeMirroring},z.save=function(){d.save(),this.__originalSave()},z.restore=function(){d.restore(),this.__originalRestore()},z.translate=function(E,q){d.translate(E,q),this.__originalTranslate(E,q)},z.scale=function(E,q){d.scale(E,q),this.__originalScale(E,q)},z.transform=function(E,q,I,V,N,j){d.transform(E,q,I,V,N,j),this.__originalTransform(E,q,I,V,N,j)},z.setTransform=function(E,q,I,V,N,j){d.setTransform(E,q,I,V,N,j),this.__originalSetTransform(E,q,I,V,N,j)},z.resetTransform=function(){d.resetTransform(),this.__originalResetTransform()},z.rotate=function(E){d.rotate(E),this.__originalRotate(E)},z.clip=function(E){d.clip(E),this.__originalClip(E)},z.moveTo=function(f,E){d.moveTo(f,E),this.__originalMoveTo(f,E)},z.lineTo=function(f,E){d.lineTo(f,E),this.__originalLineTo(f,E)},z.bezierCurveTo=function(f,E,q,I,V,N){d.bezierCurveTo(f,E,q,I,V,N),this.__originalBezierCurveTo(f,E,q,I,V,N)},z.rect=function(f,E,q,I){d.rect(f,E,q,I),this.__originalRect(f,E,q,I)},z.closePath=function(){d.closePath(),this.__originalClosePath()},z.beginPath=function(){d.beginPath(),this.__originalBeginPath()}}class i{constructor(d){this.canvasFactory=d,this.cache=Object.create(null)}getCanvas(d,f,E){let q;return this.cache[d]!==void 0?(q=this.cache[d],this.canvasFactory.reset(q,f,E)):(q=this.canvasFactory.create(f,E),this.cache[d]=q),q}delete(d){delete this.cache[d]}clear(){for(const d in this.cache){const f=this.cache[d];this.canvasFactory.destroy(f),delete this.cache[d]}}}function _(z,d,f,E,q,I,V,N,j,H){const[s,a,v,T,k,X]=(0,g.getCurrentTransform)(z);if(a===0&&v===0){const it=V*s+k,lt=Math.round(it),et=N*T+X,rt=Math.round(et),ut=(V+j)*s+k,ft=Math.abs(Math.round(ut)-lt)||1,wt=(N+H)*T+X,yt=Math.abs(Math.round(wt)-rt)||1;return z.setTransform(Math.sign(s),0,0,Math.sign(T),lt,rt),z.drawImage(d,f,E,q,I,0,0,ft,yt),z.setTransform(s,a,v,T,k,X),[ft,yt]}if(s===0&&T===0){const it=N*v+k,lt=Math.round(it),et=V*a+X,rt=Math.round(et),ut=(N+H)*v+k,ft=Math.abs(Math.round(ut)-lt)||1,wt=(V+j)*a+X,yt=Math.abs(Math.round(wt)-rt)||1;return z.setTransform(0,Math.sign(a),Math.sign(v),0,lt,rt),z.drawImage(d,f,E,q,I,0,0,yt,ft),z.setTransform(s,a,v,T,k,X),[yt,ft]}z.drawImage(d,f,E,q,I,V,N,j,H);const nt=Math.hypot(s,a),K=Math.hypot(v,T);return[nt*j,K*H]}function w(z){const{width:d,height:f}=z;if(d>D||f>D)return null;const E=1e3,q=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),I=d+1;let V=new Uint8Array(I*(f+1)),N,j,H;const s=d+7&-8;let a=new Uint8Array(s*f),v=0;for(const K of z.data){let it=128;for(;it>0;)a[v++]=K&it?0:255,it>>=1}let T=0;for(v=0,a[v]!==0&&(V[0]=1,++T),j=1;j<d;j++)a[v]!==a[v+1]&&(V[j]=a[v]?2:1,++T),v++;for(a[v]!==0&&(V[j]=2,++T),N=1;N<f;N++){v=N*s,H=N*I,a[v-s]!==a[v]&&(V[H]=a[v]?1:8,++T);let K=(a[v]?4:0)+(a[v-s]?8:0);for(j=1;j<d;j++)K=(K>>2)+(a[v+1]?4:0)+(a[v-s+1]?8:0),q[K]&&(V[H+j]=q[K],++T),v++;if(a[v-s]!==a[v]&&(V[H+j]=a[v]?2:4,++T),T>E)return null}for(v=s*(f-1),H=N*I,a[v]!==0&&(V[H]=8,++T),j=1;j<d;j++)a[v]!==a[v+1]&&(V[H+j]=a[v]?4:8,++T),v++;if(a[v]!==0&&(V[H+j]=4,++T),T>E)return null;const k=new Int32Array([0,I,-1,0,-I,0,0,0,1]),X=new Path2D;for(N=0;T&&N<=f;N++){let K=N*I;const it=K+d;for(;K<it&&!V[K];)K++;if(K===it)continue;X.moveTo(K%I,N);const lt=K;let et=V[K];do{const rt=k[et];do K+=rt;while(!V[K]);const ut=V[K];ut!==5&&ut!==10?(et=ut,V[K]=0):(et=ut&51*et>>4,V[K]&=et>>2|et<<2),X.lineTo(K%I,K/I|0),V[K]||--T}while(lt!==K);--N}return a=null,V=null,function(K){K.save(),K.scale(1/d,-1/f),K.translate(0,-f),K.fill(X),K.beginPath(),K.restore()}}class F{constructor(d,f){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,d,f])}clone(){const d=Object.create(this);return d.clipBox=this.clipBox.slice(),d}setCurrentPoint(d,f){this.x=d,this.y=f}updatePathMinMax(d,f,E){[f,E]=e.Util.applyTransform([f,E],d),this.minX=Math.min(this.minX,f),this.minY=Math.min(this.minY,E),this.maxX=Math.max(this.maxX,f),this.maxY=Math.max(this.maxY,E)}updateRectMinMax(d,f){const E=e.Util.applyTransform(f,d),q=e.Util.applyTransform(f.slice(2),d);this.minX=Math.min(this.minX,E[0],q[0]),this.minY=Math.min(this.minY,E[1],q[1]),this.maxX=Math.max(this.maxX,E[0],q[0]),this.maxY=Math.max(this.maxY,E[1],q[1])}updateScalingPathMinMax(d,f){e.Util.scaleMinMax(d,f),this.minX=Math.min(this.minX,f[0]),this.maxX=Math.max(this.maxX,f[1]),this.minY=Math.min(this.minY,f[2]),this.maxY=Math.max(this.maxY,f[3])}updateCurvePathMinMax(d,f,E,q,I,V,N,j,H,s){const a=e.Util.bezierBoundingBox(f,E,q,I,V,N,j,H);if(s){s[0]=Math.min(s[0],a[0],a[2]),s[1]=Math.max(s[1],a[0],a[2]),s[2]=Math.min(s[2],a[1],a[3]),s[3]=Math.max(s[3],a[1],a[3]);return}this.updateRectMinMax(d,a)}getPathBoundingBox(d=P.PathType.FILL,f=null){const E=[this.minX,this.minY,this.maxX,this.maxY];if(d===P.PathType.STROKE){f||(0,e.unreachable)("Stroke bounding box must include transform.");const q=e.Util.singularValueDecompose2dScale(f),I=q[0]*this.lineWidth/2,V=q[1]*this.lineWidth/2;E[0]-=I,E[1]-=V,E[2]+=I,E[3]+=V}return E}updateClipFromPath(){const d=e.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(d||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(d){this.clipBox=d,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(d=P.PathType.FILL,f=null){return e.Util.intersect(this.clipBox,this.getPathBoundingBox(d,f))}}function b(z,d){if(typeof ImageData<"u"&&d instanceof ImageData){z.putImageData(d,0,0);return}const f=d.height,E=d.width,q=f%m,I=(f-q)/m,V=q===0?I:I+1,N=z.createImageData(E,m);let j=0,H;const s=d.data,a=N.data;let v,T,k,X;if(d.kind===e.ImageKind.GRAYSCALE_1BPP){const nt=s.byteLength,K=new Uint32Array(a.buffer,0,a.byteLength>>2),it=K.length,lt=E+7>>3,et=4294967295,rt=e.FeatureTest.isLittleEndian?4278190080:255;for(v=0;v<V;v++){for(k=v<I?m:q,H=0,T=0;T<k;T++){const ut=nt-j;let ft=0;const wt=ut>lt?E:ut*8-7,yt=wt&-8;let Ct=0,Y=0;for(;ft<yt;ft+=8)Y=s[j++],K[H++]=Y&128?et:rt,K[H++]=Y&64?et:rt,K[H++]=Y&32?et:rt,K[H++]=Y&16?et:rt,K[H++]=Y&8?et:rt,K[H++]=Y&4?et:rt,K[H++]=Y&2?et:rt,K[H++]=Y&1?et:rt;for(;ft<wt;ft++)Ct===0&&(Y=s[j++],Ct=128),K[H++]=Y&Ct?et:rt,Ct>>=1}for(;H<it;)K[H++]=0;z.putImageData(N,0,v*m)}}else if(d.kind===e.ImageKind.RGBA_32BPP){for(T=0,X=E*m*4,v=0;v<I;v++)a.set(s.subarray(j,j+X)),j+=X,z.putImageData(N,0,T),T+=m;v<V&&(X=E*q*4,a.set(s.subarray(j,j+X)),z.putImageData(N,0,T))}else if(d.kind===e.ImageKind.RGB_24BPP)for(k=m,X=E*k,v=0;v<V;v++){for(v>=I&&(k=q,X=E*k),H=0,T=X;T--;)a[H++]=s[j++],a[H++]=s[j++],a[H++]=s[j++],a[H++]=255;z.putImageData(N,0,v*m)}else throw new Error(`bad image kind: ${d.kind}`)}function n(z,d){if(d.bitmap){z.drawImage(d.bitmap,0,0);return}const f=d.height,E=d.width,q=f%m,I=(f-q)/m,V=q===0?I:I+1,N=z.createImageData(E,m);let j=0;const H=d.data,s=N.data;for(let a=0;a<V;a++){const v=a<I?m:q;({srcPos:j}=(0,M.convertBlackAndWhiteToRGBA)({src:H,srcPos:j,dest:s,width:E,height:v,nonBlackColor:0})),z.putImageData(N,0,a*m)}}function l(z,d){const f=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const E of f)z[E]!==void 0&&(d[E]=z[E]);z.setLineDash!==void 0&&(d.setLineDash(z.getLineDash()),d.lineDashOffset=z.lineDashOffset)}function h(z){z.strokeStyle=z.fillStyle="#000000",z.fillRule="nonzero",z.globalAlpha=1,z.lineWidth=1,z.lineCap="butt",z.lineJoin="miter",z.miterLimit=10,z.globalCompositeOperation="source-over",z.font="10px sans-serif",z.setLineDash!==void 0&&(z.setLineDash([]),z.lineDashOffset=0),G.isNodeJS||(z.filter="none")}function r(z,d,f,E){const q=z.length;for(let I=3;I<q;I+=4){const V=z[I];if(V===0)z[I-3]=d,z[I-2]=f,z[I-1]=E;else if(V<255){const N=255-V;z[I-3]=z[I-3]*V+d*N>>8,z[I-2]=z[I-2]*V+f*N>>8,z[I-1]=z[I-1]*V+E*N>>8}}}function p(z,d,f){const E=z.length,q=1/255;for(let I=3;I<E;I+=4){const V=f?f[z[I]]:z[I];d[I]=d[I]*V*q|0}}function O(z,d,f){const E=z.length;for(let q=3;q<E;q+=4){const I=z[q-3]*77+z[q-2]*152+z[q-1]*28;d[q]=f?d[q]*f[I>>8]>>8:d[q]*I>>16}}function o(z,d,f,E,q,I,V,N,j,H,s){const a=!!I,v=a?I[0]:0,T=a?I[1]:0,k=a?I[2]:0;let X;q==="Luminosity"?X=O:X=p;const K=Math.min(E,Math.ceil(1048576/f));for(let it=0;it<E;it+=K){const lt=Math.min(K,E-it),et=z.getImageData(N-H,it+(j-s),f,lt),rt=d.getImageData(N,it+j,f,lt);a&&r(et.data,v,T,k),X(et.data,rt.data,V),d.putImageData(rt,N,it+j)}}function W(z,d,f,E){const q=E[0],I=E[1],V=E[2]-q,N=E[3]-I;V===0||N===0||(o(d.context,f,V,N,d.subtype,d.backdrop,d.transferMap,q,I,d.offsetX,d.offsetY),z.save(),z.globalAlpha=1,z.globalCompositeOperation="source-over",z.setTransform(1,0,0,1,0,0),z.drawImage(f.canvas,0,0),z.restore())}function $(z,d){const f=e.Util.singularValueDecompose2dScale(z);f[0]=Math.fround(f[0]),f[1]=Math.fround(f[1]);const E=Math.fround((globalThis.devicePixelRatio||1)*g.PixelsPerInch.PDF_TO_CSS_UNITS);return d!==void 0?d:f[0]<=E||f[1]<=E}const J=["butt","round","square"],Q=["miter","round","bevel"],tt={},dt={},gt=class{constructor(d,f,E,q,I,{optionalContentConfig:V,markedContentStack:N=null},j,H){Z(this,ht);Z(this,vt);this.ctx=d,this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=f,this.objs=E,this.canvasFactory=q,this.filterFactory=I,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=N||[],this.optionalContentConfig=V,this.cachedCanvases=new i(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=j,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=H,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(d,f=null){return typeof d=="string"?d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d):f}beginDrawing({transform:d,viewport:f,transparency:E=!1,background:q=null}){const I=this.ctx.canvas.width,V=this.ctx.canvas.height,N=this.ctx.fillStyle;if(this.ctx.fillStyle=q||"#ffffff",this.ctx.fillRect(0,0,I,V),this.ctx.fillStyle=N,E){const j=this.cachedCanvases.getCanvas("transparent",I,V);this.compositeCtx=this.ctx,this.transparentCanvas=j.canvas,this.ctx=j.context,this.ctx.save(),this.ctx.transform(...(0,g.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),h(this.ctx),d&&(this.ctx.transform(...d),this.outputScaleX=d[0],this.outputScaleY=d[0]),this.ctx.transform(...f.transform),this.viewportScale=f.scale,this.baseTransform=(0,g.getCurrentTransform)(this.ctx)}executeOperatorList(d,f,E,q){const I=d.argsArray,V=d.fnArray;let N=f||0;const j=I.length;if(j===N)return N;const H=j-N>x&&typeof E=="function",s=H?Date.now()+U:0;let a=0;const v=this.commonObjs,T=this.objs;let k;for(;;){if(q!==void 0&&N===q.nextBreakPoint)return q.breakIt(N,E),N;if(k=V[N],k!==e.OPS.dependency)this[k].apply(this,I[N]);else for(const X of I[N]){const nt=X.startsWith("g_")?v:T;if(!nt.has(X))return nt.get(X,E),N}if(N++,N===j)return N;if(H&&++a>x){if(Date.now()>s)return E(),N;a=0}}}endDrawing(){st(this,ht,_e).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const d of this._cachedBitmapsMap.values()){for(const f of d.values())typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement&&(f.width=f.height=0);d.clear()}this._cachedBitmapsMap.clear(),st(this,vt,be).call(this)}_scaleImage(d,f){const E=d.width,q=d.height;let I=Math.max(Math.hypot(f[0],f[1]),1),V=Math.max(Math.hypot(f[2],f[3]),1),N=E,j=q,H="prescale1",s,a;for(;I>2&&N>1||V>2&&j>1;){let v=N,T=j;I>2&&N>1&&(v=N>=16384?Math.floor(N/2)-1||1:Math.ceil(N/2),I/=N/v),V>2&&j>1&&(T=j>=16384?Math.floor(j/2)-1||1:Math.ceil(j)/2,V/=j/T),s=this.cachedCanvases.getCanvas(H,v,T),a=s.context,a.clearRect(0,0,v,T),a.drawImage(d,0,0,N,j,0,0,v,T),d=s.canvas,N=v,j=T,H=H==="prescale1"?"prescale2":"prescale1"}return{img:d,paintWidth:N,paintHeight:j}}_createMaskCanvas(d){const f=this.ctx,{width:E,height:q}=d,I=this.current.fillColor,V=this.current.patternFill,N=(0,g.getCurrentTransform)(f);let j,H,s,a;if((d.bitmap||d.data)&&d.count>1){const ft=d.bitmap||d.data.buffer;H=JSON.stringify(V?N:[N.slice(0,4),I]),j=this._cachedBitmapsMap.get(ft),j||(j=new Map,this._cachedBitmapsMap.set(ft,j));const wt=j.get(H);if(wt&&!V){const yt=Math.round(Math.min(N[0],N[2])+N[4]),Ct=Math.round(Math.min(N[1],N[3])+N[5]);return{canvas:wt,offsetX:yt,offsetY:Ct}}s=wt}s||(a=this.cachedCanvases.getCanvas("maskCanvas",E,q),n(a.context,d));let v=e.Util.transform(N,[1/E,0,0,-1/q,0,0]);v=e.Util.transform(v,[1,0,0,1,0,-q]);const T=e.Util.applyTransform([0,0],v),k=e.Util.applyTransform([E,q],v),X=e.Util.normalizeRect([T[0],T[1],k[0],k[1]]),nt=Math.round(X[2]-X[0])||1,K=Math.round(X[3]-X[1])||1,it=this.cachedCanvases.getCanvas("fillCanvas",nt,K),lt=it.context,et=Math.min(T[0],k[0]),rt=Math.min(T[1],k[1]);lt.translate(-et,-rt),lt.transform(...v),s||(s=this._scaleImage(a.canvas,(0,g.getCurrentTransformInverse)(lt)),s=s.img,j&&V&&j.set(H,s)),lt.imageSmoothingEnabled=$((0,g.getCurrentTransform)(lt),d.interpolate),_(lt,s,0,0,s.width,s.height,0,0,E,q),lt.globalCompositeOperation="source-in";const ut=e.Util.transform((0,g.getCurrentTransformInverse)(lt),[1,0,0,1,-et,-rt]);return lt.fillStyle=V?I.getPattern(f,this,ut,P.PathType.FILL):I,lt.fillRect(0,0,E,q),j&&!V&&(this.cachedCanvases.delete("fillCanvas"),j.set(H,it.canvas)),{canvas:it.canvas,offsetX:Math.round(et),offsetY:Math.round(rt)}}setLineWidth(d){d!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=d,this.ctx.lineWidth=d}setLineCap(d){this.ctx.lineCap=J[d]}setLineJoin(d){this.ctx.lineJoin=Q[d]}setMiterLimit(d){this.ctx.miterLimit=d}setDash(d,f){const E=this.ctx;E.setLineDash!==void 0&&(E.setLineDash(d),E.lineDashOffset=f)}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(const[f,E]of d)switch(f){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E[0],E[1]);break;case"CA":this.current.strokeAlpha=E;break;case"ca":this.current.fillAlpha=E,this.ctx.globalAlpha=E;break;case"BM":this.ctx.globalCompositeOperation=E;break;case"SMask":this.current.activeSMask=E?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(E);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const d=this.inSMaskMode;this.current.activeSMask&&!d?this.beginSMaskMode():!this.current.activeSMask&&d&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const d=this.ctx.canvas.width,f=this.ctx.canvas.height,E="smaskGroupAt"+this.groupLevel,q=this.cachedCanvases.getCanvas(E,d,f);this.suspendedCtx=this.ctx,this.ctx=q.context;const I=this.ctx;I.setTransform(...(0,g.getCurrentTransform)(this.suspendedCtx)),l(this.suspendedCtx,I),u(I,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),l(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(d){if(!this.current.activeSMask)return;d?(d[0]=Math.floor(d[0]),d[1]=Math.floor(d[1]),d[2]=Math.ceil(d[2]),d[3]=Math.ceil(d[3])):d=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const f=this.current.activeSMask,E=this.suspendedCtx;W(E,f,this.ctx,d),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(l(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const d=this.current;this.stateStack.push(d),this.current=d.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),l(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(d,f,E,q,I,V){this.ctx.transform(d,f,E,q,I,V),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(d,f,E){const q=this.ctx,I=this.current;let V=I.x,N=I.y,j,H;const s=(0,g.getCurrentTransform)(q),a=s[0]===0&&s[3]===0||s[1]===0&&s[2]===0,v=a?E.slice(0):null;for(let T=0,k=0,X=d.length;T<X;T++)switch(d[T]|0){case e.OPS.rectangle:V=f[k++],N=f[k++];const nt=f[k++],K=f[k++],it=V+nt,lt=N+K;q.moveTo(V,N),nt===0||K===0?q.lineTo(it,lt):(q.lineTo(it,N),q.lineTo(it,lt),q.lineTo(V,lt)),a||I.updateRectMinMax(s,[V,N,it,lt]),q.closePath();break;case e.OPS.moveTo:V=f[k++],N=f[k++],q.moveTo(V,N),a||I.updatePathMinMax(s,V,N);break;case e.OPS.lineTo:V=f[k++],N=f[k++],q.lineTo(V,N),a||I.updatePathMinMax(s,V,N);break;case e.OPS.curveTo:j=V,H=N,V=f[k+4],N=f[k+5],q.bezierCurveTo(f[k],f[k+1],f[k+2],f[k+3],V,N),I.updateCurvePathMinMax(s,j,H,f[k],f[k+1],f[k+2],f[k+3],V,N,v),k+=6;break;case e.OPS.curveTo2:j=V,H=N,q.bezierCurveTo(V,N,f[k],f[k+1],f[k+2],f[k+3]),I.updateCurvePathMinMax(s,j,H,V,N,f[k],f[k+1],f[k+2],f[k+3],v),V=f[k+2],N=f[k+3],k+=4;break;case e.OPS.curveTo3:j=V,H=N,V=f[k+2],N=f[k+3],q.bezierCurveTo(f[k],f[k+1],V,N,V,N),I.updateCurvePathMinMax(s,j,H,f[k],f[k+1],V,N,V,N,v),k+=4;break;case e.OPS.closePath:q.closePath();break}a&&I.updateScalingPathMinMax(s,v),I.setCurrentPoint(V,N)}closePath(){this.ctx.closePath()}stroke(d=!0){const f=this.ctx,E=this.current.strokeColor;f.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof E=="object"&&(E!=null&&E.getPattern)?(f.save(),f.strokeStyle=E.getPattern(f,this,(0,g.getCurrentTransformInverse)(f),P.PathType.STROKE),this.rescaleAndStroke(!1),f.restore()):this.rescaleAndStroke(!0)),d&&this.consumePath(this.current.getClippedPathBoundingBox()),f.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(d=!0){const f=this.ctx,E=this.current.fillColor,q=this.current.patternFill;let I=!1;q&&(f.save(),f.fillStyle=E.getPattern(f,this,(0,g.getCurrentTransformInverse)(f),P.PathType.FILL),I=!0);const V=this.current.getClippedPathBoundingBox();this.contentVisible&&V!==null&&(this.pendingEOFill?(f.fill("evenodd"),this.pendingEOFill=!1):f.fill()),I&&f.restore(),d&&this.consumePath(V)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=tt}eoClip(){this.pendingClip=dt}beginText(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const d=this.pendingTextPaths,f=this.ctx;if(d===void 0){f.beginPath();return}f.save(),f.beginPath();for(const E of d)f.setTransform(...E.transform),f.translate(E.x,E.y),E.addToPath(f,E.fontSize);f.restore(),f.clip(),f.beginPath(),delete this.pendingTextPaths}setCharSpacing(d){this.current.charSpacing=d}setWordSpacing(d){this.current.wordSpacing=d}setHScale(d){this.current.textHScale=d/100}setLeading(d){this.current.leading=-d}setFont(d,f){const E=this.commonObjs.get(d),q=this.current;if(!E)throw new Error(`Can't find font for ${d}`);if(q.fontMatrix=E.fontMatrix||e.FONT_IDENTITY_MATRIX,(q.fontMatrix[0]===0||q.fontMatrix[3]===0)&&(0,e.warn)("Invalid font matrix for font "+d),f<0?(f=-f,q.fontDirection=-1):q.fontDirection=1,this.current.font=E,this.current.fontSize=f,E.isType3Font)return;const I=E.loadedName||"sans-serif";let V="normal";E.black?V="900":E.bold&&(V="bold");const N=E.italic?"italic":"normal",j=`"${I}", ${E.fallbackName}`;let H=f;f<S?H=S:f>C&&(H=C),this.current.fontSizeScale=f/H,this.ctx.font=`${N} ${V} ${H}px ${j}`}setTextRenderingMode(d){this.current.textRenderingMode=d}setTextRise(d){this.current.textRise=d}moveText(d,f){this.current.x=this.current.lineX+=d,this.current.y=this.current.lineY+=f}setLeadingMoveText(d,f){this.setLeading(-f),this.moveText(d,f)}setTextMatrix(d,f,E,q,I,V){this.current.textMatrix=[d,f,E,q,I,V],this.current.textMatrixScale=Math.hypot(d,f),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(d,f,E,q){const I=this.ctx,V=this.current,N=V.font,j=V.textRenderingMode,H=V.fontSize/V.fontSizeScale,s=j&e.TextRenderingMode.FILL_STROKE_MASK,a=!!(j&e.TextRenderingMode.ADD_TO_PATH_FLAG),v=V.patternFill&&!N.missingFile;let T;(N.disableFontFace||a||v)&&(T=N.getPathGenerator(this.commonObjs,d)),N.disableFontFace||v?(I.save(),I.translate(f,E),I.beginPath(),T(I,H),q&&I.setTransform(...q),(s===e.TextRenderingMode.FILL||s===e.TextRenderingMode.FILL_STROKE)&&I.fill(),(s===e.TextRenderingMode.STROKE||s===e.TextRenderingMode.FILL_STROKE)&&I.stroke(),I.restore()):((s===e.TextRenderingMode.FILL||s===e.TextRenderingMode.FILL_STROKE)&&I.fillText(d,f,E),(s===e.TextRenderingMode.STROKE||s===e.TextRenderingMode.FILL_STROKE)&&I.strokeText(d,f,E)),a&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,g.getCurrentTransform)(I),x:f,y:E,fontSize:H,addToPath:T})}get isFontSubpixelAAEnabled(){const{context:d}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);d.scale(1.5,1),d.fillText("I",0,10);const f=d.getImageData(0,0,10,10).data;let E=!1;for(let q=3;q<f.length;q+=4)if(f[q]>0&&f[q]<255){E=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",E)}showText(d){const f=this.current,E=f.font;if(E.isType3Font)return this.showType3Text(d);const q=f.fontSize;if(q===0)return;const I=this.ctx,V=f.fontSizeScale,N=f.charSpacing,j=f.wordSpacing,H=f.fontDirection,s=f.textHScale*H,a=d.length,v=E.vertical,T=v?1:-1,k=E.defaultVMetrics,X=q*f.fontMatrix[0],nt=f.textRenderingMode===e.TextRenderingMode.FILL&&!E.disableFontFace&&!f.patternFill;I.save(),I.transform(...f.textMatrix),I.translate(f.x,f.y+f.textRise),H>0?I.scale(s,-1):I.scale(s,1);let K;if(f.patternFill){I.save();const ut=f.fillColor.getPattern(I,this,(0,g.getCurrentTransformInverse)(I),P.PathType.FILL);K=(0,g.getCurrentTransform)(I),I.restore(),I.fillStyle=ut}let it=f.lineWidth;const lt=f.textMatrixScale;if(lt===0||it===0){const ut=f.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(ut===e.TextRenderingMode.STROKE||ut===e.TextRenderingMode.FILL_STROKE)&&(it=this.getSinglePixelWidth())}else it/=lt;if(V!==1&&(I.scale(V,V),it/=V),I.lineWidth=it,E.isInvalidPDFjsFont){const ut=[];let ft=0;for(const wt of d)ut.push(wt.unicode),ft+=wt.width;I.fillText(ut.join(""),0,0),f.x+=ft*X*s,I.restore(),this.compose();return}let et=0,rt;for(rt=0;rt<a;++rt){const ut=d[rt];if(typeof ut=="number"){et+=T*ut*q/1e3;continue}let ft=!1;const wt=(ut.isSpace?j:0)+N,yt=ut.fontChar,Ct=ut.accent;let Y,At,Et=ut.width;if(v){const at=ut.vmetric||k,R=-(ut.vmetric?at[1]:Et*.5)*X,B=at[2]*X;Et=at?-at[0]:Et,Y=R/V,At=(et+B)/V}else Y=et/V,At=0;if(E.remeasure&&Et>0){const at=I.measureText(yt).width*1e3/q*V;if(Et<at&&this.isFontSubpixelAAEnabled){const R=Et/at;ft=!0,I.save(),I.scale(R,1),Y/=R}else Et!==at&&(Y+=(Et-at)/2e3*q/V)}if(this.contentVisible&&(ut.isInFont||E.missingFile)){if(nt&&!Ct)I.fillText(yt,Y,At);else if(this.paintChar(yt,Y,At,K),Ct){const at=Y+q*Ct.offset.x/V,R=At-q*Ct.offset.y/V;this.paintChar(Ct.fontChar,at,R,K)}}let mt;v?mt=Et*X-wt*H:mt=Et*X+wt*H,et+=mt,ft&&I.restore()}v?f.y-=et:f.x+=et*s,I.restore(),this.compose()}showType3Text(d){const f=this.ctx,E=this.current,q=E.font,I=E.fontSize,V=E.fontDirection,N=q.vertical?1:-1,j=E.charSpacing,H=E.wordSpacing,s=E.textHScale*V,a=E.fontMatrix||e.FONT_IDENTITY_MATRIX,v=d.length,T=E.textRenderingMode===e.TextRenderingMode.INVISIBLE;let k,X,nt,K;if(!(T||I===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,f.save(),f.transform(...E.textMatrix),f.translate(E.x,E.y),f.scale(s,V),k=0;k<v;++k){if(X=d[k],typeof X=="number"){K=N*X*I/1e3,this.ctx.translate(K,0),E.x+=K*s;continue}const it=(X.isSpace?H:0)+j,lt=q.charProcOperatorList[X.operatorListId];if(!lt){(0,e.warn)(`Type3 character "${X.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=X,this.save(),f.scale(I,I),f.transform(...a),this.executeOperatorList(lt),this.restore()),nt=e.Util.applyTransform([X.width,0],a)[0]*I+it,f.translate(nt,0),E.x+=nt*s}f.restore(),this.processingType3=null}}setCharWidth(d,f){}setCharWidthAndBounds(d,f,E,q,I,V){this.ctx.rect(E,q,I-E,V-q),this.ctx.clip(),this.endPath()}getColorN_Pattern(d){let f;if(d[0]==="TilingPattern"){const E=d[1],q=this.baseTransform||(0,g.getCurrentTransform)(this.ctx),I={createCanvasGraphics:V=>new gt(V,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};f=new P.TilingPattern(d,E,this.ctx,I,q)}else f=this._getPattern(d[1],d[2]);return f}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(d,f,E){const q=e.Util.makeHexColor(d,f,E);this.ctx.strokeStyle=q,this.current.strokeColor=q}setFillRGBColor(d,f,E){const q=e.Util.makeHexColor(d,f,E);this.ctx.fillStyle=q,this.current.fillColor=q,this.current.patternFill=!1}_getPattern(d,f=null){let E;return this.cachedPatterns.has(d)?E=this.cachedPatterns.get(d):(E=(0,P.getShadingPattern)(this.getObject(d)),this.cachedPatterns.set(d,E)),f&&(E.matrix=f),E}shadingFill(d){if(!this.contentVisible)return;const f=this.ctx;this.save();const E=this._getPattern(d);f.fillStyle=E.getPattern(f,this,(0,g.getCurrentTransformInverse)(f),P.PathType.SHADING);const q=(0,g.getCurrentTransformInverse)(f);if(q){const I=f.canvas,V=I.width,N=I.height,j=e.Util.applyTransform([0,0],q),H=e.Util.applyTransform([0,N],q),s=e.Util.applyTransform([V,0],q),a=e.Util.applyTransform([V,N],q),v=Math.min(j[0],H[0],s[0],a[0]),T=Math.min(j[1],H[1],s[1],a[1]),k=Math.max(j[0],H[0],s[0],a[0]),X=Math.max(j[1],H[1],s[1],a[1]);this.ctx.fillRect(v,T,k-v,X-T)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,e.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,e.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(d,f){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(d)&&d.length===6&&this.transform(...d),this.baseTransform=(0,g.getCurrentTransform)(this.ctx),f)){const E=f[2]-f[0],q=f[3]-f[1];this.ctx.rect(f[0],f[1],E,q),this.current.updateRectMinMax((0,g.getCurrentTransform)(this.ctx),f),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(d){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const f=this.ctx;d.isolated||(0,e.info)("TODO: Support non-isolated groups."),d.knockout&&(0,e.warn)("Knockout groups not supported.");const E=(0,g.getCurrentTransform)(f);if(d.matrix&&f.transform(...d.matrix),!d.bbox)throw new Error("Bounding box is required.");let q=e.Util.getAxialAlignedBoundingBox(d.bbox,(0,g.getCurrentTransform)(f));const I=[0,0,f.canvas.width,f.canvas.height];q=e.Util.intersect(q,I)||[0,0,0,0];const V=Math.floor(q[0]),N=Math.floor(q[1]);let j=Math.max(Math.ceil(q[2])-V,1),H=Math.max(Math.ceil(q[3])-N,1),s=1,a=1;j>y&&(s=j/y,j=y),H>y&&(a=H/y,H=y),this.current.startNewPathAndClipBox([0,0,j,H]);let v="groupAt"+this.groupLevel;d.smask&&(v+="_smask_"+this.smaskCounter++%2);const T=this.cachedCanvases.getCanvas(v,j,H),k=T.context;k.scale(1/s,1/a),k.translate(-V,-N),k.transform(...E),d.smask?this.smaskStack.push({canvas:T.canvas,context:k,offsetX:V,offsetY:N,scaleX:s,scaleY:a,subtype:d.smask.subtype,backdrop:d.smask.backdrop,transferMap:d.smask.transferMap||null,startTransformInverse:null}):(f.setTransform(1,0,0,1,0,0),f.translate(V,N),f.scale(s,a),f.save()),l(f,k),this.ctx=k,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(f),this.groupLevel++}endGroup(d){if(!this.contentVisible)return;this.groupLevel--;const f=this.ctx,E=this.groupStack.pop();if(this.ctx=E,this.ctx.imageSmoothingEnabled=!1,d.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const q=(0,g.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...q);const I=e.Util.getAxialAlignedBoundingBox([0,0,f.canvas.width,f.canvas.height],q);this.ctx.drawImage(f.canvas,0,0),this.ctx.restore(),this.compose(I)}}beginAnnotation(d,f,E,q,I){if(st(this,ht,_e).call(this),h(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(f)&&f.length===4){const V=f[2]-f[0],N=f[3]-f[1];if(I&&this.annotationCanvasMap){E=E.slice(),E[4]-=f[0],E[5]-=f[1],f=f.slice(),f[0]=f[1]=0,f[2]=V,f[3]=N;const[j,H]=e.Util.singularValueDecompose2dScale((0,g.getCurrentTransform)(this.ctx)),{viewportScale:s}=this,a=Math.ceil(V*this.outputScaleX*s),v=Math.ceil(N*this.outputScaleY*s);this.annotationCanvas=this.canvasFactory.create(a,v);const{canvas:T,context:k}=this.annotationCanvas;this.annotationCanvasMap.set(d,T),this.annotationCanvas.savedCtx=this.ctx,this.ctx=k,this.ctx.save(),this.ctx.setTransform(j,0,0,-H,0,N*H),h(this.ctx)}else h(this.ctx),this.ctx.rect(f[0],f[1],V,N),this.ctx.clip(),this.endPath()}this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...E),this.transform(...q)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),st(this,vt,be).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(d){if(!this.contentVisible)return;const f=d.count;d=this.getObject(d.data,d),d.count=f;const E=this.ctx,q=this.processingType3;if(q&&(q.compiled===void 0&&(q.compiled=w(d)),q.compiled)){q.compiled(E);return}const I=this._createMaskCanvas(d),V=I.canvas;E.save(),E.setTransform(1,0,0,1,0,0),E.drawImage(V,I.offsetX,I.offsetY),E.restore(),this.compose()}paintImageMaskXObjectRepeat(d,f,E=0,q=0,I,V){if(!this.contentVisible)return;d=this.getObject(d.data,d);const N=this.ctx;N.save();const j=(0,g.getCurrentTransform)(N);N.transform(f,E,q,I,0,0);const H=this._createMaskCanvas(d);N.setTransform(1,0,0,1,H.offsetX-j[4],H.offsetY-j[5]);for(let s=0,a=V.length;s<a;s+=2){const v=e.Util.transform(j,[f,E,q,I,V[s],V[s+1]]),[T,k]=e.Util.applyTransform([0,0],v);N.drawImage(H.canvas,T,k)}N.restore(),this.compose()}paintImageMaskXObjectGroup(d){if(!this.contentVisible)return;const f=this.ctx,E=this.current.fillColor,q=this.current.patternFill;for(const I of d){const{data:V,width:N,height:j,transform:H}=I,s=this.cachedCanvases.getCanvas("maskCanvas",N,j),a=s.context;a.save();const v=this.getObject(V,I);n(a,v),a.globalCompositeOperation="source-in",a.fillStyle=q?E.getPattern(a,this,(0,g.getCurrentTransformInverse)(f),P.PathType.FILL):E,a.fillRect(0,0,N,j),a.restore(),f.save(),f.transform(...H),f.scale(1,-1),_(f,s.canvas,0,0,N,j,0,-1,1,1),f.restore()}this.compose()}paintImageXObject(d){if(!this.contentVisible)return;const f=this.getObject(d);if(!f){(0,e.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(f)}paintImageXObjectRepeat(d,f,E,q){if(!this.contentVisible)return;const I=this.getObject(d);if(!I){(0,e.warn)("Dependent image isn't ready yet");return}const V=I.width,N=I.height,j=[];for(let H=0,s=q.length;H<s;H+=2)j.push({transform:[f,0,0,E,q[H],q[H+1]],x:0,y:0,w:V,h:N});this.paintInlineImageXObjectGroup(I,j)}applyTransferMapsToCanvas(d){return this.current.transferMaps!=="none"&&(d.filter=this.current.transferMaps,d.drawImage(d.canvas,0,0),d.filter="none"),d.canvas}applyTransferMapsToBitmap(d){if(this.current.transferMaps==="none")return d.bitmap;const{bitmap:f,width:E,height:q}=d,I=this.cachedCanvases.getCanvas("inlineImage",E,q),V=I.context;return V.filter=this.current.transferMaps,V.drawImage(f,0,0),V.filter="none",I.canvas}paintInlineImageXObject(d){if(!this.contentVisible)return;const f=d.width,E=d.height,q=this.ctx;this.save(),G.isNodeJS||(q.filter="none"),q.scale(1/f,-1/E);let I;if(d.bitmap)I=this.applyTransferMapsToBitmap(d);else if(typeof HTMLElement=="function"&&d instanceof HTMLElement||!d.data)I=d;else{const j=this.cachedCanvases.getCanvas("inlineImage",f,E).context;b(j,d),I=this.applyTransferMapsToCanvas(j)}const V=this._scaleImage(I,(0,g.getCurrentTransformInverse)(q));q.imageSmoothingEnabled=$((0,g.getCurrentTransform)(q),d.interpolate),_(q,V.img,0,0,V.paintWidth,V.paintHeight,0,-E,f,E),this.compose(),this.restore()}paintInlineImageXObjectGroup(d,f){if(!this.contentVisible)return;const E=this.ctx;let q;if(d.bitmap)q=d.bitmap;else{const I=d.width,V=d.height,j=this.cachedCanvases.getCanvas("inlineImage",I,V).context;b(j,d),q=this.applyTransferMapsToCanvas(j)}for(const I of f)E.save(),E.transform(...I.transform),E.scale(1,-1),_(E,q,I.x,I.y,I.w,I.h,0,-1,1,1),E.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(d){}markPointProps(d,f){}beginMarkedContent(d){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(d,f){d==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(f)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(d){const f=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(d);const E=this.ctx;this.pendingClip&&(f||(this.pendingClip===dt?E.clip("evenodd"):E.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),E.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const d=(0,g.getCurrentTransform)(this.ctx);if(d[1]===0&&d[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(d[0]),Math.abs(d[3]));else{const f=Math.abs(d[0]*d[3]-d[2]*d[1]),E=Math.hypot(d[0],d[2]),q=Math.hypot(d[1],d[3]);this._cachedGetSinglePixelWidth=Math.max(E,q)/f}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:d}=this.current,f=(0,g.getCurrentTransform)(this.ctx);let E,q;if(f[1]===0&&f[2]===0){const I=Math.abs(f[0]),V=Math.abs(f[3]);if(d===0)E=1/I,q=1/V;else{const N=I*d,j=V*d;E=N<1?1/N:1,q=j<1?1/j:1}}else{const I=Math.abs(f[0]*f[3]-f[2]*f[1]),V=Math.hypot(f[0],f[1]),N=Math.hypot(f[2],f[3]);if(d===0)E=N/I,q=V/I;else{const j=d*I;E=N>j?N/j:1,q=V>j?V/j:1}}this._cachedScaleForStroking=[E,q]}return this._cachedScaleForStroking}rescaleAndStroke(d){const{ctx:f}=this,{lineWidth:E}=this.current,[q,I]=this.getScaleForStroking();if(f.lineWidth=E||1,q===1&&I===1){f.stroke();return}let V,N,j;d&&(V=(0,g.getCurrentTransform)(f),N=f.getLineDash().slice(),j=f.lineDashOffset),f.scale(q,I);const H=Math.max(q,I);f.setLineDash(f.getLineDash().map(s=>s/H)),f.lineDashOffset/=H,f.stroke(),d&&(f.setTransform(...V),f.setLineDash(N),f.lineDashOffset=j)}isContentVisible(){for(let d=this.markedContentStack.length-1;d>=0;d--)if(!this.markedContentStack[d].visible)return!1;return!0}};let ot=gt;ht=new WeakSet,_e=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},vt=new WeakSet,be=function(){if(this.pageColors){const d=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(d!=="none"){const f=this.ctx.filter;this.ctx.filter=d,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=f}}},t.CanvasGraphics=ot;for(const z in e.OPS)ot.prototype[z]!==void 0&&(ot.prototype[e.OPS[z]]=ot.prototype[z])},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=D;var e=c(1),g=c(6);const P={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=P;function M(_,w){if(!w)return;const F=w[2]-w[0],b=w[3]-w[1],n=new Path2D;n.rect(w[0],w[1],F,b),_.clip(n)}class G{constructor(){this.constructor===G&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class S extends G{constructor(w){super(),this._type=w[1],this._bbox=w[2],this._colorStops=w[3],this._p0=w[4],this._p1=w[5],this._r0=w[6],this._r1=w[7],this.matrix=null}_createGradient(w){let F;this._type==="axial"?F=w.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(F=w.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const b of this._colorStops)F.addColorStop(b[0],b[1]);return F}getPattern(w,F,b,n){let l;if(n===P.STROKE||n===P.FILL){const h=F.current.getClippedPathBoundingBox(n,(0,g.getCurrentTransform)(w))||[0,0,0,0],r=Math.ceil(h[2]-h[0])||1,p=Math.ceil(h[3]-h[1])||1,O=F.cachedCanvases.getCanvas("pattern",r,p,!0),o=O.context;o.clearRect(0,0,o.canvas.width,o.canvas.height),o.beginPath(),o.rect(0,0,o.canvas.width,o.canvas.height),o.translate(-h[0],-h[1]),b=e.Util.transform(b,[1,0,0,1,h[0],h[1]]),o.transform(...F.baseTransform),this.matrix&&o.transform(...this.matrix),M(o,this._bbox),o.fillStyle=this._createGradient(o),o.fill(),l=w.createPattern(O.canvas,"no-repeat");const W=new DOMMatrix(b);l.setTransform(W)}else M(w,this._bbox),l=this._createGradient(w);return l}}function C(_,w,F,b,n,l,h,r){const p=w.coords,O=w.colors,o=_.data,W=_.width*4;let $;p[F+1]>p[b+1]&&($=F,F=b,b=$,$=l,l=h,h=$),p[b+1]>p[n+1]&&($=b,b=n,n=$,$=h,h=r,r=$),p[F+1]>p[b+1]&&($=F,F=b,b=$,$=l,l=h,h=$);const J=(p[F]+w.offsetX)*w.scaleX,Q=(p[F+1]+w.offsetY)*w.scaleY,tt=(p[b]+w.offsetX)*w.scaleX,dt=(p[b+1]+w.offsetY)*w.scaleY,ot=(p[n]+w.offsetX)*w.scaleX,ht=(p[n+1]+w.offsetY)*w.scaleY;if(Q>=ht)return;const _t=O[l],vt=O[l+1],St=O[l+2],gt=O[h],z=O[h+1],d=O[h+2],f=O[r],E=O[r+1],q=O[r+2],I=Math.round(Q),V=Math.round(ht);let N,j,H,s,a,v,T,k;for(let X=I;X<=V;X++){if(X<dt){let et;X<Q?et=0:et=(Q-X)/(Q-dt),N=J-(J-tt)*et,j=_t-(_t-gt)*et,H=vt-(vt-z)*et,s=St-(St-d)*et}else{let et;X>ht?et=1:dt===ht?et=0:et=(dt-X)/(dt-ht),N=tt-(tt-ot)*et,j=gt-(gt-f)*et,H=z-(z-E)*et,s=d-(d-q)*et}let nt;X<Q?nt=0:X>ht?nt=1:nt=(Q-X)/(Q-ht),a=J-(J-ot)*nt,v=_t-(_t-f)*nt,T=vt-(vt-E)*nt,k=St-(St-q)*nt;const K=Math.round(Math.min(N,a)),it=Math.round(Math.max(N,a));let lt=W*X+K*4;for(let et=K;et<=it;et++)nt=(N-et)/(N-a),nt<0?nt=0:nt>1&&(nt=1),o[lt++]=j-(j-v)*nt|0,o[lt++]=H-(H-T)*nt|0,o[lt++]=s-(s-k)*nt|0,o[lt++]=255}}function y(_,w,F){const b=w.coords,n=w.colors;let l,h;switch(w.type){case"lattice":const r=w.verticesPerRow,p=Math.floor(b.length/r)-1,O=r-1;for(l=0;l<p;l++){let o=l*r;for(let W=0;W<O;W++,o++)C(_,F,b[o],b[o+1],b[o+r],n[o],n[o+1],n[o+r]),C(_,F,b[o+r+1],b[o+1],b[o+r],n[o+r+1],n[o+1],n[o+r])}break;case"triangles":for(l=0,h=b.length;l<h;l+=3)C(_,F,b[l],b[l+1],b[l+2],n[l],n[l+1],n[l+2]);break;default:throw new Error("illegal figure")}}class U extends G{constructor(w){super(),this._coords=w[2],this._colors=w[3],this._figures=w[4],this._bounds=w[5],this._bbox=w[7],this._background=w[8],this.matrix=null}_createMeshCanvas(w,F,b){const r=Math.floor(this._bounds[0]),p=Math.floor(this._bounds[1]),O=Math.ceil(this._bounds[2])-r,o=Math.ceil(this._bounds[3])-p,W=Math.min(Math.ceil(Math.abs(O*w[0]*1.1)),3e3),$=Math.min(Math.ceil(Math.abs(o*w[1]*1.1)),3e3),J=O/W,Q=o/$,tt={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-p,scaleX:1/J,scaleY:1/Q},dt=W+2*2,ot=$+2*2,ht=b.getCanvas("mesh",dt,ot,!1),_t=ht.context,vt=_t.createImageData(W,$);if(F){const gt=vt.data;for(let z=0,d=gt.length;z<d;z+=4)gt[z]=F[0],gt[z+1]=F[1],gt[z+2]=F[2],gt[z+3]=255}for(const gt of this._figures)y(vt,gt,tt);return _t.putImageData(vt,2,2),{canvas:ht.canvas,offsetX:r-2*J,offsetY:p-2*Q,scaleX:J,scaleY:Q}}getPattern(w,F,b,n){M(w,this._bbox);let l;if(n===P.SHADING)l=e.Util.singularValueDecompose2dScale((0,g.getCurrentTransform)(w));else if(l=e.Util.singularValueDecompose2dScale(F.baseTransform),this.matrix){const r=e.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*r[0],l[1]*r[1]]}const h=this._createMeshCanvas(l,n===P.SHADING?null:this._background,F.cachedCanvases);return n!==P.SHADING&&(w.setTransform(...F.baseTransform),this.matrix&&w.transform(...this.matrix)),w.translate(h.offsetX,h.offsetY),w.scale(h.scaleX,h.scaleY),w.createPattern(h.canvas,"no-repeat")}}class x extends G{getPattern(){return"hotpink"}}function D(_){switch(_[0]){case"RadialAxial":return new S(_);case"Mesh":return new U(_);case"Dummy":return new x}throw new Error(`Unknown IR type: ${_[0]}`)}const m={COLORED:1,UNCOLORED:2},i=class{constructor(w,F,b,n,l){this.operatorList=w[2],this.matrix=w[3]||[1,0,0,1,0,0],this.bbox=w[4],this.xstep=w[5],this.ystep=w[6],this.paintType=w[7],this.tilingType=w[8],this.color=F,this.ctx=b,this.canvasGraphicsFactory=n,this.baseTransform=l}createPatternCanvas(w){const F=this.operatorList,b=this.bbox,n=this.xstep,l=this.ystep,h=this.paintType,r=this.tilingType,p=this.color,O=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+r);const o=b[0],W=b[1],$=b[2],J=b[3],Q=e.Util.singularValueDecompose2dScale(this.matrix),tt=e.Util.singularValueDecompose2dScale(this.baseTransform),dt=[Q[0]*tt[0],Q[1]*tt[1]],ot=this.getSizeAndScale(n,this.ctx.canvas.width,dt[0]),ht=this.getSizeAndScale(l,this.ctx.canvas.height,dt[1]),_t=w.cachedCanvases.getCanvas("pattern",ot.size,ht.size,!0),vt=_t.context,St=O.createCanvasGraphics(vt);St.groupLevel=w.groupLevel,this.setFillAndStrokeStyleToContext(St,h,p);let gt=o,z=W,d=$,f=J;return o<0&&(gt=0,d+=Math.abs(o)),W<0&&(z=0,f+=Math.abs(W)),vt.translate(-(ot.scale*gt),-(ht.scale*z)),St.transform(ot.scale,0,0,ht.scale,0,0),vt.save(),this.clipBbox(St,gt,z,d,f),St.baseTransform=(0,g.getCurrentTransform)(St.ctx),St.executeOperatorList(F),St.endDrawing(),{canvas:_t.canvas,scaleX:ot.scale,scaleY:ht.scale,offsetX:gt,offsetY:z}}getSizeAndScale(w,F,b){w=Math.abs(w);const n=Math.max(i.MAX_PATTERN_SIZE,F);let l=Math.ceil(w*b);return l>=n?l=n:b=l/w,{scale:b,size:l}}clipBbox(w,F,b,n,l){const h=n-F,r=l-b;w.ctx.rect(F,b,h,r),w.current.updateRectMinMax((0,g.getCurrentTransform)(w.ctx),[F,b,n,l]),w.clip(),w.endPath()}setFillAndStrokeStyleToContext(w,F,b){const n=w.ctx,l=w.current;switch(F){case m.COLORED:const h=this.ctx;n.fillStyle=h.fillStyle,n.strokeStyle=h.strokeStyle,l.fillColor=h.fillStyle,l.strokeColor=h.strokeStyle;break;case m.UNCOLORED:const r=e.Util.makeHexColor(b[0],b[1],b[2]);n.fillStyle=r,n.strokeStyle=r,l.fillColor=r,l.strokeColor=r;break;default:throw new e.FormatError(`Unsupported paint type: ${F}`)}}getPattern(w,F,b,n){let l=b;n!==P.SHADING&&(l=e.Util.transform(l,F.baseTransform),this.matrix&&(l=e.Util.transform(l,this.matrix)));const h=this.createPatternCanvas(F);let r=new DOMMatrix(l);r=r.translate(h.offsetX,h.offsetY),r=r.scale(1/h.scaleX,1/h.scaleY);const p=w.createPattern(h.canvas,"repeat");return p.setTransform(r),p}};let u=i;Ot(u,"MAX_PATTERN_SIZE",3e3),t.TilingPattern=u},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=P,t.convertToRGBA=g,t.grayToRGBA=G;var e=c(1);function g(S){switch(S.kind){case e.ImageKind.GRAYSCALE_1BPP:return P(S);case e.ImageKind.RGB_24BPP:return M(S)}return null}function P({src:S,srcPos:C=0,dest:y,width:U,height:x,nonBlackColor:D=4294967295,inverseDecode:m=!1}){const u=e.FeatureTest.isLittleEndian?4278190080:255,[i,_]=m?[D,u]:[u,D],w=U>>3,F=U&7,b=S.length;y=new Uint32Array(y.buffer);let n=0;for(let l=0;l<x;l++){for(const r=C+w;C<r;C++){const p=C<b?S[C]:255;y[n++]=p&128?_:i,y[n++]=p&64?_:i,y[n++]=p&32?_:i,y[n++]=p&16?_:i,y[n++]=p&8?_:i,y[n++]=p&4?_:i,y[n++]=p&2?_:i,y[n++]=p&1?_:i}if(F===0)continue;const h=C<b?S[C++]:255;for(let r=0;r<F;r++)y[n++]=h&1<<7-r?_:i}return{srcPos:C,destPos:n}}function M({src:S,srcPos:C=0,dest:y,destPos:U=0,width:x,height:D}){let m=0;const u=S.length>>2,i=new Uint32Array(S.buffer,C,u);if(e.FeatureTest.isLittleEndian){for(;m<u-2;m+=3,U+=4){const _=i[m],w=i[m+1],F=i[m+2];y[U]=_|4278190080,y[U+1]=_>>>24|w<<8|4278190080,y[U+2]=w>>>16|F<<16|4278190080,y[U+3]=F>>>8|4278190080}for(let _=m*4,w=S.length;_<w;_+=3)y[U++]=S[_]|S[_+1]<<8|S[_+2]<<16|4278190080}else{for(;m<u-2;m+=3,U+=4){const _=i[m],w=i[m+1],F=i[m+2];y[U]=_|255,y[U+1]=_<<24|w>>>8|255,y[U+2]=w<<16|F>>>16|255,y[U+3]=F<<8|255}for(let _=m*4,w=S.length;_<w;_+=3)y[U++]=S[_]<<24|S[_+1]<<16|S[_+2]<<8|255}return{srcPos:C,destPos:U}}function G(S,C){if(e.FeatureTest.isLittleEndian)for(let y=0,U=S.length;y<U;y++)C[y]=S[y]*65793|4278190080;else for(let y=0,U=S.length;y<U;y++)C[y]=S[y]*16843008|255}},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const c=Object.create(null);t.GlobalWorkerOptions=c,c.workerPort=null,c.workerSrc=""},(L,t,c)=>{var S,He,y,We,x,ae;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var e=c(1);const g={UNKNOWN:0,DATA:1,ERROR:2},P={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function M(m){switch(m instanceof Error||typeof m=="object"&&m!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),m.name){case"AbortException":return new e.AbortException(m.message);case"MissingPDFException":return new e.MissingPDFException(m.message);case"PasswordException":return new e.PasswordException(m.message,m.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(m.message,m.status);case"UnknownErrorException":return new e.UnknownErrorException(m.message,m.details);default:return new e.UnknownErrorException(m.message,m.toString())}}class G{constructor(u,i,_){Z(this,S);Z(this,y);Z(this,x);this.sourceName=u,this.targetName=i,this.comObj=_,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=w=>{const F=w.data;if(F.targetName!==this.sourceName)return;if(F.stream){st(this,y,We).call(this,F);return}if(F.callback){const n=F.callbackId,l=this.callbackCapabilities[n];if(!l)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],F.callback===g.DATA)l.resolve(F.data);else if(F.callback===g.ERROR)l.reject(M(F.reason));else throw new Error("Unexpected callback case");return}const b=this.actionHandler[F.action];if(!b)throw new Error(`Unknown action from worker: ${F.action}`);if(F.callbackId){const n=this.sourceName,l=F.sourceName;new Promise(function(h){h(b(F.data))}).then(function(h){_.postMessage({sourceName:n,targetName:l,callback:g.DATA,callbackId:F.callbackId,data:h})},function(h){_.postMessage({sourceName:n,targetName:l,callback:g.ERROR,callbackId:F.callbackId,reason:M(h)})});return}if(F.streamId){st(this,S,He).call(this,F);return}b(F.data)},_.addEventListener("message",this._onComObjOnMessage)}on(u,i){const _=this.actionHandler;if(_[u])throw new Error(`There is already an actionName called "${u}"`);_[u]=i}send(u,i,_){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:i},_)}sendWithPromise(u,i,_){const w=this.callbackId++,F=new e.PromiseCapability;this.callbackCapabilities[w]=F;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:w,data:i},_)}catch(b){F.reject(b)}return F.promise}sendWithStream(u,i,_,w){const F=this.streamId++,b=this.sourceName,n=this.targetName,l=this.comObj;return new ReadableStream({start:h=>{const r=new e.PromiseCapability;return this.streamControllers[F]={controller:h,startCall:r,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:b,targetName:n,action:u,streamId:F,data:i,desiredSize:h.desiredSize},w),r.promise},pull:h=>{const r=new e.PromiseCapability;return this.streamControllers[F].pullCall=r,l.postMessage({sourceName:b,targetName:n,stream:P.PULL,streamId:F,desiredSize:h.desiredSize}),r.promise},cancel:h=>{(0,e.assert)(h instanceof Error,"cancel must have a valid reason");const r=new e.PromiseCapability;return this.streamControllers[F].cancelCall=r,this.streamControllers[F].isClosed=!0,l.postMessage({sourceName:b,targetName:n,stream:P.CANCEL,streamId:F,reason:M(h)}),r.promise}},_)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}S=new WeakSet,He=function(u){const i=u.streamId,_=this.sourceName,w=u.sourceName,F=this.comObj,b=this,n=this.actionHandler[u.action],l={enqueue(h,r=1,p){if(this.isCancelled)return;const O=this.desiredSize;this.desiredSize-=r,O>0&&this.desiredSize<=0&&(this.sinkCapability=new e.PromiseCapability,this.ready=this.sinkCapability.promise),F.postMessage({sourceName:_,targetName:w,stream:P.ENQUEUE,streamId:i,chunk:h},p)},close(){this.isCancelled||(this.isCancelled=!0,F.postMessage({sourceName:_,targetName:w,stream:P.CLOSE,streamId:i}),delete b.streamSinks[i])},error(h){(0,e.assert)(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,F.postMessage({sourceName:_,targetName:w,stream:P.ERROR,streamId:i,reason:M(h)}))},sinkCapability:new e.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[i]=l,new Promise(function(h){h(n(u.data,l))}).then(function(){F.postMessage({sourceName:_,targetName:w,stream:P.START_COMPLETE,streamId:i,success:!0})},function(h){F.postMessage({sourceName:_,targetName:w,stream:P.START_COMPLETE,streamId:i,reason:M(h)})})},y=new WeakSet,We=function(u){const i=u.streamId,_=this.sourceName,w=u.sourceName,F=this.comObj,b=this.streamControllers[i],n=this.streamSinks[i];switch(u.stream){case P.START_COMPLETE:u.success?b.startCall.resolve():b.startCall.reject(M(u.reason));break;case P.PULL_COMPLETE:u.success?b.pullCall.resolve():b.pullCall.reject(M(u.reason));break;case P.PULL:if(!n){F.postMessage({sourceName:_,targetName:w,stream:P.PULL_COMPLETE,streamId:i,success:!0});break}n.desiredSize<=0&&u.desiredSize>0&&n.sinkCapability.resolve(),n.desiredSize=u.desiredSize,new Promise(function(l){var h;l((h=n.onPull)==null?void 0:h.call(n))}).then(function(){F.postMessage({sourceName:_,targetName:w,stream:P.PULL_COMPLETE,streamId:i,success:!0})},function(l){F.postMessage({sourceName:_,targetName:w,stream:P.PULL_COMPLETE,streamId:i,reason:M(l)})});break;case P.ENQUEUE:if((0,e.assert)(b,"enqueue should have stream controller"),b.isClosed)break;b.controller.enqueue(u.chunk);break;case P.CLOSE:if((0,e.assert)(b,"close should have stream controller"),b.isClosed)break;b.isClosed=!0,b.controller.close(),st(this,x,ae).call(this,b,i);break;case P.ERROR:(0,e.assert)(b,"error should have stream controller"),b.controller.error(M(u.reason)),st(this,x,ae).call(this,b,i);break;case P.CANCEL_COMPLETE:u.success?b.cancelCall.resolve():b.cancelCall.reject(M(u.reason)),st(this,x,ae).call(this,b,i);break;case P.CANCEL:if(!n)break;new Promise(function(l){var h;l((h=n.onCancel)==null?void 0:h.call(n,M(u.reason)))}).then(function(){F.postMessage({sourceName:_,targetName:w,stream:P.CANCEL_COMPLETE,streamId:i,success:!0})},function(l){F.postMessage({sourceName:_,targetName:w,stream:P.CANCEL_COMPLETE,streamId:i,reason:M(l)})}),n.sinkCapability.reject(M(u.reason)),n.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}},x=new WeakSet,ae=async function(u,i){var _,w,F;await Promise.allSettled([(_=u.startCall)==null?void 0:_.promise,(w=u.pullCall)==null?void 0:w.promise,(F=u.cancelCall)==null?void 0:F.promise]),delete this.streamControllers[i]},t.MessageHandler=G},(L,t,c)=>{var P,M;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var e=c(1);class g{constructor({parsedData:S,rawData:C}){Z(this,P,void 0);Z(this,M,void 0);pt(this,P,S),pt(this,M,C)}getRaw(){return A(this,M)}get(S){return A(this,P).get(S)??null}getAll(){return(0,e.objectFromMap)(A(this,P))}has(S){return A(this,P).has(S)}}P=new WeakMap,M=new WeakMap,t.Metadata=g},(L,t,c)=>{var S,C,y,U,x,D,Ae;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var e=c(1),g=c(8);const P=Symbol("INTERNAL");class M{constructor(i,_){Z(this,S,!0);this.name=i,this.intent=_}get visible(){return A(this,S)}_setVisible(i,_){i!==P&&(0,e.unreachable)("Internal method `_setVisible` called."),pt(this,S,_)}}S=new WeakMap;class G{constructor(i){Z(this,D);Z(this,C,null);Z(this,y,new Map);Z(this,U,null);Z(this,x,null);if(this.name=null,this.creator=null,i!==null){this.name=i.name,this.creator=i.creator,pt(this,x,i.order);for(const _ of i.groups)A(this,y).set(_.id,new M(_.name,_.intent));if(i.baseState==="OFF")for(const _ of A(this,y).values())_._setVisible(P,!1);for(const _ of i.on)A(this,y).get(_)._setVisible(P,!0);for(const _ of i.off)A(this,y).get(_)._setVisible(P,!1);pt(this,U,this.getHash())}}isVisible(i){if(A(this,y).size===0)return!0;if(!i)return(0,e.warn)("Optional content group not defined."),!0;if(i.type==="OCG")return A(this,y).has(i.id)?A(this,y).get(i.id).visible:((0,e.warn)(`Optional content group not found: ${i.id}`),!0);if(i.type==="OCMD"){if(i.expression)return st(this,D,Ae).call(this,i.expression);if(!i.policy||i.policy==="AnyOn"){for(const _ of i.ids){if(!A(this,y).has(_))return(0,e.warn)(`Optional content group not found: ${_}`),!0;if(A(this,y).get(_).visible)return!0}return!1}else if(i.policy==="AllOn"){for(const _ of i.ids){if(!A(this,y).has(_))return(0,e.warn)(`Optional content group not found: ${_}`),!0;if(!A(this,y).get(_).visible)return!1}return!0}else if(i.policy==="AnyOff"){for(const _ of i.ids){if(!A(this,y).has(_))return(0,e.warn)(`Optional content group not found: ${_}`),!0;if(!A(this,y).get(_).visible)return!0}return!1}else if(i.policy==="AllOff"){for(const _ of i.ids){if(!A(this,y).has(_))return(0,e.warn)(`Optional content group not found: ${_}`),!0;if(A(this,y).get(_).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${i.policy}.`),!0}return(0,e.warn)(`Unknown group type ${i.type}.`),!0}setVisibility(i,_=!0){if(!A(this,y).has(i)){(0,e.warn)(`Optional content group not found: ${i}`);return}A(this,y).get(i)._setVisible(P,!!_),pt(this,C,null)}get hasInitialVisibility(){return this.getHash()===A(this,U)}getOrder(){return A(this,y).size?A(this,x)?A(this,x).slice():[...A(this,y).keys()]:null}getGroups(){return A(this,y).size>0?(0,e.objectFromMap)(A(this,y)):null}getGroup(i){return A(this,y).get(i)||null}getHash(){if(A(this,C)!==null)return A(this,C);const i=new g.MurmurHash3_64;for(const[_,w]of A(this,y))i.update(`${_}:${w.visible}`);return pt(this,C,i.hexdigest())}}C=new WeakMap,y=new WeakMap,U=new WeakMap,x=new WeakMap,D=new WeakSet,Ae=function(i){const _=i.length;if(_<2)return!0;const w=i[0];for(let F=1;F<_;F++){const b=i[F];let n;if(Array.isArray(b))n=st(this,D,Ae).call(this,b);else if(A(this,y).has(b))n=A(this,y).get(b).visible;else return(0,e.warn)(`Optional content group not found: ${b}`),!0;switch(w){case"And":if(!n)return!1;break;case"Or":if(n)return!0;break;case"Not":return!n;default:return!0}}return w==="And"},t.OptionalContentConfig=G},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var e=c(1),g=c(6);class P{constructor({length:C,initialData:y,progressiveDone:U=!1,contentDispositionFilename:x=null,disableRange:D=!1,disableStream:m=!1},u){if((0,e.assert)(u,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=U,this._contentDispositionFilename=x,(y==null?void 0:y.length)>0){const i=y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength?y.buffer:new Uint8Array(y).buffer;this._queuedChunks.push(i)}this._pdfDataRangeTransport=u,this._isStreamingSupported=!m,this._isRangeSupported=!D,this._contentLength=C,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((i,_)=>{this._onReceiveData({begin:i,chunk:_})}),this._pdfDataRangeTransport.addProgressListener((i,_)=>{this._onProgress({loaded:i,total:_})}),this._pdfDataRangeTransport.addProgressiveReadListener(i=>{this._onReceiveData({chunk:i})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:C,chunk:y}){const U=y instanceof Uint8Array&&y.byteLength===y.buffer.byteLength?y.buffer:new Uint8Array(y).buffer;if(C===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(U):this._queuedChunks.push(U);else{const x=this._rangeReaders.some(function(D){return D._begin!==C?!1:(D._enqueue(U),!0)});(0,e.assert)(x,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var C;return((C=this._fullRequestReader)==null?void 0:C._loaded)??0}_onProgress(C){var y,U,x,D;C.total===void 0?(U=(y=this._rangeReaders[0])==null?void 0:y.onProgress)==null||U.call(y,{loaded:C.loaded}):(D=(x=this._fullRequestReader)==null?void 0:x.onProgress)==null||D.call(x,{loaded:C.loaded,total:C.total})}_onProgressiveDone(){var C;(C=this._fullRequestReader)==null||C.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(C){const y=this._rangeReaders.indexOf(C);y>=0&&this._rangeReaders.splice(y,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const C=this._queuedChunks;return this._queuedChunks=null,new M(this,C,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(C,y){if(y<=this._progressiveDataLength)return null;const U=new G(this,C,y);return this._pdfDataRangeTransport.requestDataRange(C,y),this._rangeReaders.push(U),U}cancelAllRequests(C){var y;(y=this._fullRequestReader)==null||y.cancel(C);for(const U of this._rangeReaders.slice(0))U.cancel(C);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=P;class M{constructor(C,y,U=!1,x=null){this._stream=C,this._done=U||!1,this._filename=(0,g.isPdfFile)(x)?x:null,this._queuedChunks=y||[],this._loaded=0;for(const D of this._queuedChunks)this._loaded+=D.byteLength;this._requests=[],this._headersReady=Promise.resolve(),C._fullRequestReader=this,this.onProgress=null}_enqueue(C){this._done||(this._requests.length>0?this._requests.shift().resolve({value:C,done:!1}):this._queuedChunks.push(C),this._loaded+=C.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const C=new e.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class G{constructor(C,y,U){this._stream=C,this._begin=y,this._end=U,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(C){if(!this._done){if(this._requests.length===0)this._queuedChunk=C;else{this._requests.shift().resolve({value:C,done:!1});for(const U of this._requests)U.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const C=new e.PromiseCapability;return this._requests.push(C),C.promise}cancel(C){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class c{static textContent(g){const P=[],M={items:P,styles:Object.create(null)};function G(S){var U;if(!S)return;let C=null;const y=S.name;if(y==="#text")C=S.value;else if(c.shouldBuildText(y))(U=S==null?void 0:S.attributes)!=null&&U.textContent?C=S.attributes.textContent:S.value&&(C=S.value);else return;if(C!==null&&P.push({str:C}),!!S.children)for(const x of S.children)G(x)}return G(g),M}static shouldBuildText(g){return!(g==="textarea"||g==="input"||g==="option"||g==="select")}}t.XfaText=c},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var e=c(7);const g=function(C){return new Promise((y,U)=>{require$$5.readFile(C,(D,m)=>{if(D||!m){U(new Error(D));return}y(new Uint8Array(m))})})};class P extends e.BaseFilterFactory{}t.NodeFilterFactory=P;class M extends e.BaseCanvasFactory{_createCanvas(y,U){return require$$5.createCanvas(y,U)}}t.NodeCanvasFactory=M;class G extends e.BaseCMapReaderFactory{_fetchData(y,U){return g(y).then(x=>({cMapData:x,compressionType:U}))}}t.NodeCMapReaderFactory=G;class S extends e.BaseStandardFontDataFactory{_fetchData(y){return g(y)}}t.NodeStandardFontDataFactory=S},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var e=c(1),g=c(22);const P=require$$5,M=require$$5,G=require$$5,S=require$$5,C=/^file:\/\/\/[a-zA-Z]:\//;function y(F){const b=S.parse(F);return b.protocol==="file:"||b.host?b:/^[a-z]:[/\\]/i.test(F)?S.parse(`file:///${F}`):(b.host||(b.protocol="file:"),b)}class U{constructor(b){this.source=b,this.url=y(b.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _(this):new u(this),this._fullRequestReader}getRangeReader(b,n){if(n<=this._progressiveDataLength)return null;const l=this.isFsUrl?new w(this,b,n):new i(this,b,n);return this._rangeRequestReaders.push(l),l}cancelAllRequests(b){var n;(n=this._fullRequestReader)==null||n.cancel(b);for(const l of this._rangeRequestReaders.slice(0))l.cancel(b)}}t.PDFNodeStream=U;class x{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=b.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=new e.PromiseCapability,this._headersCapability=new e.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var l;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=b.length,(l=this.onProgress)==null||l.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class D{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new e.PromiseCapability;const n=b.source;this._isStreamingSupported=!n.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var l;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=b.length,(l=this.onProgress)==null||l.call(this,{loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function m(F,b){return{protocol:F.protocol,auth:F.auth,host:F.hostname,port:F.port,path:F.path,method:"GET",headers:b}}class u extends x{constructor(b){super(b);const n=l=>{if(l.statusCode===404){const O=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=O,this._headersCapability.reject(O);return}this._headersCapability.resolve(),this._setReadableStream(l);const h=O=>this._readableStream.headers[O.toLowerCase()],{allowRangeRequests:r,suggestedLength:p}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:h,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=p||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(h)};this._request=null,this._url.protocol==="http:"?this._request=M.request(m(this._url,b.httpHeaders),n):this._request=G.request(m(this._url,b.httpHeaders),n),this._request.on("error",l=>{this._storedError=l,this._headersCapability.reject(l)}),this._request.end()}}class i extends D{constructor(b,n,l){super(b),this._httpHeaders={};for(const r in b.httpHeaders){const p=b.httpHeaders[r];p!==void 0&&(this._httpHeaders[r]=p)}this._httpHeaders.Range=`bytes=${n}-${l-1}`;const h=r=>{if(r.statusCode===404){const p=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=p;return}this._setReadableStream(r)};this._request=null,this._url.protocol==="http:"?this._request=M.request(m(this._url,this._httpHeaders),h):this._request=G.request(m(this._url,this._httpHeaders),h),this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class _ extends x{constructor(b){super(b);let n=decodeURIComponent(this._url.path);C.test(this._url.href)&&(n=n.replace(/^\//,"")),P.lstat(n,(l,h)=>{if(l){l.code==="ENOENT"&&(l=new e.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=l,this._headersCapability.reject(l);return}this._contentLength=h.size,this._setReadableStream(P.createReadStream(n)),this._headersCapability.resolve()})}}class w extends D{constructor(b,n,l){super(b);let h=decodeURIComponent(this._url.path);C.test(this._url.href)&&(h=h.replace(/^\//,"")),this._setReadableStream(P.createReadStream(h,{start:n,end:l-1}))}}},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=S,t.extractFilenameFromHeader=G,t.validateRangeRequestCapabilities=M,t.validateResponseStatus=C;var e=c(1),g=c(23),P=c(6);function M({getResponseHeader:y,isHttp:U,rangeChunkSize:x,disableRange:D}){const m={allowRangeRequests:!1,suggestedLength:void 0},u=parseInt(y("Content-Length"),10);return!Number.isInteger(u)||(m.suggestedLength=u,u<=2*x)||D||!U||y("Accept-Ranges")!=="bytes"||(y("Content-Encoding")||"identity")!=="identity"||(m.allowRangeRequests=!0),m}function G(y){const U=y("Content-Disposition");if(U){let x=(0,g.getFilenameFromContentDispositionHeader)(U);if(x.includes("%"))try{x=decodeURIComponent(x)}catch{}if((0,P.isPdfFile)(x))return x}return null}function S(y,U){return y===404||y===0&&U.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+U+'".'):new e.UnexpectedResponseException(`Unexpected server response (${y}) while retrieving PDF "${U}".`,y)}function C(y){return y===200||y===206}},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=g;var e=c(1);function g(P){let M=!0,G=S("filename\\*","i").exec(P);if(G){G=G[1];let u=x(G);return u=unescape(u),u=D(u),u=m(u),y(u)}if(G=U(P),G){const u=m(G);return y(u)}if(G=S("filename","i").exec(P),G){G=G[1];let u=x(G);return u=m(u),y(u)}function S(u,i){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',i)}function C(u,i){if(u){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const _=new TextDecoder(u,{fatal:!0}),w=(0,e.stringToBytes)(i);i=_.decode(w),M=!1}catch{}}return i}function y(u){return M&&/[\x80-\xff]/.test(u)&&(u=C("utf-8",u),M&&(u=C("iso-8859-1",u))),u}function U(u){const i=[];let _;const w=S("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=w.exec(u))!==null;){let[,b,n,l]=_;if(b=parseInt(b,10),b in i){if(b===0)break;continue}i[b]=[n,l]}const F=[];for(let b=0;b<i.length&&b in i;++b){let[n,l]=i[b];l=x(l),n&&(l=unescape(l),b===0&&(l=D(l))),F.push(l)}return F.join("")}function x(u){if(u.startsWith('"')){const i=u.slice(1).split('\\"');for(let _=0;_<i.length;++_){const w=i[_].indexOf('"');w!==-1&&(i[_]=i[_].slice(0,w),i.length=_+1),i[_]=i[_].replaceAll(/\\(.)/g,"$1")}u=i.join('"')}return u}function D(u){const i=u.indexOf("'");if(i===-1)return u;const _=u.slice(0,i),F=u.slice(i+1).replace(/^[^']*'/,"");return C(_,F)}function m(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(i,_,w,F){if(w==="q"||w==="Q")return F=F.replaceAll("_"," "),F=F.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,n){return String.fromCharCode(parseInt(n,16))}),C(_,F);try{F=atob(F)}catch{}return C(_,F)})}return""}},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var e=c(1),g=c(22);const P=200,M=206;function G(x){const D=x.response;return typeof D!="string"?D:(0,e.stringToBytes)(D).buffer}class S{constructor(D,m={}){this.url=D,this.isHttp=/^https?:/i.test(D),this.httpHeaders=this.isHttp&&m.httpHeaders||Object.create(null),this.withCredentials=m.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(D,m,u){const i={begin:D,end:m};for(const _ in u)i[_]=u[_];return this.request(i)}requestFull(D){return this.request(D)}request(D){const m=new XMLHttpRequest,u=this.currXhrId++,i=this.pendingRequests[u]={xhr:m};m.open("GET",this.url),m.withCredentials=this.withCredentials;for(const _ in this.httpHeaders){const w=this.httpHeaders[_];w!==void 0&&m.setRequestHeader(_,w)}return this.isHttp&&"begin"in D&&"end"in D?(m.setRequestHeader("Range",`bytes=${D.begin}-${D.end-1}`),i.expectedStatus=M):i.expectedStatus=P,m.responseType="arraybuffer",D.onError&&(m.onerror=function(_){D.onError(m.status)}),m.onreadystatechange=this.onStateChange.bind(this,u),m.onprogress=this.onProgress.bind(this,u),i.onHeadersReceived=D.onHeadersReceived,i.onDone=D.onDone,i.onError=D.onError,i.onProgress=D.onProgress,m.send(null),u}onProgress(D,m){var i;const u=this.pendingRequests[D];u&&((i=u.onProgress)==null||i.call(u,m))}onStateChange(D,m){var b,n,l;const u=this.pendingRequests[D];if(!u)return;const i=u.xhr;if(i.readyState>=2&&u.onHeadersReceived&&(u.onHeadersReceived(),delete u.onHeadersReceived),i.readyState!==4||!(D in this.pendingRequests))return;if(delete this.pendingRequests[D],i.status===0&&this.isHttp){(b=u.onError)==null||b.call(u,i.status);return}const _=i.status||P;if(!(_===P&&u.expectedStatus===M)&&_!==u.expectedStatus){(n=u.onError)==null||n.call(u,i.status);return}const F=G(i);if(_===M){const h=i.getResponseHeader("Content-Range"),r=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);u.onDone({begin:parseInt(r[1],10),chunk:F})}else F?u.onDone({begin:0,chunk:F}):(l=u.onError)==null||l.call(u,i.status)}getRequestXhr(D){return this.pendingRequests[D].xhr}isPendingRequest(D){return D in this.pendingRequests}abortRequest(D){const m=this.pendingRequests[D].xhr;delete this.pendingRequests[D],m.abort()}}class C{constructor(D){this._source=D,this._manager=new S(D.url,{httpHeaders:D.httpHeaders,withCredentials:D.withCredentials}),this._rangeChunkSize=D.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(D){const m=this._rangeRequestReaders.indexOf(D);m>=0&&this._rangeRequestReaders.splice(m,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new y(this._manager,this._source),this._fullRequestReader}getRangeReader(D,m){const u=new U(this._manager,D,m);return u.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(u),u}cancelAllRequests(D){var m;(m=this._fullRequestReader)==null||m.cancel(D);for(const u of this._rangeRequestReaders.slice(0))u.cancel(D)}}t.PDFNetworkStream=C;class y{constructor(D,m){this._manager=D;const u={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._fullRequestId=D.requestFull(u),this._headersReceivedCapability=new e.PromiseCapability,this._disableRange=m.disableRange||!1,this._contentLength=m.length,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const D=this._fullRequestId,m=this._manager.getRequestXhr(D),u=w=>m.getResponseHeader(w),{allowRangeRequests:i,suggestedLength:_}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=_||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(u),this._isRangeSupported&&this._manager.abortRequest(D),this._headersReceivedCapability.resolve()}_onDone(D){if(D&&(this._requests.length>0?this._requests.shift().resolve({value:D.chunk,done:!1}):this._cachedChunks.push(D.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(D){this._storedError=(0,g.createResponseStatusError)(D,this._url),this._headersReceivedCapability.reject(this._storedError);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(D){var m;(m=this.onProgress)==null||m.call(this,{loaded:D.loaded,total:D.lengthComputable?D.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const D=new e.PromiseCapability;return this._requests.push(D),D.promise}cancel(D){this._done=!0,this._headersReceivedCapability.reject(D);for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class U{constructor(D,m,u){this._manager=D;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=D.url,this._requestId=D.requestRange(m,u,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var D;(D=this.onClosed)==null||D.call(this,this)}_onDone(D){const m=D.chunk;this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunk=m,this._done=!0;for(const u of this._requests)u.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(D){this._storedError=(0,g.createResponseStatusError)(D,this._url);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(D){var m;this.isStreamingSupported||(m=this.onProgress)==null||m.call(this,{loaded:D.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const D=new e.PromiseCapability;return this._requests.push(D),D.promise}cancel(D){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var e=c(1),g=c(22);function P(U,x,D){return{method:"GET",headers:U,signal:D.signal,mode:"cors",credentials:x?"include":"same-origin",redirect:"follow"}}function M(U){const x=new Headers;for(const D in U){const m=U[D];m!==void 0&&x.append(D,m)}return x}function G(U){return U instanceof Uint8Array?U.buffer:U instanceof ArrayBuffer?U:((0,e.warn)(`getArrayBuffer - unexpected data format: ${U}`),new Uint8Array(U).buffer)}class S{constructor(x){this.source=x,this.isHttp=/^https?:/i.test(x.url),this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x;return((x=this._fullRequestReader)==null?void 0:x._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new C(this),this._fullRequestReader}getRangeReader(x,D){if(D<=this._progressiveDataLength)return null;const m=new y(this,x,D);return this._rangeRequestReaders.push(m),m}cancelAllRequests(x){var D;(D=this._fullRequestReader)==null||D.cancel(x);for(const m of this._rangeRequestReaders.slice(0))m.cancel(x)}}t.PDFFetchStream=S;class C{constructor(x){this._stream=x,this._reader=null,this._loaded=0,this._filename=null;const D=x.source;this._withCredentials=D.withCredentials||!1,this._contentLength=D.length,this._headersCapability=new e.PromiseCapability,this._disableRange=D.disableRange||!1,this._rangeChunkSize=D.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!D.disableStream,this._isRangeSupported=!D.disableRange,this._headers=M(this._stream.httpHeaders);const m=D.url;fetch(m,P(this._headers,this._withCredentials,this._abortController)).then(u=>{if(!(0,g.validateResponseStatus)(u.status))throw(0,g.createResponseStatusError)(u.status,m);this._reader=u.body.getReader(),this._headersCapability.resolve();const i=F=>u.headers.get(F),{allowRangeRequests:_,suggestedLength:w}=(0,g.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=w||this._contentLength,this._filename=(0,g.extractFilenameFromHeader)(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._headersCapability.promise;const{value:x,done:D}=await this._reader.read();return D?{value:x,done:D}:(this._loaded+=x.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded,total:this._contentLength}),{value:G(x),done:!1})}cancel(x){var D;(D=this._reader)==null||D.cancel(x),this._abortController.abort()}}class y{constructor(x,D,m){this._stream=x,this._reader=null,this._loaded=0;const u=x.source;this._withCredentials=u.withCredentials||!1,this._readCapability=new e.PromiseCapability,this._isStreamingSupported=!u.disableStream,this._abortController=new AbortController,this._headers=M(this._stream.httpHeaders),this._headers.append("Range",`bytes=${D}-${m-1}`);const i=u.url;fetch(i,P(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,g.validateResponseStatus)(_.status))throw(0,g.createResponseStatusError)(_.status,i);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var m;await this._readCapability.promise;const{value:x,done:D}=await this._reader.read();return D?{value:x,done:D}:(this._loaded+=x.byteLength,(m=this.onProgress)==null||m.call(this,{loaded:this._loaded}),{value:G(x),done:!1})}cancel(x){var D;(D=this._reader)==null||D.cancel(x),this._abortController.abort()}}},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=u,t.updateTextLayer=i;var e=c(1),g=c(6);const P=1e5,M=30,G=.8,S=new Map;function C(_,w){let F;if(w&&e.FeatureTest.isOffscreenCanvasSupported)F=new OffscreenCanvas(_,_).getContext("2d",{alpha:!1});else{const b=document.createElement("canvas");b.width=b.height=_,F=b.getContext("2d",{alpha:!1})}return F}function y(_,w){const F=S.get(_);if(F)return F;const b=C(M,w);b.font=`${M}px ${_}`;const n=b.measureText("");let l=n.fontBoundingBoxAscent,h=Math.abs(n.fontBoundingBoxDescent);if(l){const p=l/(l+h);return S.set(_,p),b.canvas.width=b.canvas.height=0,p}b.strokeStyle="red",b.clearRect(0,0,M,M),b.strokeText("g",0,0);let r=b.getImageData(0,0,M,M).data;h=0;for(let p=r.length-1-3;p>=0;p-=4)if(r[p]>0){h=Math.ceil(p/4/M);break}b.clearRect(0,0,M,M),b.strokeText("A",0,M),r=b.getImageData(0,0,M,M).data,l=0;for(let p=0,O=r.length;p<O;p+=4)if(r[p]>0){l=M-Math.floor(p/4/M);break}if(b.canvas.width=b.canvas.height=0,l){const p=l/(l+h);return S.set(_,p),p}return S.set(_,G),G}function U(_,w,F){const b=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:w.str!=="",hasEOL:w.hasEOL,fontSize:0};_._textDivs.push(b);const l=e.Util.transform(_._transform,w.transform);let h=Math.atan2(l[1],l[0]);const r=F[w.fontName];r.vertical&&(h+=Math.PI/2);const p=Math.hypot(l[2],l[3]),O=p*y(r.fontFamily,_._isOffscreenCanvasSupported);let o,W;h===0?(o=l[4],W=l[5]-O):(o=l[4]+O*Math.sin(h),W=l[5]-O*Math.cos(h));const $="calc(var(--scale-factor)*",J=b.style;_._container===_._rootContainer?(J.left=`${(100*o/_._pageWidth).toFixed(2)}%`,J.top=`${(100*W/_._pageHeight).toFixed(2)}%`):(J.left=`${$}${o.toFixed(2)}px)`,J.top=`${$}${W.toFixed(2)}px)`),J.fontSize=`${$}${p.toFixed(2)}px)`,J.fontFamily=r.fontFamily,n.fontSize=p,b.setAttribute("role","presentation"),b.textContent=w.str,b.dir=w.dir,_._fontInspectorEnabled&&(b.dataset.fontName=w.fontName),h!==0&&(n.angle=h*(180/Math.PI));let Q=!1;if(w.str.length>1)Q=!0;else if(w.str!==" "&&w.transform[0]!==w.transform[3]){const tt=Math.abs(w.transform[0]),dt=Math.abs(w.transform[3]);tt!==dt&&Math.max(tt,dt)/Math.min(tt,dt)>1.5&&(Q=!0)}Q&&(n.canvasWidth=r.vertical?w.height:w.width),_._textDivProperties.set(b,n),_._isReadableStream&&_._layoutText(b)}function x(_){const{div:w,scale:F,properties:b,ctx:n,prevFontSize:l,prevFontFamily:h}=_,{style:r}=w;let p="";if(b.canvasWidth!==0&&b.hasText){const{fontFamily:O}=r,{canvasWidth:o,fontSize:W}=b;(l!==W||h!==O)&&(n.font=`${W*F}px ${O}`,_.prevFontSize=W,_.prevFontFamily=O);const{width:$}=n.measureText(w.textContent);$>0&&(p=`scaleX(${o*F/$})`)}b.angle!==0&&(p=`rotate(${b.angle}deg) ${p}`),p.length>0&&(r.transform=p)}function D(_){if(_._canceled)return;const w=_._textDivs,F=_._capability;if(w.length>P){F.resolve();return}if(!_._isReadableStream)for(const n of w)_._layoutText(n);F.resolve()}class m{constructor({textContentSource:w,container:F,viewport:b,textDivs:n,textDivProperties:l,textContentItemsStr:h,isOffscreenCanvasSupported:r}){var $;this._textContentSource=w,this._isReadableStream=w instanceof ReadableStream,this._container=this._rootContainer=F,this._textDivs=n||[],this._textContentItemsStr=h||[],this._isOffscreenCanvasSupported=r,this._fontInspectorEnabled=!!(($=globalThis.FontInspector)!=null&&$.enabled),this._reader=null,this._textDivProperties=l||new WeakMap,this._canceled=!1,this._capability=new e.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:b.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:C(0,r)};const{pageWidth:p,pageHeight:O,pageX:o,pageY:W}=b.rawDims;this._transform=[1,0,0,-1,-o,W+O],this._pageWidth=p,this._pageHeight=O,(0,g.setLayerDimensions)(F,b),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new e.AbortException("TextLayer task cancelled."))}_processItems(w,F){for(const b of w){if(b.str===void 0){if(b.type==="beginMarkedContentProps"||b.type==="beginMarkedContent"){const n=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),b.id!==null&&this._container.setAttribute("id",`${b.id}`),n.append(this._container)}else b.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(b.str),U(this,b,F)}}_layoutText(w){const F=this._layoutTextParams.properties=this._textDivProperties.get(w);if(this._layoutTextParams.div=w,x(this._layoutTextParams),F.hasText&&this._container.append(w),F.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),this._container.append(b)}}_render(){const w=new e.PromiseCapability;let F=Object.create(null);if(this._isReadableStream){const b=()=>{this._reader.read().then(({value:n,done:l})=>{if(l){w.resolve();return}Object.assign(F,n.styles),this._processItems(n.items,F),b()},w.reject)};this._reader=this._textContentSource.getReader(),b()}else if(this._textContentSource){const{items:b,styles:n}=this._textContentSource;this._processItems(b,n),w.resolve()}else throw new Error('No "textContentSource" parameter specified.');w.promise.then(()=>{F=null,D(this)},this._capability.reject)}}t.TextLayerRenderTask=m;function u(_){!_.textContentSource&&(_.textContent||_.textContentStream)&&((0,g.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),_.textContentSource=_.textContent||_.textContentStream);const{container:w,viewport:F}=_,b=getComputedStyle(w),n=b.getPropertyValue("visibility"),l=parseFloat(b.getPropertyValue("--scale-factor"));n==="visible"&&(!l||Math.abs(l-F.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const h=new m(_);return h._render(),h}function i({container:_,viewport:w,textDivs:F,textDivProperties:b,isOffscreenCanvasSupported:n,mustRotate:l=!0,mustRescale:h=!0}){if(l&&(0,g.setLayerDimensions)(_,{rotation:w.rotation}),h){const r=C(0,n),O={prevFontSize:null,prevFontFamily:null,div:null,scale:w.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:r};for(const o of F)O.properties=b.get(o),O.div=o,x(O)}}},(L,t,c)=>{var C,y,U,x,D,m,u,i,_,ve,F,qe,n,ye,h,Se;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var e=c(1),g=c(5),P=c(28),M=c(29),G=c(6);const p=class{constructor(o){Z(this,_);Z(this,F);Z(this,n);Z(this,h);Z(this,C,void 0);Z(this,y,!1);Z(this,U,this.pointerup.bind(this));Z(this,x,this.pointerdown.bind(this));Z(this,D,new Map);Z(this,m,!1);Z(this,u,!1);Z(this,i,void 0);p._initialized||(p._initialized=!0,P.FreeTextEditor.initialize(o.l10n),M.InkEditor.initialize(o.l10n)),o.uiManager.registerEditorTypes([P.FreeTextEditor,M.InkEditor]),pt(this,i,o.uiManager),this.pageIndex=o.pageIndex,this.div=o.div,pt(this,C,o.accessibilityManager),A(this,i).addLayer(this)}get isEmpty(){return A(this,D).size===0}updateToolbar(o){A(this,i).updateToolbar(o)}updateMode(o=A(this,i).getMode()){st(this,h,Se).call(this),o===e.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),A(this,i).unselectAll(),o!==e.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",o===e.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",o===e.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(o){if(!o&&A(this,i).getMode()!==e.AnnotationEditorType.INK)return;if(!o){for(const $ of A(this,D).values())if($.isEmpty()){$.setInBackground();return}}st(this,n,ye).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(o){A(this,i).setEditingState(o)}addCommands(o){A(this,i).addCommands(o)}enable(){this.div.style.pointerEvents="auto";for(const o of A(this,D).values())o.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const o of A(this,D).values())o.disableEditing();st(this,h,Se).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(o){A(this,i).getActive()!==o&&A(this,i).setActiveEditor(o)}enableClick(){this.div.addEventListener("pointerdown",A(this,x)),this.div.addEventListener("pointerup",A(this,U))}disableClick(){this.div.removeEventListener("pointerdown",A(this,x)),this.div.removeEventListener("pointerup",A(this,U))}attach(o){A(this,D).set(o.id,o)}detach(o){var W;A(this,D).delete(o.id),(W=A(this,C))==null||W.removePointerInTextLayer(o.contentDiv)}remove(o){A(this,i).removeEditor(o),this.detach(o),o.div.style.display="none",setTimeout(()=>{o.div.style.display="",o.div.remove(),o.isAttachedToDOM=!1,document.activeElement===document.body&&A(this,i).focusMainContainer()},0),A(this,u)||this.addInkEditorIfNeeded(!1)}add(o){if(st(this,_,ve).call(this,o),A(this,i).addEditor(o),this.attach(o),!o.isAttachedToDOM){const W=o.render();this.div.append(W),o.isAttachedToDOM=!0}this.moveEditorInDOM(o),o.onceAdded(),A(this,i).addToAnnotationStorage(o)}moveEditorInDOM(o){var W;(W=A(this,C))==null||W.moveElementInDOM(this.div,o.div,o.contentDiv,!0)}addOrRebuild(o){o.needsToBeRebuilt()?o.rebuild():this.add(o)}addANewEditor(o){const W=()=>{this.addOrRebuild(o)},$=()=>{o.remove()};this.addCommands({cmd:W,undo:$,mustExec:!0})}addUndoableEditor(o){const W=()=>{this.addOrRebuild(o)},$=()=>{o.remove()};this.addCommands({cmd:W,undo:$,mustExec:!1})}getNextId(){return A(this,i).getId()}deserialize(o){switch(o.annotationType){case e.AnnotationEditorType.FREETEXT:return P.FreeTextEditor.deserialize(o,this,A(this,i));case e.AnnotationEditorType.INK:return M.InkEditor.deserialize(o,this,A(this,i))}return null}setSelected(o){A(this,i).setSelected(o)}toggleSelected(o){A(this,i).toggleSelected(o)}isSelected(o){return A(this,i).isSelected(o)}unselect(o){A(this,i).unselect(o)}pointerup(o){const{isMac:W}=e.FeatureTest.platform;if(!(o.button!==0||o.ctrlKey&&W)&&o.target===this.div&&A(this,m)){if(pt(this,m,!1),!A(this,y)){pt(this,y,!0);return}st(this,n,ye).call(this,o)}}pointerdown(o){const{isMac:W}=e.FeatureTest.platform;if(o.button!==0||o.ctrlKey&&W||o.target!==this.div)return;pt(this,m,!0);const $=A(this,i).getActive();pt(this,y,!$||$.isEmpty())}drop(o){const W=o.dataTransfer.getData("text/plain"),$=A(this,i).getEditor(W);if(!$)return;o.preventDefault(),o.dataTransfer.dropEffect="move",st(this,_,ve).call(this,$);const J=this.div.getBoundingClientRect(),Q=o.clientX-J.x,tt=o.clientY-J.y;$.translate(Q-$.startX,tt-$.startY),this.moveEditorInDOM($),$.div.focus()}dragover(o){o.preventDefault()}destroy(){var o,W;((o=A(this,i).getActive())==null?void 0:o.parent)===this&&A(this,i).setActiveEditor(null);for(const $ of A(this,D).values())(W=A(this,C))==null||W.removePointerInTextLayer($.contentDiv),$.setParent(null),$.isAttachedToDOM=!1,$.div.remove();this.div=null,A(this,D).clear(),A(this,i).removeLayer(this)}render({viewport:o}){this.viewport=o,(0,G.setLayerDimensions)(this.div,o),(0,g.bindEvents)(this,this.div,["dragover","drop"]);for(const W of A(this,i).getEditors(this.pageIndex))this.add(W);this.updateMode()}update({viewport:o}){A(this,i).commitOrRemove(),this.viewport=o,(0,G.setLayerDimensions)(this.div,{rotation:o.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:o,pageHeight:W}=this.viewport.rawDims;return[o,W]}};let S=p;C=new WeakMap,y=new WeakMap,U=new WeakMap,x=new WeakMap,D=new WeakMap,m=new WeakMap,u=new WeakMap,i=new WeakMap,_=new WeakSet,ve=function(o){var W;o.parent!==this&&(this.attach(o),(W=o.parent)==null||W.detach(o),o.setParent(this),o.div&&o.isAttachedToDOM&&(o.div.remove(),this.div.append(o.div)))},F=new WeakSet,qe=function(o){switch(A(this,i).getMode()){case e.AnnotationEditorType.FREETEXT:return new P.FreeTextEditor(o);case e.AnnotationEditorType.INK:return new M.InkEditor(o)}return null},n=new WeakSet,ye=function(o){const W=this.getNextId(),$=st(this,F,qe).call(this,{parent:this,id:W,x:o.offsetX,y:o.offsetY,uiManager:A(this,i)});return $&&this.add($),$},h=new WeakSet,Se=function(){pt(this,u,!0);for(const o of A(this,D).values())o.isEmpty()&&o.remove();pt(this,u,!1)},Ot(S,"_initialized",!1),t.AnnotationEditorLayer=S},(L,t,c)=>{var G,S,C,y,U,x,D,m,u,i,Ge,w,Ve,b,ze,l,Ee;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var e=c(1),g=c(5),P=c(4);const r=class extends P.AnnotationEditor{constructor(o){super({...o,name:"freeTextEditor"});Z(this,i);Z(this,w);Z(this,b);Z(this,l);Z(this,G,this.editorDivBlur.bind(this));Z(this,S,this.editorDivFocus.bind(this));Z(this,C,this.editorDivInput.bind(this));Z(this,y,this.editorDivKeydown.bind(this));Z(this,U,void 0);Z(this,x,"");Z(this,D,`${this.id}-editor`);Z(this,m,!1);Z(this,u,void 0);pt(this,U,o.color||r._defaultColor||P.AnnotationEditor._defaultLineColor),pt(this,u,o.fontSize||r._defaultFontSize)}static initialize(o){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map($=>[$,o.get($)]));const W=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(W.getPropertyValue("--freetext-padding"))}static updateDefaultParams(o,W){switch(o){case e.AnnotationEditorParamsType.FREETEXT_SIZE:r._defaultFontSize=W;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:r._defaultColor=W;break}}updateParams(o,W){switch(o){case e.AnnotationEditorParamsType.FREETEXT_SIZE:st(this,i,Ge).call(this,W);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:st(this,w,Ve).call(this,W);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,r._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,r._defaultColor||P.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,A(this,u)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,A(this,U)]]}getInitialTranslation(){const o=this.parentScale;return[-r._internalPadding*o,-(r._internalPadding+A(this,u))*o]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",A(this,y)),this.editorDiv.addEventListener("focus",A(this,S)),this.editorDiv.addEventListener("blur",A(this,G)),this.editorDiv.addEventListener("input",A(this,C)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",A(this,D)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",A(this,y)),this.editorDiv.removeEventListener("focus",A(this,S)),this.editorDiv.removeEventListener("blur",A(this,G)),this.editorDiv.removeEventListener("input",A(this,C)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(o){super.focusin(o),o.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),A(this,m)||(pt(this,m,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),pt(this,x,st(this,b,ze).call(this).trimEnd()),st(this,l,Ee).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(o){this.enableEditMode(),this.editorDiv.focus()}keydown(o){o.target===this.div&&o.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(o){r._keyboardManager.exec(this,o)}editorDivFocus(o){this.isEditing=!0}editorDivBlur(o){this.isEditing=!1}editorDivInput(o){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let o,W;this.width&&(o=this.x,W=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",A(this,D)),this.enableEditing(),r._l10nPromise.get("editor_free_text2_aria_label").then(J=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("aria-label",J)}),r._l10nPromise.get("free_text2_default_content").then(J=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("default-content",J)}),this.editorDiv.contentEditable=!0;const{style:$}=this.editorDiv;if($.fontSize=`calc(${A(this,u)}px * var(--scale-factor))`,$.color=A(this,U),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,g.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[J,Q]=this.parentDimensions;this.setAt(o*J,W*Q,this.width*J,this.height*Q);for(const tt of A(this,x).split(`
`)){const dt=document.createElement("div");dt.append(tt?document.createTextNode(tt):document.createElement("br")),this.editorDiv.append(dt)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(o,W,$){const J=super.deserialize(o,W,$);return pt(J,u,o.fontSize),pt(J,U,e.Util.makeHexColor(...o.color)),pt(J,x,o.value),J}serialize(){if(this.isEmpty())return null;const o=r._internalPadding*this.parentScale,W=this.getRect(o,o),$=P.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:A(this,U));return{annotationType:e.AnnotationEditorType.FREETEXT,color:$,fontSize:A(this,u),value:A(this,x),pageIndex:this.pageIndex,rect:W,rotation:this.rotation}}};let M=r;G=new WeakMap,S=new WeakMap,C=new WeakMap,y=new WeakMap,U=new WeakMap,x=new WeakMap,D=new WeakMap,m=new WeakMap,u=new WeakMap,i=new WeakSet,Ge=function(o){const W=J=>{this.editorDiv.style.fontSize=`calc(${J}px * var(--scale-factor))`,this.translate(0,-(J-A(this,u))*this.parentScale),pt(this,u,J),st(this,l,Ee).call(this)},$=A(this,u);this.addCommands({cmd:()=>{W(o)},undo:()=>{W($)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,Ve=function(o){const W=A(this,U);this.addCommands({cmd:()=>{pt(this,U,this.editorDiv.style.color=o)},undo:()=>{pt(this,U,this.editorDiv.style.color=W)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},b=new WeakSet,ze=function(){const o=this.editorDiv.getElementsByTagName("div");if(o.length===0)return this.editorDiv.innerText;const W=[];for(const $ of o)W.push($.innerText.replace(/\r\n?|\n/,""));return W.join(`
`)},l=new WeakSet,Ee=function(){const[o,W]=this.parentDimensions;let $;if(this.isAttachedToDOM)$=this.div.getBoundingClientRect();else{const{currentLayer:J,div:Q}=this,tt=Q.style.display;Q.style.display="hidden",J.div.append(this.div),$=Q.getBoundingClientRect(),Q.remove(),Q.style.display=tt}this.width=$.width/o,this.height=$.height/W},Ot(M,"_freeTextDefaultContent",""),Ot(M,"_l10nPromise"),Ot(M,"_internalPadding",0),Ot(M,"_defaultColor",null),Ot(M,"_defaultFontSize",10),Ot(M,"_keyboardManager",new g.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],r.prototype.commitOrRemove]])),Ot(M,"_type","freetext"),t.FreeTextEditor=M},(L,t,c)=>{var C,y,U,x,D,m,u,i,_,w,F,b,n,l,h,Xe,p,$e,o,Ye,$,Ke,Q,we,dt,Je,ht,Qe,vt,Ze,gt,zt,d,Ce,E,oe,I,le,N,Qt,H,Te,a,ce,T,Pe,X,tn,K,en,lt,nn,rt,ke,ft,he,yt,Zt,Y,xe;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return P.fitCurve}});var e=c(1),g=c(4),P=c(30),M=c(5);const G=16,Et=class extends g.AnnotationEditor{constructor(R){super({...R,name:"inkEditor"});Z(this,h);Z(this,p);Z(this,o);Z(this,$);Z(this,Q);Z(this,dt);Z(this,ht);Z(this,vt);Z(this,gt);Z(this,d);Z(this,E);Z(this,I);Z(this,N);Z(this,H);Z(this,a);Z(this,X);Z(this,K);Z(this,lt);Z(this,rt);Z(this,ft);Z(this,yt);Z(this,Y);Z(this,C,0);Z(this,y,0);Z(this,U,0);Z(this,x,this.canvasPointermove.bind(this));Z(this,D,this.canvasPointerleave.bind(this));Z(this,m,this.canvasPointerup.bind(this));Z(this,u,this.canvasPointerdown.bind(this));Z(this,i,!1);Z(this,_,!1);Z(this,w,null);Z(this,F,null);Z(this,b,0);Z(this,n,0);Z(this,l,null);this.color=R.color||null,this.thickness=R.thickness||null,this.opacity=R.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(R){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(B=>[B,R.get(B)]))}static updateDefaultParams(R,B){switch(R){case e.AnnotationEditorParamsType.INK_THICKNESS:Et._defaultThickness=B;break;case e.AnnotationEditorParamsType.INK_COLOR:Et._defaultColor=B;break;case e.AnnotationEditorParamsType.INK_OPACITY:Et._defaultOpacity=B/100;break}}updateParams(R,B){switch(R){case e.AnnotationEditorParamsType.INK_THICKNESS:st(this,h,Xe).call(this,B);break;case e.AnnotationEditorParamsType.INK_COLOR:st(this,p,$e).call(this,B);break;case e.AnnotationEditorParamsType.INK_OPACITY:st(this,o,Ye).call(this,B);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,Et._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,Et._defaultColor||g.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(Et._defaultOpacity*100)]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Et._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||Et._defaultColor||g.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Et._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(st(this,E,oe).call(this),st(this,I,le).call(this)),this.isAttachedToDOM||(this.parent.add(this),st(this,N,Qt).call(this)),st(this,yt,Zt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,A(this,F).disconnect(),pt(this,F,null),super.remove())}setParent(R){!this.parent&&R?this._uiManager.removeShouldRescale(this):this.parent&&R===null&&this._uiManager.addShouldRescale(this),super.setParent(R)}onScaleChanging(){const[R,B]=this.parentDimensions,ct=this.width*R,bt=this.height*B;this.setDimensions(ct,bt)}enableEditMode(){A(this,i)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",A(this,u)),this.canvas.addEventListener("pointerup",A(this,m)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",A(this,u)),this.canvas.removeEventListener("pointerup",A(this,m)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){A(this,i)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),pt(this,i,!0),this.div.classList.add("disabled"),st(this,yt,Zt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(R){super.focusin(R),this.enableEditMode()}canvasPointerdown(R){R.button!==0||!this.isInEditMode()||A(this,i)||(this.setInForeground(),R.type!=="mouse"&&this.div.focus(),R.stopPropagation(),this.canvas.addEventListener("pointerleave",A(this,D)),this.canvas.addEventListener("pointermove",A(this,x)),st(this,dt,Je).call(this,R.offsetX,R.offsetY))}canvasPointermove(R){R.stopPropagation(),st(this,ht,Qe).call(this,R.offsetX,R.offsetY)}canvasPointerup(R){R.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(R.stopPropagation(),st(this,d,Ce).call(this,R),this.setInBackground())}canvasPointerleave(R){st(this,d,Ce).call(this,R),this.setInBackground()}render(){if(this.div)return this.div;let R,B;this.width&&(R=this.x,B=this.y),super.render(),Et._l10nPromise.get("editor_ink2_aria_label").then(Ft=>{var xt;return(xt=this.div)==null?void 0:xt.setAttribute("aria-label",Ft)});const[ct,bt,Tt,kt]=st(this,$,Ke).call(this);if(this.setAt(ct,bt,0,0),this.setDims(Tt,kt),st(this,E,oe).call(this),this.width){const[Ft,xt]=this.parentDimensions;this.setAt(R*Ft,B*xt,this.width*Ft,this.height*xt),pt(this,_,!0),st(this,N,Qt).call(this),this.setDims(this.width*Ft,this.height*xt),st(this,gt,zt).call(this),st(this,Y,xe).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return st(this,I,le).call(this),this.div}setDimensions(R,B){const ct=Math.round(R),bt=Math.round(B);if(A(this,b)===ct&&A(this,n)===bt)return;pt(this,b,ct),pt(this,n,bt),this.canvas.style.visibility="hidden",A(this,C)&&Math.abs(A(this,C)-R/B)>.01&&(B=Math.ceil(R/A(this,C)),this.setDims(R,B));const[Tt,kt]=this.parentDimensions;this.width=R/Tt,this.height=B/kt,A(this,i)&&st(this,H,Te).call(this,R,B),st(this,N,Qt).call(this),st(this,gt,zt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(R,B,ct){var Dt,It;const bt=super.deserialize(R,B,ct);bt.thickness=R.thickness,bt.color=e.Util.makeHexColor(...R.color),bt.opacity=R.opacity;const[Tt,kt]=bt.pageDimensions,Ft=bt.width*Tt,xt=bt.height*kt,Mt=bt.parentScale,Pt=R.thickness/2;pt(bt,C,Ft/xt),pt(bt,i,!0),pt(bt,b,Math.round(Ft)),pt(bt,n,Math.round(xt));for(const{bezier:Rt}of R.paths){const jt=[];bt.paths.push(jt);let Ut=Mt*(Rt[0]-Pt),Ht=Mt*(xt-Rt[1]-Pt);for(let Nt=2,Bt=Rt.length;Nt<Bt;Nt+=6){const Gt=Mt*(Rt[Nt]-Pt),Xt=Mt*(xt-Rt[Nt+1]-Pt),ne=Mt*(Rt[Nt+2]-Pt),se=Mt*(xt-Rt[Nt+3]-Pt),Me=Mt*(Rt[Nt+4]-Pt),De=Mt*(xt-Rt[Nt+5]-Pt);jt.push([[Ut,Ht],[Gt,Xt],[ne,se],[Me,De]]),Ut=Me,Ht=De}const qt=st(this,T,Pe).call(this,jt);bt.bezierPath2D.push(qt)}const Lt=st(Dt=bt,rt,ke).call(Dt);return pt(bt,U,Math.max(G,Lt[2]-Lt[0])),pt(bt,y,Math.max(G,Lt[3]-Lt[1])),st(It=bt,H,Te).call(It,Ft,xt),bt}serialize(){if(this.isEmpty())return null;const R=this.getRect(0,0),B=this.rotation%180===0?R[3]-R[1]:R[2]-R[0],ct=g.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:ct,thickness:this.thickness,opacity:this.opacity,paths:st(this,X,tn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,B),pageIndex:this.pageIndex,rect:R,rotation:this.rotation}}};let S=Et;C=new WeakMap,y=new WeakMap,U=new WeakMap,x=new WeakMap,D=new WeakMap,m=new WeakMap,u=new WeakMap,i=new WeakMap,_=new WeakMap,w=new WeakMap,F=new WeakMap,b=new WeakMap,n=new WeakMap,l=new WeakMap,h=new WeakSet,Xe=function(R){const B=this.thickness;this.addCommands({cmd:()=>{this.thickness=R,st(this,yt,Zt).call(this)},undo:()=>{this.thickness=B,st(this,yt,Zt).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},p=new WeakSet,$e=function(R){const B=this.color;this.addCommands({cmd:()=>{this.color=R,st(this,gt,zt).call(this)},undo:()=>{this.color=B,st(this,gt,zt).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},o=new WeakSet,Ye=function(R){R/=100;const B=this.opacity;this.addCommands({cmd:()=>{this.opacity=R,st(this,gt,zt).call(this)},undo:()=>{this.opacity=B,st(this,gt,zt).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$=new WeakSet,Ke=function(){const{parentRotation:R,parentDimensions:[B,ct]}=this;switch(R){case 90:return[0,ct,ct,B];case 180:return[B,ct,B,ct];case 270:return[B,0,ct,B];default:return[0,0,B,ct]}},Q=new WeakSet,we=function(){const{ctx:R,color:B,opacity:ct,thickness:bt,parentScale:Tt,scaleFactor:kt}=this;R.lineWidth=bt*Tt/kt,R.lineCap="round",R.lineJoin="round",R.miterLimit=10,R.strokeStyle=`${B}${(0,M.opacityToHex)(ct)}`},dt=new WeakSet,Je=function(R,B){this.isEditing=!0,A(this,_)||(pt(this,_,!0),st(this,N,Qt).call(this),this.thickness||(this.thickness=Et._defaultThickness),this.color||(this.color=Et._defaultColor||g.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Et._defaultOpacity)),this.currentPath.push([R,B]),pt(this,w,null),st(this,Q,we).call(this),this.ctx.beginPath(),this.ctx.moveTo(R,B),pt(this,l,()=>{A(this,l)&&(A(this,w)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):st(this,gt,zt).call(this),this.ctx.lineTo(...A(this,w)),pt(this,w,null),this.ctx.stroke()),window.requestAnimationFrame(A(this,l)))}),window.requestAnimationFrame(A(this,l))},ht=new WeakSet,Qe=function(R,B){const[ct,bt]=this.currentPath.at(-1);R===ct&&B===bt||(this.currentPath.push([R,B]),pt(this,w,[R,B]))},vt=new WeakSet,Ze=function(R,B){var Mt;this.ctx.closePath(),pt(this,l,null),R=Math.min(Math.max(R,0),this.canvas.width),B=Math.min(Math.max(B,0),this.canvas.height);const[ct,bt]=this.currentPath.at(-1);(R!==ct||B!==bt)&&this.currentPath.push([R,B]);let Tt;if(this.currentPath.length!==1)Tt=(0,P.fitCurve)(this.currentPath,30,null);else{const Pt=[R,B];Tt=[[Pt,Pt.slice(),Pt.slice(),Pt]]}const kt=st(Mt=Et,T,Pe).call(Mt,Tt);this.currentPath.length=0;const Ft=()=>{this.paths.push(Tt),this.bezierPath2D.push(kt),this.rebuild()},xt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(st(this,E,oe).call(this),st(this,I,le).call(this)),st(this,yt,Zt).call(this))};this.addCommands({cmd:Ft,undo:xt,mustExec:!0})},gt=new WeakSet,zt=function(){if(this.isEmpty()){st(this,a,ce).call(this);return}st(this,Q,we).call(this);const{canvas:R,ctx:B}=this;B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,R.width,R.height),st(this,a,ce).call(this);for(const ct of this.bezierPath2D)B.stroke(ct)},d=new WeakSet,Ce=function(R){st(this,vt,Ze).call(this,R.offsetX,R.offsetY),this.canvas.removeEventListener("pointerleave",A(this,D)),this.canvas.removeEventListener("pointermove",A(this,x)),this.addToAnnotationStorage()},E=new WeakSet,oe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Et._l10nPromise.get("editor_ink_canvas_aria_label").then(R=>{var B;return(B=this.canvas)==null?void 0:B.setAttribute("aria-label",R)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},I=new WeakSet,le=function(){pt(this,F,new ResizeObserver(R=>{const B=R[0].contentRect;B.width&&B.height&&this.setDimensions(B.width,B.height)})),A(this,F).observe(this.div)},N=new WeakSet,Qt=function(){if(!A(this,_))return;const[R,B]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*R),this.canvas.height=Math.ceil(this.height*B),st(this,a,ce).call(this)},H=new WeakSet,Te=function(R,B){const ct=st(this,ft,he).call(this),bt=(R-ct)/A(this,U),Tt=(B-ct)/A(this,y);this.scaleFactor=Math.min(bt,Tt)},a=new WeakSet,ce=function(){const R=st(this,ft,he).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+R,this.translationY*this.scaleFactor+R)},T=new WeakSet,Pe=function(R){const B=new Path2D;for(let ct=0,bt=R.length;ct<bt;ct++){const[Tt,kt,Ft,xt]=R[ct];ct===0&&B.moveTo(...Tt),B.bezierCurveTo(kt[0],kt[1],Ft[0],Ft[1],xt[0],xt[1])}return B},X=new WeakSet,tn=function(R,B,ct,bt){const kt=[],Ft=this.thickness/2;let xt,Mt;for(const Pt of this.paths){xt=[],Mt=[];for(let Lt=0,Dt=Pt.length;Lt<Dt;Lt++){const[It,Rt,jt,Ut]=Pt[Lt],Ht=R*(It[0]+B)+Ft,qt=bt-R*(It[1]+ct)-Ft,Nt=R*(Rt[0]+B)+Ft,Bt=bt-R*(Rt[1]+ct)-Ft,Gt=R*(jt[0]+B)+Ft,Xt=bt-R*(jt[1]+ct)-Ft,ne=R*(Ut[0]+B)+Ft,se=bt-R*(Ut[1]+ct)-Ft;Lt===0&&(xt.push(Ht,qt),Mt.push(Ht,qt)),xt.push(Nt,Bt,Gt,Xt,ne,se),st(this,K,en).call(this,Ht,qt,Nt,Bt,Gt,Xt,ne,se,4,Mt)}kt.push({bezier:xt,points:Mt})}return kt},K=new WeakSet,en=function(R,B,ct,bt,Tt,kt,Ft,xt,Mt,Pt){if(st(this,lt,nn).call(this,R,B,ct,bt,Tt,kt,Ft,xt)){Pt.push(Ft,xt);return}for(let Lt=1;Lt<Mt-1;Lt++){const Dt=Lt/Mt,It=1-Dt;let Rt=Dt*R+It*ct,jt=Dt*B+It*bt,Ut=Dt*ct+It*Tt,Ht=Dt*bt+It*kt;const qt=Dt*Tt+It*Ft,Nt=Dt*kt+It*xt;Rt=Dt*Rt+It*Ut,jt=Dt*jt+It*Ht,Ut=Dt*Ut+It*qt,Ht=Dt*Ht+It*Nt,Rt=Dt*Rt+It*Ut,jt=Dt*jt+It*Ht,Pt.push(Rt,jt)}Pt.push(Ft,xt)},lt=new WeakSet,nn=function(R,B,ct,bt,Tt,kt,Ft,xt){const Pt=(3*ct-2*R-Ft)**2,Lt=(3*bt-2*B-xt)**2,Dt=(3*Tt-R-2*Ft)**2,It=(3*kt-B-2*xt)**2;return Math.max(Pt,Dt)+Math.max(Lt,It)<=10},rt=new WeakSet,ke=function(){let R=1/0,B=-1/0,ct=1/0,bt=-1/0;for(const Tt of this.paths)for(const[kt,Ft,xt,Mt]of Tt){const Pt=e.Util.bezierBoundingBox(...kt,...Ft,...xt,...Mt);R=Math.min(R,Pt[0]),ct=Math.min(ct,Pt[1]),B=Math.max(B,Pt[2]),bt=Math.max(bt,Pt[3])}return[R,ct,B,bt]},ft=new WeakSet,he=function(){return A(this,i)?Math.ceil(this.thickness*this.parentScale):0},yt=new WeakSet,Zt=function(R=!1){if(this.isEmpty())return;if(!A(this,i)){st(this,gt,zt).call(this);return}const B=st(this,rt,ke).call(this),ct=st(this,ft,he).call(this);pt(this,U,Math.max(G,B[2]-B[0])),pt(this,y,Math.max(G,B[3]-B[1]));const bt=Math.ceil(ct+A(this,U)*this.scaleFactor),Tt=Math.ceil(ct+A(this,y)*this.scaleFactor),[kt,Ft]=this.parentDimensions;this.width=bt/kt,this.height=Tt/Ft,pt(this,C,bt/Tt),st(this,Y,xe).call(this);const xt=this.translationX,Mt=this.translationY;this.translationX=-B[0],this.translationY=-B[1],st(this,N,Qt).call(this),st(this,gt,zt).call(this),pt(this,b,bt),pt(this,n,Tt),this.setDims(bt,Tt);const Pt=R?ct/this.scaleFactor/2:0;this.translate(xt-this.translationX-Pt,Mt-this.translationY-Pt)},Y=new WeakSet,xe=function(){const{style:R}=this.div;A(this,C)>=1?(R.minHeight=`${G}px`,R.minWidth=`${Math.round(A(this,C)*G)}px`):(R.minWidth=`${G}px`,R.minHeight=`${Math.round(G/A(this,C))}px`)},Z(S,T),Ot(S,"_defaultColor",null),Ot(S,"_defaultOpacity",1),Ot(S,"_defaultThickness",1),Ot(S,"_l10nPromise"),Ot(S,"_type","ink"),t.InkEditor=S},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const e=c(31);t.fitCurve=e},L=>{function t(m,u,i){if(!Array.isArray(m))throw new TypeError("First argument should be an array");if(m.forEach(b=>{if(!Array.isArray(b)||b.some(n=>typeof n!="number")||b.length!==m[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),m=m.filter((b,n)=>n===0||!b.every((l,h)=>l===m[n-1][h])),m.length<2)return[];const _=m.length,w=U(m[1],m[0]),F=U(m[_-2],m[_-1]);return c(m,w,F,u,i)}function c(m,u,i,_,w){var b,n,l,h,r,p,O,o,W,$,J,Q,tt;if(m.length===2)return Q=x.vectorLen(x.subtract(m[0],m[1]))/3,b=[m[0],x.addArrays(m[0],x.mulItems(u,Q)),x.addArrays(m[1],x.mulItems(i,Q)),m[1]],[b];if(n=G(m),[b,h,p]=e(m,n,n,u,i,w),h===0||h<_)return[b];if(h<_*_)for(l=n,r=h,O=p,tt=0;tt<20;tt++){if(l=P(b,m,l),[b,h,p]=e(m,n,l,u,i,w),h<_)return[b];if(p===O){let dt=h/r;if(dt>.9999&&dt<1.0001)break}r=h,O=p}return J=[],o=x.subtract(m[p-1],m[p+1]),o.every(dt=>dt===0)&&(o=x.subtract(m[p-1],m[p]),[o[0],o[1]]=[-o[1],o[0]]),W=x.normalize(o),$=x.mulItems(W,-1),J=J.concat(c(m.slice(0,p+1),u,W,_,w)),J=J.concat(c(m.slice(p),$,i,_,w)),J}function e(m,u,i,_,w,F){var b,n,l;return b=g(m,i,_,w),[n,l]=S(m,b,u),F&&F({bez:b,points:m,params:u,maxErr:n,maxPoint:l}),[b,n,l]}function g(m,u,i,_){var w,F,b,n,l,h,r,p,O,o,W,$,J,Q,tt,dt,ot,ht=m[0],_t=m[m.length-1];for(w=[ht,null,null,_t],F=x.zeros_Xx2x2(u.length),J=0,Q=u.length;J<Q;J++)dt=u[J],ot=1-dt,b=F[J],b[0]=x.mulItems(i,3*dt*(ot*ot)),b[1]=x.mulItems(_,3*ot*(dt*dt));for(n=[[0,0],[0,0]],l=[0,0],J=0,Q=m.length;J<Q;J++)dt=u[J],b=F[J],n[0][0]+=x.dot(b[0],b[0]),n[0][1]+=x.dot(b[0],b[1]),n[1][0]+=x.dot(b[0],b[1]),n[1][1]+=x.dot(b[1],b[1]),tt=x.subtract(m[J],D.q([ht,ht,_t,_t],dt)),l[0]+=x.dot(b[0],tt),l[1]+=x.dot(b[1],tt);return h=n[0][0]*n[1][1]-n[1][0]*n[0][1],r=n[0][0]*l[1]-n[1][0]*l[0],p=l[0]*n[1][1]-l[1]*n[0][1],O=h===0?0:p/h,o=h===0?0:r/h,$=x.vectorLen(x.subtract(ht,_t)),W=1e-6*$,O<W||o<W?(w[1]=x.addArrays(ht,x.mulItems(i,$/3)),w[2]=x.addArrays(_t,x.mulItems(_,$/3))):(w[1]=x.addArrays(ht,x.mulItems(i,O)),w[2]=x.addArrays(_t,x.mulItems(_,o))),w}function P(m,u,i){return i.map((_,w)=>M(m,u[w],_))}function M(m,u,i){var _=x.subtract(D.q(m,i),u),w=D.qprime(m,i),F=x.mulMatrix(_,w),b=x.sum(x.squareItems(w))+2*x.mulMatrix(_,D.qprimeprime(m,i));return b===0?i:i-F/b}function G(m){var u=[],i,_,w;return m.forEach((F,b)=>{i=b?_+x.vectorLen(x.subtract(F,w)):0,u.push(i),_=i,w=F}),u=u.map(F=>F/_),u}function S(m,u,i){var _,w,F,b,n,l,h,r;w=0,F=Math.floor(m.length/2);const p=C(u,10);for(n=0,l=m.length;n<l;n++)h=m[n],r=y(u,i[n],p,10),b=x.subtract(D.q(u,r),h),_=b[0]*b[0]+b[1]*b[1],_>w&&(w=_,F=n);return[w,F]}var C=function(m,u){for(var i,_=[0],w=m[0],F=0,b=1;b<=u;b++)i=D.q(m,b/u),F+=x.vectorLen(x.subtract(i,w)),_.push(F),w=i;return _=_.map(n=>n/F),_};function y(m,u,i,_){if(u<0)return 0;if(u>1)return 1;for(var w,F,b,n,l,h=1;h<=_;h++)if(u<=i[h]){n=(h-1)/_,b=h/_,F=i[h-1],w=i[h],l=(u-F)/(w-F)*(b-n)+n;break}return l}function U(m,u){return x.normalize(x.subtract(m,u))}class x{static zeros_Xx2x2(u){for(var i=[];u--;)i.push([0,0]);return i}static mulItems(u,i){return u.map(_=>_*i)}static mulMatrix(u,i){return u.reduce((_,w,F)=>_+w*i[F],0)}static subtract(u,i){return u.map((_,w)=>_-i[w])}static addArrays(u,i){return u.map((_,w)=>_+i[w])}static addItems(u,i){return u.map(_=>_+i)}static sum(u){return u.reduce((i,_)=>i+_)}static dot(u,i){return x.mulMatrix(u,i)}static vectorLen(u){return Math.hypot(...u)}static divItems(u,i){return u.map(_=>_/i)}static squareItems(u){return u.map(i=>i*i)}static normalize(u){return this.divItems(u,this.vectorLen(u))}}class D{static q(u,i){var _=1-i,w=x.mulItems(u[0],_*_*_),F=x.mulItems(u[1],3*_*_*i),b=x.mulItems(u[2],3*_*i*i),n=x.mulItems(u[3],i*i*i);return x.addArrays(x.addArrays(w,F),x.addArrays(b,n))}static qprime(u,i){var _=1-i,w=x.mulItems(x.subtract(u[1],u[0]),3*_*_),F=x.mulItems(x.subtract(u[2],u[1]),6*_*i),b=x.mulItems(x.subtract(u[3],u[2]),3*i*i);return x.addArrays(x.addArrays(w,F),b)}static qprimeprime(u,i){return x.addArrays(x.mulItems(x.addArrays(x.subtract(u[2],x.mulItems(u[1],2)),u[0]),6*(1-i)),x.mulItems(x.addArrays(x.subtract(u[3],x.mulItems(u[2],2)),u[1]),6*i))}}L.exports=t,L.exports.fitCubic=c,L.exports.createTangent=U},(L,t,c)=>{var gt,Yt,d,sn,q,Fe,V,Re;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var e=c(1),g=c(6),P=c(3),M=c(33),G=c(34);const S=1e3,C=9,y=new WeakSet;function U(H){return{width:H[2]-H[0],height:H[3]-H[1]}}class x{static create(s){switch(s.data.annotationType){case e.AnnotationType.LINK:return new m(s);case e.AnnotationType.TEXT:return new u(s);case e.AnnotationType.WIDGET:switch(s.data.fieldType){case"Tx":return new _(s);case"Btn":return s.data.radioButton?new F(s):s.data.checkBox?new w(s):new b(s);case"Ch":return new n(s)}return new i(s);case e.AnnotationType.POPUP:return new l(s);case e.AnnotationType.FREETEXT:return new r(s);case e.AnnotationType.LINE:return new p(s);case e.AnnotationType.SQUARE:return new O(s);case e.AnnotationType.CIRCLE:return new o(s);case e.AnnotationType.POLYLINE:return new W(s);case e.AnnotationType.CARET:return new J(s);case e.AnnotationType.INK:return new Q(s);case e.AnnotationType.POLYGON:return new $(s);case e.AnnotationType.HIGHLIGHT:return new tt(s);case e.AnnotationType.UNDERLINE:return new dt(s);case e.AnnotationType.SQUIGGLY:return new ot(s);case e.AnnotationType.STRIKEOUT:return new ht(s);case e.AnnotationType.STAMP:return new _t(s);case e.AnnotationType.FILEATTACHMENT:return new vt(s);default:return new D(s)}}}class D{constructor(s,{isRenderable:a=!1,ignoreBorder:v=!1,createQuadrilaterals:T=!1}={}){this.isRenderable=a,this.data=s.data,this.layer=s.layer,this.page=s.page,this.viewport=s.viewport,this.linkService=s.linkService,this.downloadManager=s.downloadManager,this.imageResourcesPath=s.imageResourcesPath,this.renderForms=s.renderForms,this.svgFactory=s.svgFactory,this.annotationStorage=s.annotationStorage,this.enableScripting=s.enableScripting,this.hasJSActions=s.hasJSActions,this._fieldObjects=s.fieldObjects,a&&(this.container=this._createContainer(v)),T&&(this.quadrilaterals=this._createQuadrilaterals(v))}_createContainer(s=!1){const{data:a,page:v,viewport:T}=this,k=document.createElement("section");k.setAttribute("data-annotation-id",a.id),a.noRotate&&k.classList.add("norotate");const{pageWidth:X,pageHeight:nt,pageX:K,pageY:it}=T.rawDims,{width:lt,height:et}=U(a.rect),rt=e.Util.normalizeRect([a.rect[0],v.view[3]-a.rect[1]+v.view[1],a.rect[2],v.view[3]-a.rect[3]+v.view[1]]);if(!s&&a.borderStyle.width>0){k.style.borderWidth=`${a.borderStyle.width}px`;const ft=a.borderStyle.horizontalCornerRadius,wt=a.borderStyle.verticalCornerRadius;if(ft>0||wt>0){const Ct=`calc(${ft}px * var(--scale-factor)) / calc(${wt}px * var(--scale-factor))`;k.style.borderRadius=Ct}else if(this instanceof F){const Ct=`calc(${lt}px * var(--scale-factor)) / calc(${et}px * var(--scale-factor))`;k.style.borderRadius=Ct}switch(a.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:k.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:k.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:k.style.borderBottomStyle="solid";break}const yt=a.borderColor||null;yt?k.style.borderColor=e.Util.makeHexColor(yt[0]|0,yt[1]|0,yt[2]|0):k.style.borderWidth=0}k.style.left=`${100*(rt[0]-K)/X}%`,k.style.top=`${100*(rt[1]-it)/nt}%`;const{rotation:ut}=a;return a.hasOwnCanvas||ut===0?(k.style.width=`${100*lt/X}%`,k.style.height=`${100*et/nt}%`):this.setRotation(ut,k),k}setRotation(s,a=this.container){const{pageWidth:v,pageHeight:T}=this.viewport.rawDims,{width:k,height:X}=U(this.data.rect);let nt,K;s%180===0?(nt=100*k/v,K=100*X/T):(nt=100*X/v,K=100*k/T),a.style.width=`${nt}%`,a.style.height=`${K}%`,a.setAttribute("data-main-rotation",(360-s)%360)}get _commonActions(){const s=(a,v,T)=>{const k=T.detail[a];T.target.style[v]=M.ColorConverters[`${k[0]}_HTML`](k.slice(1))};return(0,e.shadow)(this,"_commonActions",{display:a=>{const v=a.detail.display%2===1;this.container.style.visibility=v?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:v,print:a.detail.display===0||a.detail.display===3})},print:a=>{this.annotationStorage.setValue(this.data.id,{print:a.detail.print})},hidden:a=>{this.container.style.visibility=a.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:a.detail.hidden})},focus:a=>{setTimeout(()=>a.target.focus({preventScroll:!1}),0)},userName:a=>{a.target.title=a.detail.userName},readonly:a=>{a.detail.readonly?a.target.setAttribute("readonly",""):a.target.removeAttribute("readonly")},required:a=>{this._setRequired(a.target,a.detail.required)},bgColor:a=>{s("bgColor","backgroundColor",a)},fillColor:a=>{s("fillColor","backgroundColor",a)},fgColor:a=>{s("fgColor","color",a)},textColor:a=>{s("textColor","color",a)},borderColor:a=>{s("borderColor","borderColor",a)},strokeColor:a=>{s("strokeColor","borderColor",a)},rotation:a=>{const v=a.detail.rotation;this.setRotation(v),this.annotationStorage.setValue(this.data.id,{rotation:v})}})}_dispatchEventFromSandbox(s,a){const v=this._commonActions;for(const T of Object.keys(a.detail)){const k=s[T]||v[T];k==null||k(a)}}_setDefaultPropertiesFromJS(s){if(!this.enableScripting)return;const a=this.annotationStorage.getRawValue(this.data.id);if(!a)return;const v=this._commonActions;for(const[T,k]of Object.entries(a)){const X=v[T];if(X){const nt={detail:{[T]:k},target:s};X(nt),delete a[T]}}}_createQuadrilaterals(s=!1){if(!this.data.quadPoints)return null;const a=[],v=this.data.rect;for(const T of this.data.quadPoints)this.data.rect=[T[2].x,T[2].y,T[1].x,T[1].y],a.push(this._createContainer(s));return this.data.rect=v,a}_createPopup(s,a){let v=this.container;this.quadrilaterals&&(s||(s=this.quadrilaterals),v=this.quadrilaterals[0]),s||(s=document.createElement("div"),s.classList.add("popupTriggerArea"),v.append(s));const k=new h({container:v,trigger:s,color:a.color,titleObj:a.titleObj,modificationDate:a.modificationDate,contentsObj:a.contentsObj,richText:a.richText,hideWrapper:!0}).render();k.style.left="100%",v.append(k)}_renderQuadrilaterals(s){for(const a of this.quadrilaterals)a.classList.add(s);return this.quadrilaterals}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(s,a=null){const v=[];if(this._fieldObjects){const T=this._fieldObjects[s];if(T)for(const{page:k,id:X,exportValues:nt}of T){if(k===-1||X===a)continue;const K=typeof nt=="string"?nt:null,it=document.querySelector(`[data-element-id="${X}"]`);if(it&&!y.has(it)){(0,e.warn)(`_getElementsByName - element not allowed: ${X}`);continue}v.push({id:X,exportValue:K,domElement:it})}return v}for(const T of document.getElementsByName(s)){const{exportValue:k}=T,X=T.getAttribute("data-element-id");X!==a&&y.has(T)&&v.push({id:X,exportValue:k,domElement:T})}return v}}class m extends D{constructor(a,v=null){super(a,{isRenderable:!0,ignoreBorder:!!(v!=null&&v.ignoreBorder),createQuadrilaterals:!0});Z(this,gt);Z(this,d);this.isTooltipOnly=a.data.isTooltipOnly}render(){const{data:a,linkService:v}=this,T=document.createElement("a");T.setAttribute("data-element-id",a.id);let k=!1;return a.url?(v.addLinkAttributes(T,a.url,a.newWindow),k=!0):a.action?(this._bindNamedAction(T,a.action),k=!0):a.attachment?(this._bindAttachment(T,a.attachment),k=!0):a.setOCGState?(st(this,d,sn).call(this,T,a.setOCGState),k=!0):a.dest?(this._bindLink(T,a.dest),k=!0):(a.actions&&(a.actions.Action||a.actions["Mouse Up"]||a.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(T,a),k=!0),a.resetForm?(this._bindResetFormAction(T,a.resetForm),k=!0):this.isTooltipOnly&&!k&&(this._bindLink(T,""),k=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((X,nt)=>{const K=nt===0?T:T.cloneNode();return X.append(K),X}):(this.container.classList.add("linkAnnotation"),k&&this.container.append(T),this.container)}_bindLink(a,v){a.href=this.linkService.getDestinationHash(v),a.onclick=()=>(v&&this.linkService.goToDestination(v),!1),(v||v==="")&&st(this,gt,Yt).call(this)}_bindNamedAction(a,v){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.linkService.executeNamedAction(v),!1),st(this,gt,Yt).call(this)}_bindAttachment(a,v){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>{var T;return(T=this.downloadManager)==null||T.openOrDownloadData(this.container,v.content,v.filename),!1},st(this,gt,Yt).call(this)}_bindJSAction(a,v){a.href=this.linkService.getAnchorUrl("");const T=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const k of Object.keys(v.actions)){const X=T.get(k);X&&(a[X]=()=>{var nt;return(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:v.id,name:k}}),!1})}a.onclick||(a.onclick=()=>!1),st(this,gt,Yt).call(this)}_bindResetFormAction(a,v){const T=a.onclick;if(T||(a.href=this.linkService.getAnchorUrl("")),st(this,gt,Yt).call(this),!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),T||(a.onclick=()=>!1);return}a.onclick=()=>{var et;T==null||T();const{fields:k,refs:X,include:nt}=v,K=[];if(k.length!==0||X.length!==0){const rt=new Set(X);for(const ut of k){const ft=this._fieldObjects[ut]||[];for(const{id:wt}of ft)rt.add(wt)}for(const ut of Object.values(this._fieldObjects))for(const ft of ut)rt.has(ft.id)===nt&&K.push(ft)}else for(const rt of Object.values(this._fieldObjects))K.push(...rt);const it=this.annotationStorage,lt=[];for(const rt of K){const{id:ut}=rt;switch(lt.push(ut),rt.type){case"text":{const wt=rt.defaultValue||"";it.setValue(ut,{value:wt});break}case"checkbox":case"radiobutton":{const wt=rt.defaultValue===rt.exportValues;it.setValue(ut,{value:wt});break}case"combobox":case"listbox":{const wt=rt.defaultValue||"";it.setValue(ut,{value:wt});break}default:continue}const ft=document.querySelector(`[data-element-id="${ut}"]`);if(ft){if(!y.has(ft)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${ut}`);continue}}else continue;ft.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((et=this.linkService.eventBus)==null||et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:lt,name:"ResetForm"}})),!1}}}gt=new WeakSet,Yt=function(){this.container.setAttribute("data-internal-link","")},d=new WeakSet,sn=function(a,v){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.linkService.executeSetOCGState(v),!1),st(this,gt,Yt).call(this)};class u extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a})}render(){this.container.classList.add("textAnnotation");const s=document.createElement("img");return s.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",s.alt="[{{type}} Annotation]",s.dataset.l10nId="text_annotation_type",s.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(s,this.data),this.container.append(s),this.container}}class i extends D{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(s){var a;this.data.hasOwnCanvas&&(((a=s.previousSibling)==null?void 0:a.nodeName)==="CANVAS"&&(s.previousSibling.hidden=!0),s.hidden=!1)}_getKeyModifier(s){const{isWin:a,isMac:v}=e.FeatureTest.platform;return a&&s.ctrlKey||v&&s.metaKey}_setEventListener(s,a,v,T){a.includes("mouse")?s.addEventListener(a,k=>{var X;(X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:v,value:T(k),shift:k.shiftKey,modifier:this._getKeyModifier(k)}})}):s.addEventListener(a,k=>{var X;(X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:v,value:T(k)}})})}_setEventListeners(s,a,v){var T;for(const[k,X]of a)(X==="Action"||(T=this.data.actions)!=null&&T[X])&&this._setEventListener(s,k,X,v)}_setBackgroundColor(s){const a=this.data.backgroundColor||null;s.style.backgroundColor=a===null?"transparent":e.Util.makeHexColor(a[0],a[1],a[2])}_setTextStyle(s){const a=["left","center","right"],{fontColor:v}=this.data.defaultAppearanceData,T=this.data.defaultAppearanceData.fontSize||C,k=s.style;let X;const nt=2,K=it=>Math.round(10*it)/10;if(this.data.multiLine){const it=Math.abs(this.data.rect[3]-this.data.rect[1]-nt),lt=Math.round(it/(e.LINE_FACTOR*T))||1,et=it/lt;X=Math.min(T,K(et/e.LINE_FACTOR))}else{const it=Math.abs(this.data.rect[3]-this.data.rect[1]-nt);X=Math.min(T,K(it/e.LINE_FACTOR))}k.fontSize=`calc(${X}px * var(--scale-factor))`,k.color=e.Util.makeHexColor(v[0],v[1],v[2]),this.data.textAlignment!==null&&(k.textAlign=a[this.data.textAlignment])}_setRequired(s,a){a?s.setAttribute("required",!0):s.removeAttribute("required"),s.setAttribute("aria-required",a)}}class _ extends i{constructor(s){const a=s.renderForms||!s.data.hasAppearance&&!!s.data.fieldValue;super(s,{isRenderable:a})}setPropertyOnSiblings(s,a,v,T){const k=this.annotationStorage;for(const X of this._getElementsByName(s.name,s.id))X.domElement&&(X.domElement[a]=v),k.setValue(X.id,{[T]:v})}render(){var T;const s=this.annotationStorage,a=this.data.id;this.container.classList.add("textWidgetAnnotation");let v=null;if(this.renderForms){const k=s.getValue(a,{value:this.data.fieldValue});let X=k.formattedValue||k.value||"";const nt=s.getValue(a,{charLimit:this.data.maxLen}).charLimit;nt&&X.length>nt&&(X=X.slice(0,nt));const K={userValue:X,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(v=document.createElement("textarea"),v.textContent=X,this.data.doNotScroll&&(v.style.overflowY="hidden")):(v=document.createElement("input"),v.type="text",v.setAttribute("value",X),this.data.doNotScroll&&(v.style.overflowX="hidden")),this.data.hasOwnCanvas&&(v.hidden=!0),y.add(v),v.setAttribute("data-element-id",a),v.disabled=this.data.readOnly,v.name=this.data.fieldName,v.tabIndex=S,this._setRequired(v,this.data.required),nt&&(v.maxLength=nt),v.addEventListener("input",lt=>{s.setValue(a,{value:lt.target.value}),this.setPropertyOnSiblings(v,"value",lt.target.value,"value")}),v.addEventListener("resetform",lt=>{const et=this.data.defaultFieldValue??"";v.value=K.userValue=et,K.formattedValue=null});let it=lt=>{const{formattedValue:et}=K;et!=null&&(lt.target.value=et),lt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){v.addEventListener("focus",et=>{const{target:rt}=et;K.userValue&&(rt.value=K.userValue),K.lastCommittedValue=rt.value,K.commitKey=1}),v.addEventListener("updatefromsandbox",et=>{this.showElementAndHideCanvas(et.target);const rt={value(ut){K.userValue=ut.detail.value??"",s.setValue(a,{value:K.userValue.toString()}),ut.target.value=K.userValue},formattedValue(ut){const{formattedValue:ft}=ut.detail;K.formattedValue=ft,ft!=null&&ut.target!==document.activeElement&&(ut.target.value=ft),s.setValue(a,{formattedValue:ft})},selRange(ut){ut.target.setSelectionRange(...ut.detail.selRange)},charLimit:ut=>{var Ct;const{charLimit:ft}=ut.detail,{target:wt}=ut;if(ft===0){wt.removeAttribute("maxLength");return}wt.setAttribute("maxLength",ft);let yt=K.userValue;!yt||yt.length<=ft||(yt=yt.slice(0,ft),wt.value=K.userValue=yt,s.setValue(a,{value:yt}),(Ct=this.linkService.eventBus)==null||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:yt,willCommit:!0,commitKey:1,selStart:wt.selectionStart,selEnd:wt.selectionEnd}}))}};this._dispatchEventFromSandbox(rt,et)}),v.addEventListener("keydown",et=>{var ft;K.commitKey=1;let rt=-1;if(et.key==="Escape"?rt=0:et.key==="Enter"&&!this.data.multiLine?rt=2:et.key==="Tab"&&(K.commitKey=3),rt===-1)return;const{value:ut}=et.target;K.lastCommittedValue!==ut&&(K.lastCommittedValue=ut,K.userValue=ut,(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:ut,willCommit:!0,commitKey:rt,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}}))});const lt=it;it=null,v.addEventListener("blur",et=>{var ut;if(!et.relatedTarget)return;const{value:rt}=et.target;K.userValue=rt,K.lastCommittedValue!==rt&&((ut=this.linkService.eventBus)==null||ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:rt,willCommit:!0,commitKey:K.commitKey,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}})),lt(et)}),(T=this.data.actions)!=null&&T.Keystroke&&v.addEventListener("beforeinput",et=>{var At;K.lastCommittedValue=null;const{data:rt,target:ut}=et,{value:ft,selectionStart:wt,selectionEnd:yt}=ut;let Ct=wt,Y=yt;switch(et.inputType){case"deleteWordBackward":{const Et=ft.substring(0,wt).match(/\w*[^\w]*$/);Et&&(Ct-=Et[0].length);break}case"deleteWordForward":{const Et=ft.substring(wt).match(/^[^\w]*\w*/);Et&&(Y+=Et[0].length);break}case"deleteContentBackward":wt===yt&&(Ct-=1);break;case"deleteContentForward":wt===yt&&(Y+=1);break}et.preventDefault(),(At=this.linkService.eventBus)==null||At.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:ft,change:rt||"",willCommit:!1,selStart:Ct,selEnd:Y}})}),this._setEventListeners(v,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],et=>et.target.value)}if(it&&v.addEventListener("blur",it),this.data.comb){const et=(this.data.rect[2]-this.data.rect[0])/nt;v.classList.add("comb"),v.style.letterSpacing=`calc(${et}px * var(--scale-factor) - 1ch)`}}else v=document.createElement("div"),v.textContent=this.data.fieldValue,v.style.verticalAlign="middle",v.style.display="table-cell";return this._setTextStyle(v),this._setBackgroundColor(v),this._setDefaultPropertiesFromJS(v),this.container.append(v),this.container}}class w extends i{constructor(s){super(s,{isRenderable:s.renderForms})}render(){const s=this.annotationStorage,a=this.data,v=a.id;let T=s.getValue(v,{value:a.exportValue===a.fieldValue}).value;typeof T=="string"&&(T=T!=="Off",s.setValue(v,{value:T})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const k=document.createElement("input");return y.add(k),k.setAttribute("data-element-id",v),k.disabled=a.readOnly,this._setRequired(k,this.data.required),k.type="checkbox",k.name=a.fieldName,T&&k.setAttribute("checked",!0),k.setAttribute("exportValue",a.exportValue),k.tabIndex=S,k.addEventListener("change",X=>{const{name:nt,checked:K}=X.target;for(const it of this._getElementsByName(nt,v)){const lt=K&&it.exportValue===a.exportValue;it.domElement&&(it.domElement.checked=lt),s.setValue(it.id,{value:lt})}s.setValue(v,{value:K})}),k.addEventListener("resetform",X=>{const nt=a.defaultFieldValue||"Off";X.target.checked=nt===a.exportValue}),this.enableScripting&&this.hasJSActions&&(k.addEventListener("updatefromsandbox",X=>{const nt={value(K){K.target.checked=K.detail.value!=="Off",s.setValue(v,{value:K.target.checked})}};this._dispatchEventFromSandbox(nt,X)}),this._setEventListeners(k,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.checked)),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class F extends i{constructor(s){super(s,{isRenderable:s.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const s=this.annotationStorage,a=this.data,v=a.id;let T=s.getValue(v,{value:a.fieldValue===a.buttonValue}).value;typeof T=="string"&&(T=T!==a.buttonValue,s.setValue(v,{value:T}));const k=document.createElement("input");if(y.add(k),k.setAttribute("data-element-id",v),k.disabled=a.readOnly,this._setRequired(k,this.data.required),k.type="radio",k.name=a.fieldName,T&&k.setAttribute("checked",!0),k.tabIndex=S,k.addEventListener("change",X=>{const{name:nt,checked:K}=X.target;for(const it of this._getElementsByName(nt,v))s.setValue(it.id,{value:!1});s.setValue(v,{value:K})}),k.addEventListener("resetform",X=>{const nt=a.defaultFieldValue;X.target.checked=nt!=null&&nt===a.buttonValue}),this.enableScripting&&this.hasJSActions){const X=a.buttonValue;k.addEventListener("updatefromsandbox",nt=>{const K={value:it=>{const lt=X===it.detail.value;for(const et of this._getElementsByName(it.target.name)){const rt=lt&&et.id===v;et.domElement&&(et.domElement.checked=rt),s.setValue(et.id,{value:rt})}}};this._dispatchEventFromSandbox(K,nt)}),this._setEventListeners(k,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],nt=>nt.target.checked)}return this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class b extends m{constructor(s){super(s,{ignoreBorder:s.data.hasAppearance})}render(){const s=super.render();s.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(s.title=this.data.alternativeText);const a=s.lastChild;return this.enableScripting&&this.hasJSActions&&a&&(this._setDefaultPropertiesFromJS(a),a.addEventListener("updatefromsandbox",v=>{this._dispatchEventFromSandbox({},v)})),s}}class n extends i{constructor(s){super(s,{isRenderable:s.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const s=this.annotationStorage,a=this.data.id,v=s.getValue(a,{value:this.data.fieldValue}),T=document.createElement("select");y.add(T),T.setAttribute("data-element-id",a),T.disabled=this.data.readOnly,this._setRequired(T,this.data.required),T.name=this.data.fieldName,T.tabIndex=S;let k=this.data.combo&&this.data.options.length>0;this.data.combo||(T.size=this.data.options.length,this.data.multiSelect&&(T.multiple=!0)),T.addEventListener("resetform",lt=>{const et=this.data.defaultFieldValue;for(const rt of T.options)rt.selected=rt.value===et});for(const lt of this.data.options){const et=document.createElement("option");et.textContent=lt.displayValue,et.value=lt.exportValue,v.value.includes(lt.exportValue)&&(et.setAttribute("selected",!0),k=!1),T.append(et)}let X=null;if(k){const lt=document.createElement("option");lt.value=" ",lt.setAttribute("hidden",!0),lt.setAttribute("selected",!0),T.prepend(lt),X=()=>{lt.remove(),T.removeEventListener("input",X),X=null},T.addEventListener("input",X)}const nt=lt=>{const et=lt?"value":"textContent",{options:rt,multiple:ut}=T;return ut?Array.prototype.filter.call(rt,ft=>ft.selected).map(ft=>ft[et]):rt.selectedIndex===-1?null:rt[rt.selectedIndex][et]};let K=nt(!1);const it=lt=>{const et=lt.target.options;return Array.prototype.map.call(et,rt=>({displayValue:rt.textContent,exportValue:rt.value}))};return this.enableScripting&&this.hasJSActions?(T.addEventListener("updatefromsandbox",lt=>{const et={value(rt){X==null||X();const ut=rt.detail.value,ft=new Set(Array.isArray(ut)?ut:[ut]);for(const wt of T.options)wt.selected=ft.has(wt.value);s.setValue(a,{value:nt(!0)}),K=nt(!1)},multipleSelection(rt){T.multiple=!0},remove(rt){const ut=T.options,ft=rt.detail.remove;ut[ft].selected=!1,T.remove(ft),ut.length>0&&Array.prototype.findIndex.call(ut,yt=>yt.selected)===-1&&(ut[0].selected=!0),s.setValue(a,{value:nt(!0),items:it(rt)}),K=nt(!1)},clear(rt){for(;T.length!==0;)T.remove(0);s.setValue(a,{value:null,items:[]}),K=nt(!1)},insert(rt){const{index:ut,displayValue:ft,exportValue:wt}=rt.detail.insert,yt=T.children[ut],Ct=document.createElement("option");Ct.textContent=ft,Ct.value=wt,yt?yt.before(Ct):T.append(Ct),s.setValue(a,{value:nt(!0),items:it(rt)}),K=nt(!1)},items(rt){const{items:ut}=rt.detail;for(;T.length!==0;)T.remove(0);for(const ft of ut){const{displayValue:wt,exportValue:yt}=ft,Ct=document.createElement("option");Ct.textContent=wt,Ct.value=yt,T.append(Ct)}T.options.length>0&&(T.options[0].selected=!0),s.setValue(a,{value:nt(!0),items:it(rt)}),K=nt(!1)},indices(rt){const ut=new Set(rt.detail.indices);for(const ft of rt.target.options)ft.selected=ut.has(ft.index);s.setValue(a,{value:nt(!0)}),K=nt(!1)},editable(rt){rt.target.disabled=!rt.detail.editable}};this._dispatchEventFromSandbox(et,lt)}),T.addEventListener("input",lt=>{var rt;const et=nt(!0);s.setValue(a,{value:et}),lt.preventDefault(),(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:K,changeEx:et,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(T,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],lt=>lt.target.value)):T.addEventListener("input",function(lt){s.setValue(a,{value:nt(!0)})}),this.data.combo&&this._setTextStyle(T),this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}const E=class extends D{constructor(s){var T,k,X;const{data:a}=s,v=!E.IGNORE_TYPES.has(a.parentType)&&!!((T=a.titleObj)!=null&&T.str||(k=a.contentsObj)!=null&&k.str||(X=a.richText)!=null&&X.str);super(s,{isRenderable:v})}render(){this.container.classList.add("popupAnnotation");const s=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(s.length===0)return this.container;const a=new h({container:this.container,trigger:Array.from(s),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),v=this.page,T=e.Util.normalizeRect([this.data.parentRect[0],v.view[3]-this.data.parentRect[1]+v.view[1],this.data.parentRect[2],v.view[3]-this.data.parentRect[3]+v.view[1]]),k=T[0]+this.data.parentRect[2]-this.data.parentRect[0],X=T[1],{pageWidth:nt,pageHeight:K,pageX:it,pageY:lt}=this.viewport.rawDims;return this.container.style.left=`${100*(k-it)/nt}%`,this.container.style.top=`${100*(X-lt)/K}%`,this.container.append(a.render()),this.container}};let l=E;Ot(l,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class h{constructor(s){this.container=s.container,this.trigger=s.trigger,this.color=s.color,this.titleObj=s.titleObj,this.modificationDate=s.modificationDate,this.contentsObj=s.contentsObj,this.richText=s.richText,this.hideWrapper=s.hideWrapper||!1,this.pinned=!1}render(){var nt,K;const a=document.createElement("div");a.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?a:this.container,this.hideElement.hidden=!0;const v=document.createElement("div");v.classList.add("popup");const T=this.color;if(T){const it=.7*(255-T[0])+T[0],lt=.7*(255-T[1])+T[1],et=.7*(255-T[2])+T[2];v.style.backgroundColor=e.Util.makeHexColor(it|0,lt|0,et|0)}const k=document.createElement("h1");k.dir=this.titleObj.dir,k.textContent=this.titleObj.str,v.append(k);const X=g.PDFDateString.toDateObject(this.modificationDate);if(X){const it=document.createElement("span");it.classList.add("popupDate"),it.textContent="{{date}}, {{time}}",it.dataset.l10nId="annotation_date_string",it.dataset.l10nArgs=JSON.stringify({date:X.toLocaleDateString(),time:X.toLocaleTimeString()}),v.append(it)}if((nt=this.richText)!=null&&nt.str&&(!((K=this.contentsObj)!=null&&K.str)||this.contentsObj.str===this.richText.str))G.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:v}),v.lastChild.classList.add("richText","popupContent");else{const it=this._formatContents(this.contentsObj);v.append(it)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const it of this.trigger)it.addEventListener("click",this._toggle.bind(this)),it.addEventListener("mouseover",this._show.bind(this,!1)),it.addEventListener("mouseout",this._hide.bind(this,!1));return v.addEventListener("click",this._hide.bind(this,!0)),a.append(v),a}_formatContents({str:s,dir:a}){const v=document.createElement("p");v.classList.add("popupContent"),v.dir=a;const T=s.split(/(?:\r\n?|\n)/);for(let k=0,X=T.length;k<X;++k){const nt=T[k];v.append(document.createTextNode(nt)),k<X-1&&v.append(document.createElement("br"))}return v}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(s=!1){s&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(s=!0){s&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class r extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0}),this.textContent=s.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const s=document.createElement("div");s.classList.add("annotationTextContent"),s.setAttribute("role","comment");for(const a of this.textContent){const v=document.createElement("span");v.textContent=a,s.append(v)}this.container.append(s)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class p extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const s=this.data,{width:a,height:v}=U(s.rect),T=this.svgFactory.create(a,v,!0),k=this.svgFactory.createElement("svg:line");return k.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),k.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),k.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),k.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),k.setAttribute("stroke-width",s.borderStyle.width||1),k.setAttribute("stroke","transparent"),k.setAttribute("fill","transparent"),T.append(k),this.container.append(T),this._createPopup(k,s),this.container}}class O extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const s=this.data,{width:a,height:v}=U(s.rect),T=this.svgFactory.create(a,v,!0),k=s.borderStyle.width,X=this.svgFactory.createElement("svg:rect");return X.setAttribute("x",k/2),X.setAttribute("y",k/2),X.setAttribute("width",a-k),X.setAttribute("height",v-k),X.setAttribute("stroke-width",k||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),T.append(X),this.container.append(T),this._createPopup(X,s),this.container}}class o extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const s=this.data,{width:a,height:v}=U(s.rect),T=this.svgFactory.create(a,v,!0),k=s.borderStyle.width,X=this.svgFactory.createElement("svg:ellipse");return X.setAttribute("cx",a/2),X.setAttribute("cy",v/2),X.setAttribute("rx",a/2-k/2),X.setAttribute("ry",v/2-k/2),X.setAttribute("stroke-width",k||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),T.append(X),this.container.append(T),this._createPopup(X,s),this.container}}class W extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:a,height:v}=U(s.rect),T=this.svgFactory.create(a,v,!0);let k=[];for(const nt of s.vertices){const K=nt.x-s.rect[0],it=s.rect[3]-nt.y;k.push(K+","+it)}k=k.join(" ");const X=this.svgFactory.createElement(this.svgElementName);return X.setAttribute("points",k),X.setAttribute("stroke-width",s.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),T.append(X),this.container.append(T),this._createPopup(X,s),this.container}}class $ extends W{constructor(s){super(s),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class J extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Q extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:a,height:v}=U(s.rect),T=this.svgFactory.create(a,v,!0);for(const k of s.inkLists){let X=[];for(const K of k){const it=K.x-s.rect[0],lt=s.rect[3]-K.y;X.push(`${it},${lt}`)}X=X.join(" ");const nt=this.svgFactory.createElement(this.svgElementName);nt.setAttribute("points",X),nt.setAttribute("stroke-width",s.borderStyle.width||1),nt.setAttribute("stroke","transparent"),nt.setAttribute("fill","transparent"),this._createPopup(nt,s),T.append(nt)}return this.container.append(T),this.container}}class tt extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class dt extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class ot extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class ht extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class _t extends D{constructor(s){var v,T,k;const a=!!(s.data.hasPopup||(v=s.data.titleObj)!=null&&v.str||(T=s.data.contentsObj)!=null&&T.str||(k=s.data.richText)!=null&&k.str);super(s,{isRenderable:a,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class vt extends D{constructor(s){var T;super(s,{isRenderable:!0});const{filename:a,content:v}=this.data.file;this.filename=(0,g.getFilenameFromUrl)(a,!0),this.content=v,(T=this.linkService.eventBus)==null||T.dispatch("fileattachmentannotation",{source:this,filename:a,content:v})}render(){var a,v;this.container.classList.add("fileAttachmentAnnotation");let s;return this.data.hasAppearance?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),s.classList.add("popupTriggerArea"),s.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((a=this.data.titleObj)!=null&&a.str||(v=this.data.contentsObj)!=null&&v.str||this.data.richText)&&this._createPopup(s,this.data),this.container.append(s),this.container}_download(){var s;(s=this.downloadManager)==null||s.openOrDownloadData(this.container,this.content,this.filename)}}const j=class{static render(s){var K,it;const{annotations:a,div:v,viewport:T,accessibilityManager:k}=s;(0,g.setLayerDimensions)(v,T);const X={data:null,layer:v,page:s.page,viewport:T,linkService:s.linkService,downloadManager:s.downloadManager,imageResourcesPath:s.imageResourcesPath||"",renderForms:s.renderForms!==!1,svgFactory:new g.DOMSVGFactory,annotationStorage:s.annotationStorage||new P.AnnotationStorage,enableScripting:s.enableScripting===!0,hasJSActions:s.hasJSActions,fieldObjects:s.fieldObjects};let nt=0;for(const lt of a){if(lt.noHTML)continue;if(lt.annotationType!==e.AnnotationType.POPUP){const{width:ut,height:ft}=U(lt.rect);if(ut<=0||ft<=0)continue}X.data=lt;const et=x.create(X);if(!et.isRenderable)continue;const rt=et.render();if(lt.hidden&&(rt.style.visibility="hidden"),Array.isArray(rt))for(const ut of rt)ut.style.zIndex=nt++,st(K=j,q,Fe).call(K,ut,lt.id,v,k);else rt.style.zIndex=nt++,et instanceof l?v.prepend(rt):st(it=j,q,Fe).call(it,rt,lt.id,v,k)}st(this,V,Re).call(this,v,s.annotationCanvasMap)}static update(s){const{annotationCanvasMap:a,div:v,viewport:T}=s;(0,g.setLayerDimensions)(v,{rotation:T.rotation}),st(this,V,Re).call(this,v,a),v.hidden=!1}};let St=j;q=new WeakSet,Fe=function(s,a,v,T){const k=s.firstChild||s;k.id=`${g.AnnotationPrefix}${a}`,v.append(s),T==null||T.moveElementInDOM(v,s,k,!1)},V=new WeakSet,Re=function(s,a){if(a){for(const[v,T]of a){const k=s.querySelector(`[data-annotation-id="${v}"]`);if(!k)continue;const{firstChild:X}=k;X?X.nodeName==="CANVAS"?X.replaceWith(T):X.before(T):k.append(T)}a.clear()}},Z(St,q),Z(St,V),t.AnnotationLayer=St},(L,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function c(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}class e{static CMYK_G([P,M,G,S]){return["G",1-Math.min(1,.3*P+.59*G+.11*M+S)]}static G_CMYK([P]){return["CMYK",0,0,0,1-P]}static G_RGB([P]){return["RGB",P,P,P]}static G_HTML([P]){const M=c(P);return`#${M}${M}${M}`}static RGB_G([P,M,G]){return["G",.3*P+.59*M+.11*G]}static RGB_HTML([P,M,G]){const S=c(P),C=c(M),y=c(G);return`#${S}${C}${y}`}static T_HTML(){return"#00000000"}static CMYK_RGB([P,M,G,S]){return["RGB",1-Math.min(1,P+S),1-Math.min(1,G+S),1-Math.min(1,M+S)]}static CMYK_HTML(P){const M=this.CMYK_RGB(P).slice(1);return this.RGB_HTML(M)}static RGB_CMYK([P,M,G]){const S=1-P,C=1-M,y=1-G,U=Math.min(S,C,y);return["CMYK",S,C,y,U]}}t.ColorConverters=e},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var e=c(19);class g{static setupStorage(M,G,S,C,y){const U=C.getValue(G,{value:null});switch(S.name){case"textarea":if(U.value!==null&&(M.textContent=U.value),y==="print")break;M.addEventListener("input",x=>{C.setValue(G,{value:x.target.value})});break;case"input":if(S.attributes.type==="radio"||S.attributes.type==="checkbox"){if(U.value===S.attributes.xfaOn?M.setAttribute("checked",!0):U.value===S.attributes.xfaOff&&M.removeAttribute("checked"),y==="print")break;M.addEventListener("change",x=>{C.setValue(G,{value:x.target.checked?x.target.getAttribute("xfaOn"):x.target.getAttribute("xfaOff")})})}else{if(U.value!==null&&M.setAttribute("value",U.value),y==="print")break;M.addEventListener("input",x=>{C.setValue(G,{value:x.target.value})})}break;case"select":if(U.value!==null)for(const x of S.children)x.attributes.value===U.value&&(x.attributes.selected=!0);M.addEventListener("input",x=>{const D=x.target.options,m=D.selectedIndex===-1?"":D[D.selectedIndex].value;C.setValue(G,{value:m})});break}}static setAttributes({html:M,element:G,storage:S=null,intent:C,linkService:y}){const{attributes:U}=G,x=M instanceof HTMLAnchorElement;U.type==="radio"&&(U.name=`${U.name}-${C}`);for(const[D,m]of Object.entries(U))if(m!=null)switch(D){case"class":m.length&&M.setAttribute(D,m.join(" "));break;case"dataId":break;case"id":M.setAttribute("data-element-id",m);break;case"style":Object.assign(M.style,m);break;case"textContent":M.textContent=m;break;default:(!x||D!=="href"&&D!=="newWindow")&&M.setAttribute(D,m)}x&&y.addLinkAttributes(M,U.href,U.newWindow),S&&U.dataId&&this.setupStorage(M,U.dataId,G,S)}static render(M){var u;const G=M.annotationStorage,S=M.linkService,C=M.xfaHtml,y=M.intent||"display",U=document.createElement(C.name);C.attributes&&this.setAttributes({html:U,element:C,intent:y,linkService:S});const x=[[C,-1,U]],D=M.div;if(D.append(U),M.viewport){const i=`matrix(${M.viewport.transform.join(",")})`;D.style.transform=i}y!=="richText"&&D.setAttribute("class","xfaLayer xfaFont");const m=[];for(;x.length>0;){const[i,_,w]=x.at(-1);if(_+1===i.children.length){x.pop();continue}const F=i.children[++x.at(-1)[1]];if(F===null)continue;const{name:b}=F;if(b==="#text"){const l=document.createTextNode(F.value);m.push(l),w.append(l);continue}let n;if((u=F==null?void 0:F.attributes)!=null&&u.xmlns?n=document.createElementNS(F.attributes.xmlns,b):n=document.createElement(b),w.append(n),F.attributes&&this.setAttributes({html:n,element:F,storage:G,intent:y,linkService:S}),F.children&&F.children.length>0)x.push([F,-1,n]);else if(F.value){const l=document.createTextNode(F.value);e.XfaText.shouldBuildText(b)&&m.push(l),n.append(l)}}for(const i of D.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))i.setAttribute("readOnly",!0);return{textDivs:m}}static update(M){const G=`matrix(${M.viewport.transform.join(",")})`;M.div.style.transform=G,M.div.hidden=!1}}t.XfaLayer=g},(L,t,c)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var e=c(6),g=c(1),P=c(10);let M=class{constructor(){(0,g.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=M;{let u=function(n){let l=[];const h=[];for(const r of n){if(r.fn==="save"){l.push({fnId:92,fn:"group",items:[]}),h.push(l),l=l.at(-1).items;continue}r.fn==="restore"?l=h.pop():l.push(r)}return l},i=function(n){if(Number.isInteger(n))return n.toString();const l=n.toFixed(10);let h=l.length-1;if(l[h]!=="0")return l;do h--;while(l[h]==="0");return l.substring(0,l[h]==="."?h:h+1)},_=function(n){if(n[4]===0&&n[5]===0){if(n[1]===0&&n[2]===0)return n[0]===1&&n[3]===1?"":`scale(${i(n[0])} ${i(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const l=Math.acos(n[0])*180/Math.PI;return`rotate(${i(l)})`}}else if(n[0]===1&&n[1]===0&&n[2]===0&&n[3]===1)return`translate(${i(n[4])} ${i(n[5])})`;return`matrix(${i(n[0])} ${i(n[1])} ${i(n[2])} ${i(n[3])} ${i(n[4])} ${i(n[5])})`};const G={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},S="http://www.w3.org/XML/1998/namespace",C="http://www.w3.org/1999/xlink",y=["butt","round","square"],U=["miter","round","bevel"],x=function(n,l="",h=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!h)return URL.createObjectURL(new Blob([n],{type:l}));const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let p=`data:${l};base64,`;for(let O=0,o=n.length;O<o;O+=3){const W=n[O]&255,$=n[O+1]&255,J=n[O+2]&255,Q=W>>2,tt=(W&3)<<4|$>>4,dt=O+1<o?($&15)<<2|J>>6:64,ot=O+2<o?J&63:64;p+=r[Q]+r[tt]+r[dt]+r[ot]}return p},D=function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),l=12,h=new Int32Array(256);for(let J=0;J<256;J++){let Q=J;for(let tt=0;tt<8;tt++)Q&1?Q=3988292384^Q>>1&2147483647:Q=Q>>1&2147483647;h[J]=Q}function r(J,Q,tt){let dt=-1;for(let ot=Q;ot<tt;ot++){const ht=(dt^J[ot])&255,_t=h[ht];dt=dt>>>8^_t}return dt^-1}function p(J,Q,tt,dt){let ot=dt;const ht=Q.length;tt[ot]=ht>>24&255,tt[ot+1]=ht>>16&255,tt[ot+2]=ht>>8&255,tt[ot+3]=ht&255,ot+=4,tt[ot]=J.charCodeAt(0)&255,tt[ot+1]=J.charCodeAt(1)&255,tt[ot+2]=J.charCodeAt(2)&255,tt[ot+3]=J.charCodeAt(3)&255,ot+=4,tt.set(Q,ot),ot+=Q.length;const _t=r(tt,dt+4,ot);tt[ot]=_t>>24&255,tt[ot+1]=_t>>16&255,tt[ot+2]=_t>>8&255,tt[ot+3]=_t&255}function O(J,Q,tt){let dt=1,ot=0;for(let ht=Q;ht<tt;++ht)dt=(dt+(J[ht]&255))%65521,ot=(ot+dt)%65521;return ot<<16|dt}function o(J){if(!P.isNodeJS)return W(J);try{let Q;parseInt(process.versions.node)>=8?Q=J:Q=Buffer.from(J);const tt=require$$5.deflateSync(Q,{level:9});return tt instanceof Uint8Array?tt:new Uint8Array(tt)}catch(Q){(0,g.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Q)}return W(J)}function W(J){let Q=J.length;const tt=65535,dt=Math.ceil(Q/tt),ot=new Uint8Array(2+Q+dt*5+4);let ht=0;ot[ht++]=120,ot[ht++]=156;let _t=0;for(;Q>tt;)ot[ht++]=0,ot[ht++]=255,ot[ht++]=255,ot[ht++]=0,ot[ht++]=0,ot.set(J.subarray(_t,_t+tt),ht),ht+=tt,_t+=tt,Q-=tt;ot[ht++]=1,ot[ht++]=Q&255,ot[ht++]=Q>>8&255,ot[ht++]=~Q&65535&255,ot[ht++]=(~Q&65535)>>8&255,ot.set(J.subarray(_t),ht),ht+=J.length-_t;const vt=O(J,0,J.length);return ot[ht++]=vt>>24&255,ot[ht++]=vt>>16&255,ot[ht++]=vt>>8&255,ot[ht++]=vt&255,ot}function $(J,Q,tt,dt){const ot=J.width,ht=J.height;let _t,vt,St;const gt=J.data;switch(Q){case g.ImageKind.GRAYSCALE_1BPP:vt=0,_t=1,St=ot+7>>3;break;case g.ImageKind.RGB_24BPP:vt=2,_t=8,St=ot*3;break;case g.ImageKind.RGBA_32BPP:vt=6,_t=8,St=ot*4;break;default:throw new Error("invalid format")}const z=new Uint8Array((1+St)*ht);let d=0,f=0;for(let j=0;j<ht;++j)z[d++]=0,z.set(gt.subarray(f,f+St),d),f+=St,d+=St;if(Q===g.ImageKind.GRAYSCALE_1BPP&&dt){d=0;for(let j=0;j<ht;j++){d++;for(let H=0;H<St;H++)z[d++]^=255}}const E=new Uint8Array([ot>>24&255,ot>>16&255,ot>>8&255,ot&255,ht>>24&255,ht>>16&255,ht>>8&255,ht&255,_t,vt,0,0,0]),q=o(z),I=n.length+l*3+E.length+q.length,V=new Uint8Array(I);let N=0;return V.set(n,N),N+=n.length,p("IHDR",E,V,N),N+=l+E.length,p("IDATA",q,V,N),N+=l+q.length,p("IEND",new Uint8Array(0),V,N),x(V,"image/png",tt)}return function(Q,tt,dt){const ot=Q.kind===void 0?g.ImageKind.GRAYSCALE_1BPP:Q.kind;return $(Q,ot,tt,dt)}}();class m{constructor(){this.fontSizeScale=1,this.fontWeight=G.fontWeight,this.fontSize=0,this.textMatrix=g.IDENTITY_MATRIX,this.fontMatrix=g.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=g.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=G.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(l,h){this.x=l,this.y=h}}let w=0,F=0,b=0;t.SVGGraphics=M=class{constructor(n,l,h=!1){(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new m,this.transformMatrix=g.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=l,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!h,this._operatorIdMapping=[];for(const r in g.OPS)this._operatorIdMapping[g.OPS[r]]=r}getObject(n,l=null){return typeof n=="string"?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):l}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const l=n.fnArray,h=n.argsArray;for(let r=0,p=l.length;r<p;r++)if(l[r]===g.OPS.dependency)for(const O of h[r]){const o=O.startsWith("g_")?this.commonObjs:this.objs,W=new Promise($=>{o.get(O,$)});this.current.dependencies.push(W)}return Promise.all(this.current.dependencies)}transform(n,l,h,r,p,O){const o=[n,l,h,r,p,O];this.transformMatrix=g.Util.transform(this.transformMatrix,o),this.tgrp=null}getSVG(n,l){this.viewport=l;const h=this._initialize(l);return this.loadDependencies(n).then(()=>(this.transformMatrix=g.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),h))}convertOpList(n){const l=this._operatorIdMapping,h=n.argsArray,r=n.fnArray,p=[];for(let O=0,o=r.length;O<o;O++){const W=r[O];p.push({fnId:W,fn:l[W],args:h[O]})}return u(p)}executeOpTree(n){for(const l of n){const h=l.fn,r=l.fnId,p=l.args;switch(r|0){case g.OPS.beginText:this.beginText();break;case g.OPS.dependency:break;case g.OPS.setLeading:this.setLeading(p);break;case g.OPS.setLeadingMoveText:this.setLeadingMoveText(p[0],p[1]);break;case g.OPS.setFont:this.setFont(p);break;case g.OPS.showText:this.showText(p[0]);break;case g.OPS.showSpacedText:this.showText(p[0]);break;case g.OPS.endText:this.endText();break;case g.OPS.moveText:this.moveText(p[0],p[1]);break;case g.OPS.setCharSpacing:this.setCharSpacing(p[0]);break;case g.OPS.setWordSpacing:this.setWordSpacing(p[0]);break;case g.OPS.setHScale:this.setHScale(p[0]);break;case g.OPS.setTextMatrix:this.setTextMatrix(p[0],p[1],p[2],p[3],p[4],p[5]);break;case g.OPS.setTextRise:this.setTextRise(p[0]);break;case g.OPS.setTextRenderingMode:this.setTextRenderingMode(p[0]);break;case g.OPS.setLineWidth:this.setLineWidth(p[0]);break;case g.OPS.setLineJoin:this.setLineJoin(p[0]);break;case g.OPS.setLineCap:this.setLineCap(p[0]);break;case g.OPS.setMiterLimit:this.setMiterLimit(p[0]);break;case g.OPS.setFillRGBColor:this.setFillRGBColor(p[0],p[1],p[2]);break;case g.OPS.setStrokeRGBColor:this.setStrokeRGBColor(p[0],p[1],p[2]);break;case g.OPS.setStrokeColorN:this.setStrokeColorN(p);break;case g.OPS.setFillColorN:this.setFillColorN(p);break;case g.OPS.shadingFill:this.shadingFill(p[0]);break;case g.OPS.setDash:this.setDash(p[0],p[1]);break;case g.OPS.setRenderingIntent:this.setRenderingIntent(p[0]);break;case g.OPS.setFlatness:this.setFlatness(p[0]);break;case g.OPS.setGState:this.setGState(p[0]);break;case g.OPS.fill:this.fill();break;case g.OPS.eoFill:this.eoFill();break;case g.OPS.stroke:this.stroke();break;case g.OPS.fillStroke:this.fillStroke();break;case g.OPS.eoFillStroke:this.eoFillStroke();break;case g.OPS.clip:this.clip("nonzero");break;case g.OPS.eoClip:this.clip("evenodd");break;case g.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case g.OPS.paintImageXObject:this.paintImageXObject(p[0]);break;case g.OPS.paintInlineImageXObject:this.paintInlineImageXObject(p[0]);break;case g.OPS.paintImageMaskXObject:this.paintImageMaskXObject(p[0]);break;case g.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(p[0],p[1]);break;case g.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case g.OPS.closePath:this.closePath();break;case g.OPS.closeStroke:this.closeStroke();break;case g.OPS.closeFillStroke:this.closeFillStroke();break;case g.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case g.OPS.nextLine:this.nextLine();break;case g.OPS.transform:this.transform(p[0],p[1],p[2],p[3],p[4],p[5]);break;case g.OPS.constructPath:this.constructPath(p[0],p[1]);break;case g.OPS.endPath:this.endPath();break;case 92:this.group(l.items);break;default:(0,g.warn)(`Unimplemented operator ${h}`);break}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,l,h,r,p,O){const o=this.current;o.textMatrix=o.lineMatrix=[n,l,h,r,p,O],o.textMatrixScale=Math.hypot(n,l),o.x=o.lineX=0,o.y=o.lineY=0,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${i(o.fontSize)}px`),o.tspan.setAttributeNS(null,"y",i(-o.y)),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtElement.append(o.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=g.IDENTITY_MATRIX,n.lineMatrix=g.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,l){const h=this.current;h.x=h.lineX+=n,h.y=h.lineY+=l,h.xcoords=[],h.ycoords=[],h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",`${i(h.fontSize)}px`),h.tspan.setAttributeNS(null,"y",i(-h.y))}showText(n){const l=this.current,h=l.font,r=l.fontSize;if(r===0)return;const p=l.fontSizeScale,O=l.charSpacing,o=l.wordSpacing,W=l.fontDirection,$=l.textHScale*W,J=h.vertical,Q=J?1:-1,tt=h.defaultVMetrics,dt=r*l.fontMatrix[0];let ot=0;for(const vt of n){if(vt===null){ot+=W*o;continue}else if(typeof vt=="number"){ot+=Q*vt*r/1e3;continue}const St=(vt.isSpace?o:0)+O,gt=vt.fontChar;let z,d,f=vt.width;if(J){let q;const I=vt.vmetric||tt;q=vt.vmetric?I[1]:f*.5,q=-q*dt;const V=I[2]*dt;f=I?-I[0]:f,z=q/p,d=(ot+V)/p}else z=ot/p,d=0;(vt.isInFont||h.missingFile)&&(l.xcoords.push(l.x+z),J&&l.ycoords.push(-l.y+d),l.tspan.textContent+=gt);let E;J?E=f*dt-St*W:E=f*dt+St*W,ot+=E}l.tspan.setAttributeNS(null,"x",l.xcoords.map(i).join(" ")),J?l.tspan.setAttributeNS(null,"y",l.ycoords.map(i).join(" ")):l.tspan.setAttributeNS(null,"y",i(-l.y)),J?l.y-=ot:l.x+=ot*$,l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${i(l.fontSize)}px`),l.fontStyle!==G.fontStyle&&l.tspan.setAttributeNS(null,"font-style",l.fontStyle),l.fontWeight!==G.fontWeight&&l.tspan.setAttributeNS(null,"font-weight",l.fontWeight);const ht=l.textRenderingMode&g.TextRenderingMode.FILL_STROKE_MASK;if(ht===g.TextRenderingMode.FILL||ht===g.TextRenderingMode.FILL_STROKE?(l.fillColor!==G.fillColor&&l.tspan.setAttributeNS(null,"fill",l.fillColor),l.fillAlpha<1&&l.tspan.setAttributeNS(null,"fill-opacity",l.fillAlpha)):l.textRenderingMode===g.TextRenderingMode.ADD_TO_PATH?l.tspan.setAttributeNS(null,"fill","transparent"):l.tspan.setAttributeNS(null,"fill","none"),ht===g.TextRenderingMode.STROKE||ht===g.TextRenderingMode.FILL_STROKE){const vt=1/(l.textMatrixScale||1);this._setStrokeAttributes(l.tspan,vt)}let _t=l.textMatrix;l.textRise!==0&&(_t=_t.slice(),_t[5]+=l.textRise),l.txtElement.setAttributeNS(null,"transform",`${_(_t)} scale(${i($)}, -1)`),l.txtElement.setAttributeNS(S,"xml:space","preserve"),l.txtElement.append(l.tspan),l.txtgrp.append(l.txtElement),this._ensureTransformGroup().append(l.txtElement)}setLeadingMoveText(n,l){this.setLeading(-l),this.moveText(n,l)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const l=x(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${l}); }
`}setFont(n){const l=this.current,h=this.commonObjs.get(n[0]);let r=n[1];l.font=h,this.embedFonts&&!h.missingFile&&!this.embeddedFonts[h.loadedName]&&(this.addFontStyle(h),this.embeddedFonts[h.loadedName]=h),l.fontMatrix=h.fontMatrix||g.FONT_IDENTITY_MATRIX;let p="normal";h.black?p="900":h.bold&&(p="bold");const O=h.italic?"italic":"normal";r<0?(r=-r,l.fontDirection=-1):l.fontDirection=1,l.fontSize=r,l.fontFamily=h.loadedName,l.fontWeight=p,l.fontStyle=O,l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"y",i(-l.y)),l.xcoords=[],l.ycoords=[]}endText(){var l;const n=this.current;n.textRenderingMode&g.TextRenderingMode.ADD_TO_PATH_FLAG&&((l=n.txtElement)!=null&&l.hasChildNodes())&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=y[n]}setLineJoin(n){this.current.lineJoin=U[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,l,h){this.current.strokeColor=g.Util.makeHexColor(n,l,h)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,l,h){this.current.fillColor=g.Util.makeHexColor(n,l,h),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const l=this.viewport.width,h=this.viewport.height,r=g.Util.inverseTransform(this.transformMatrix),p=g.Util.applyTransform([0,0],r),O=g.Util.applyTransform([0,h],r),o=g.Util.applyTransform([l,0],r),W=g.Util.applyTransform([l,h],r),$=Math.min(p[0],O[0],o[0],W[0]),J=Math.min(p[1],O[1],o[1],W[1]),Q=Math.max(p[0],O[0],o[0],W[0]),tt=Math.max(p[1],O[1],o[1],W[1]),dt=this.svgFactory.createElement("svg:rect");dt.setAttributeNS(null,"x",$),dt.setAttributeNS(null,"y",J),dt.setAttributeNS(null,"width",Q-$),dt.setAttributeNS(null,"height",tt-J),dt.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&dt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(dt)}_makeColorN_Pattern(n){return n[0]==="TilingPattern"?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const l=n[1],h=n[2],r=n[3]||g.IDENTITY_MATRIX,[p,O,o,W]=n[4],$=n[5],J=n[6],Q=n[7],tt=`shading${b++}`,[dt,ot,ht,_t]=g.Util.normalizeRect([...g.Util.applyTransform([p,O],r),...g.Util.applyTransform([o,W],r)]),[vt,St]=g.Util.singularValueDecompose2dScale(r),gt=$*vt,z=J*St,d=this.svgFactory.createElement("svg:pattern");d.setAttributeNS(null,"id",tt),d.setAttributeNS(null,"patternUnits","userSpaceOnUse"),d.setAttributeNS(null,"width",gt),d.setAttributeNS(null,"height",z),d.setAttributeNS(null,"x",`${dt}`),d.setAttributeNS(null,"y",`${ot}`);const f=this.svg,E=this.transformMatrix,q=this.current.fillColor,I=this.current.strokeColor,V=this.svgFactory.create(ht-dt,_t-ot);if(this.svg=V,this.transformMatrix=r,Q===2){const N=g.Util.makeHexColor(...l);this.current.fillColor=N,this.current.strokeColor=N}return this.executeOpTree(this.convertOpList(h)),this.svg=f,this.transformMatrix=E,this.current.fillColor=q,this.current.strokeColor=I,d.append(V.childNodes[0]),this.defs.append(d),`url(#${tt})`}_makeShadingPattern(n){switch(typeof n=="string"&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const l=`shading${b++}`,h=n[3];let r;switch(n[1]){case"axial":const p=n[4],O=n[5];r=this.svgFactory.createElement("svg:linearGradient"),r.setAttributeNS(null,"id",l),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"x1",p[0]),r.setAttributeNS(null,"y1",p[1]),r.setAttributeNS(null,"x2",O[0]),r.setAttributeNS(null,"y2",O[1]);break;case"radial":const o=n[4],W=n[5],$=n[6],J=n[7];r=this.svgFactory.createElement("svg:radialGradient"),r.setAttributeNS(null,"id",l),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"cx",W[0]),r.setAttributeNS(null,"cy",W[1]),r.setAttributeNS(null,"r",J),r.setAttributeNS(null,"fx",o[0]),r.setAttributeNS(null,"fy",o[1]),r.setAttributeNS(null,"fr",$);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const p of h){const O=this.svgFactory.createElement("svg:stop");O.setAttributeNS(null,"offset",p[0]),O.setAttributeNS(null,"stop-color",p[1]),r.append(O)}return this.defs.append(r),`url(#${l})`;case"Mesh":return(0,g.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,l){this.current.dashArray=n,this.current.dashPhase=l}constructPath(n,l){const h=this.current;let r=h.x,p=h.y,O=[],o=0;for(const W of n)switch(W|0){case g.OPS.rectangle:r=l[o++],p=l[o++];const $=l[o++],J=l[o++],Q=r+$,tt=p+J;O.push("M",i(r),i(p),"L",i(Q),i(p),"L",i(Q),i(tt),"L",i(r),i(tt),"Z");break;case g.OPS.moveTo:r=l[o++],p=l[o++],O.push("M",i(r),i(p));break;case g.OPS.lineTo:r=l[o++],p=l[o++],O.push("L",i(r),i(p));break;case g.OPS.curveTo:r=l[o+4],p=l[o+5],O.push("C",i(l[o]),i(l[o+1]),i(l[o+2]),i(l[o+3]),i(r),i(p)),o+=6;break;case g.OPS.curveTo2:O.push("C",i(r),i(p),i(l[o]),i(l[o+1]),i(l[o+2]),i(l[o+3])),r=l[o+2],p=l[o+3],o+=4;break;case g.OPS.curveTo3:r=l[o+2],p=l[o+3],O.push("C",i(l[o]),i(l[o+1]),i(r),i(p),i(r),i(p)),o+=4;break;case g.OPS.closePath:O.push("Z");break}O=O.join(" "),h.path&&n.length>0&&n[0]!==g.OPS.rectangle&&n[0]!==g.OPS.moveTo?O=h.path.getAttributeNS(null,"d")+O:(h.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(h.path)),h.path.setAttributeNS(null,"d",O),h.path.setAttributeNS(null,"fill","none"),h.element=h.path,h.setCurrentPoint(r,p)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element){this.pendingClip=null;return}const l=`clippath${w++}`,h=this.svgFactory.createElement("svg:clipPath");h.setAttributeNS(null,"id",l),h.setAttributeNS(null,"transform",_(this.transformMatrix));const r=n.element.cloneNode(!0);if(this.pendingClip==="evenodd"?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,h.append(r),this.defs.append(h),n.activeClipUrl){n.clipGroup=null;for(const p of this.extraStack)p.clipGroup=null;h.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${l})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const l=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",l)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[l,h]of n)switch(l){case"LW":this.setLineWidth(h);break;case"LC":this.setLineCap(h);break;case"LJ":this.setLineJoin(h);break;case"ML":this.setMiterLimit(h);break;case"D":this.setDash(h[0],h[1]);break;case"RI":this.setRenderingIntent(h);break;case"FL":this.setFlatness(h);break;case"Font":this.setFont(h);break;case"CA":this.setStrokeAlpha(h);break;case"ca":this.setFillAlpha(h);break;default:(0,g.warn)(`Unimplemented graphic state operator ${l}`);break}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,l=1){const h=this.current;let r=h.dashArray;l!==1&&r.length>0&&(r=r.map(function(p){return l*p})),n.setAttributeNS(null,"stroke",h.strokeColor),n.setAttributeNS(null,"stroke-opacity",h.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",i(h.miterLimit)),n.setAttributeNS(null,"stroke-linecap",h.lineCap),n.setAttributeNS(null,"stroke-linejoin",h.lineJoin),n.setAttributeNS(null,"stroke-width",i(l*h.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",r.map(i).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",i(l*h.dashPhase)+"px")}eoFill(){var n;(n=this.current.element)==null||n.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var n;(n=this.current.element)==null||n.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(n)}paintImageXObject(n){const l=this.getObject(n);if(!l){(0,g.warn)(`Dependent image with object ID ${n} is not ready yet`);return}this.paintInlineImageXObject(l)}paintInlineImageXObject(n,l){const h=n.width,r=n.height,p=D(n,this.forceDataSchema,!!l),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",i(h)),O.setAttributeNS(null,"height",i(r)),this.current.element=O,this.clip("nonzero");const o=this.svgFactory.createElement("svg:image");o.setAttributeNS(C,"xlink:href",p),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",i(-r)),o.setAttributeNS(null,"width",i(h)+"px"),o.setAttributeNS(null,"height",i(r)+"px"),o.setAttributeNS(null,"transform",`scale(${i(1/h)} ${i(-1/r)})`),l?l.append(o):this._ensureTransformGroup().append(o)}paintImageMaskXObject(n){const l=this.getObject(n.data,n);if(l.bitmap){(0,g.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const h=this.current,r=l.width,p=l.height,O=h.fillColor;h.maskId=`mask${F++}`;const o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",h.maskId);const W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y","0"),W.setAttributeNS(null,"width",i(r)),W.setAttributeNS(null,"height",i(p)),W.setAttributeNS(null,"fill",O),W.setAttributeNS(null,"mask",`url(#${h.maskId})`),this.defs.append(o),this._ensureTransformGroup().append(W),this.paintInlineImageXObject(l,o)}paintFormXObjectBegin(n,l){if(Array.isArray(n)&&n.length===6&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),l){const h=l[2]-l[0],r=l[3]-l[1],p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x",l[0]),p.setAttributeNS(null,"y",l[1]),p.setAttributeNS(null,"width",i(h)),p.setAttributeNS(null,"height",i(r)),this.current.element=p,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const l=this.svgFactory.create(n.width,n.height),h=this.svgFactory.createElement("svg:defs");l.append(h),this.defs=h;const r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",_(n.transform)),l.append(r),this.svg=r,l}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",_(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(L){var t=__webpack_module_cache__[L];if(t!==void 0)return t.exports;var c=__webpack_module_cache__[L]={exports:{}};return __webpack_modules__[L](c,c.exports,__w_pdfjs_require__),c.exports}var __webpack_exports__={};return(()=>{var L=__webpack_exports__;Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(L,"AnnotationEditorLayer",{enumerable:!0,get:function(){return P.AnnotationEditorLayer}}),Object.defineProperty(L,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(L,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(L,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return M.AnnotationEditorUIManager}}),Object.defineProperty(L,"AnnotationLayer",{enumerable:!0,get:function(){return G.AnnotationLayer}}),Object.defineProperty(L,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(L,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(L,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(L,"GlobalWorkerOptions",{enumerable:!0,get:function(){return S.GlobalWorkerOptions}}),Object.defineProperty(L,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(L,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(L,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(L,"PDFDataRangeTransport",{enumerable:!0,get:function(){return c.PDFDataRangeTransport}}),Object.defineProperty(L,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(L,"PDFWorker",{enumerable:!0,get:function(){return c.PDFWorker}}),Object.defineProperty(L,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(L,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(L,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(L,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(L,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(L,"SVGGraphics",{enumerable:!0,get:function(){return C.SVGGraphics}}),Object.defineProperty(L,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(L,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(L,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(L,"XfaLayer",{enumerable:!0,get:function(){return y.XfaLayer}}),Object.defineProperty(L,"build",{enumerable:!0,get:function(){return c.build}}),Object.defineProperty(L,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(L,"getDocument",{enumerable:!0,get:function(){return c.getDocument}}),Object.defineProperty(L,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(L,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(L,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(L,"isDataScheme",{enumerable:!0,get:function(){return e.isDataScheme}}),Object.defineProperty(L,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(L,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(L,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(L,"renderTextLayer",{enumerable:!0,get:function(){return g.renderTextLayer}}),Object.defineProperty(L,"setLayerDimensions",{enumerable:!0,get:function(){return e.setLayerDimensions}}),Object.defineProperty(L,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(L,"updateTextLayer",{enumerable:!0,get:function(){return g.updateTextLayer}}),Object.defineProperty(L,"version",{enumerable:!0,get:function(){return c.version}});var t=__w_pdfjs_require__(1),c=__w_pdfjs_require__(2),e=__w_pdfjs_require__(6),g=__w_pdfjs_require__(26),P=__w_pdfjs_require__(27),M=__w_pdfjs_require__(5),G=__w_pdfjs_require__(32),S=__w_pdfjs_require__(14),C=__w_pdfjs_require__(35),y=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const onPrint=L=>{let t;t||(t=document.createElement("iframe"),document.body.appendChild(t),t.style.display="none",t.onload=function(){setTimeout(function(){t.focus(),t.contentWindow.print()},1)}),t.src=L},calcRT=L=>{let c=L.split(" ").length;if(c>0)return Math.ceil(c/200)},getPageText=(L,t)=>new Promise(function(c,e){t.getPage(L).then(function(g){g.getTextContent().then(function(P){for(var M=P.items,G="",S=0;S<M.length;S++){var C=M[S];G+=C.str+" "}c(G)})})}),savePDF=async({fileUrl:L,data:t,name:c="download.pdf"})=>{const e=document.createElement("a");e.download=c,e.rel="noopener",L||(L=`data:application/pdf;base64,${btoa(t)}`);let g=await fetch(L).then(M=>M.blob());(!g||!(g instanceof Blob))&&console.log("Invalid blob object passed to URL.createObjectURL()"),typeof URL.createObjectURL>"u"&&console.log("Your browser does not support URL.createObjectURL()");const P=URL.createObjectURL(g);e.href=P,e.click(),URL.revokeObjectURL(e.href)};function cubicOut(L){const t=L-1;return t*t*t+1}function scale(L,{delay:t=0,duration:c=400,easing:e=cubicOut,start:g=0,opacity:P=0}={}){const M=getComputedStyle(L),G=+M.opacity,S=M.transform==="none"?"":M.transform,C=1-g,y=G*(1-P);return{delay:t,duration:c,easing:e,css:(U,x)=>`
			transform: ${S} scale(${1-C*x});
			opacity: ${G-y*x}
		`}}class ClassBuilder{constructor(t,c){this.defaults=typeof t=="function"?t(c):t,this.classes=this.defaults}flush(){return this.classes=this.defaults,this}extend(...t){return this}get(){return this.classes}replace(t,c=!0){return c&&t&&(this.classes=Object.keys(t).reduce((e,g)=>e.replace(new RegExp(g,"g"),t[g]),this.classes)),this}remove(t,c=!0){return c&&t&&(this.classes=t.split(" ").reduce((e,g)=>e.replace(new RegExp(g,"g"),""),this.classes)),this}add(t,c=!0,e){if(!c||!t)return this;switch(typeof t){case"string":default:return this.classes+=` ${t} `,this;case"function":return this.classes+=` ${t(e||this.classes)} `,this}}}const Tooltip_svelte_svelte_type_style_lang="",get_activator_slot_changes=L=>({}),get_activator_slot_context=L=>({});function create_if_block$1(L){let t,c,e,g,P;const M=L[8].default,G=create_slot(M,L,L[7],null);return{c(){t=element("div"),G&&G.c(),this.h()},l(S){t=claim_element(S,"DIV",{class:!0});var C=children(t);G&&G.l(C),C.forEach(detach),this.h()},h(){attr(t,"class",c=null_to_empty(L[1])+" svelte-10lk5cm")},m(S,C){insert_hydration(S,t,C),G&&G.m(t,null),P=!0},p(S,C){G&&G.p&&(!P||C&128)&&update_slot_base(G,M,S,S[7],P?get_slot_changes(M,S[7],C,null):get_all_dirty_from_scope(S[7]),null),(!P||C&2&&c!==(c=null_to_empty(S[1])+" svelte-10lk5cm"))&&attr(t,"class",c)},i(S){P||(transition_in(G,S),add_render_callback(()=>{P&&(g&&g.end(1),e=create_in_transition(t,scale,{duration:150}),e.start())}),P=!0)},o(S){transition_out(G,S),e&&e.invalidate(),g=create_out_transition(t,scale,{duration:150,delay:100}),P=!1},d(S){S&&detach(t),G&&G.d(S),S&&g&&g.end()}}}function create_fragment$1(L){let t,c,e,g,P,M;const G=L[8].activator,S=create_slot(G,L,L[7],get_activator_slot_context);let C=L[0]&&create_if_block$1(L);return{c(){t=element("div"),c=element("div"),S&&S.c(),e=space(),C&&C.c(),this.h()},l(y){t=claim_element(y,"DIV",{class:!0});var U=children(t);c=claim_element(U,"DIV",{});var x=children(c);S&&S.l(x),x.forEach(detach),e=claim_space(U),C&&C.l(U),U.forEach(detach),this.h()},h(){attr(t,"class","activator svelte-10lk5cm")},m(y,U){insert_hydration(y,t,U),append_hydration(t,c),S&&S.m(c,null),append_hydration(t,e),C&&C.m(t,null),g=!0,P||(M=[listen(c,"mouseenter",debounce(L[2],100)),listen(c,"mouseleave",debounce(L[3],500)),listen(c,"mouseenter",L[9]),listen(c,"mouseleave",L[10]),listen(c,"focus",L[11]),listen(c,"blur",L[12])],P=!0)},p(y,[U]){S&&S.p&&(!g||U&128)&&update_slot_base(S,G,y,y[7],g?get_slot_changes(G,y[7],U,get_activator_slot_changes):get_all_dirty_from_scope(y[7]),get_activator_slot_context),y[0]?C?(C.p(y,U),U&1&&transition_in(C,1)):(C=create_if_block$1(y),C.c(),transition_in(C,1),C.m(t,null)):C&&(group_outros(),transition_out(C,1,1,()=>{C=null}),check_outros())},i(y){g||(transition_in(S,y),transition_in(C),g=!0)},o(y){transition_out(S,y),transition_out(C),g=!1},d(y){y&&detach(t),S&&S.d(y),C&&C.d(),P=!1,run_all(M)}}}const classesDefault="tooltip";function debounce(L,t,c){let e;return function(){let g=this,P=arguments,M=function(){e=null,c||L.apply(g,P)},G=c&&!e;clearTimeout(e),e=setTimeout(M,t),G&&L.apply(g,P)}}function instance$1(L,t,c){let e,{$$slots:g={},$$scope:P}=t,{class:M=""}=t,{classes:G=classesDefault}=t,{show:S=!1}=t,{timeout:C=null}=t;const y=new ClassBuilder(G,classesDefault);function U(){S||(c(0,S=!0),C&&c(4,C=setTimeout(()=>{c(0,S=!1)},C)))}function x(){S&&(c(0,S=!1),clearTimeout(C))}function D(_){bubble.call(this,L,_)}function m(_){bubble.call(this,L,_)}function u(_){bubble.call(this,L,_)}function i(_){bubble.call(this,L,_)}return L.$$set=_=>{"class"in _&&c(5,M=_.class),"classes"in _&&c(6,G=_.classes),"show"in _&&c(0,S=_.show),"timeout"in _&&c(4,C=_.timeout),"$$scope"in _&&c(7,P=_.$$scope)},L.$$.update=()=>{L.$$.dirty&96&&c(1,e=y.flush().add(G,!0,classesDefault).add(M).get())},[S,e,U,x,C,M,G,P,g,D,m,u,i]}class Tooltip extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$1,safe_not_equal,{class:5,classes:6,show:0,timeout:4})}}const PdfViewer_svelte_svelte_type_style_lang="",{window:window_1}=globals;function create_else_block_1(L){let t,c,e;return{c(){t=element("div"),c=element("canvas"),this.h()},l(g){t=claim_element(g,"DIV",{class:!0});var P=children(t);c=claim_element(P,"CANVAS",{class:!0}),children(c).forEach(detach),P.forEach(detach),this.h()},h(){attr(c,"class","svelte-19h83wp"),attr(t,"class",e=null_to_empty(L[6]===!0?"viewer":"null")+" svelte-19h83wp")},m(g,P){insert_hydration(g,t,P),append_hydration(t,c),L[54](c)},p(g,P){P[0]&64&&e!==(e=null_to_empty(g[6]===!0?"viewer":"null")+" svelte-19h83wp")&&attr(t,"class",e)},i:noop,o:noop,d(g){g&&detach(t),L[54](null)}}}function create_if_block_1(L){let t,c,e=L[5].includes("navigation"),g,P=L[5].includes("zoom"),M,G=L[5].includes("print"),S,C=L[5].includes("rotate"),y,U=L[5].includes("download"),x,D=L[5].includes("autoflip"),m,u,i,_,w,F,b,n,l,h,r,p,O,o,W,$,J,Q,tt,dt,ot,ht,_t,vt,St,gt=e&&create_if_block_8(L),z=P&&create_if_block_7(L),d=G&&create_if_block_6(L),f=C&&create_if_block_5(L),E=U&&create_if_block_4(L),q=D&&create_if_block_2(L);return{c(){t=element("div"),c=element("div"),gt&&gt.c(),g=space(),z&&z.c(),M=space(),d&&d.c(),S=space(),f&&f.c(),y=space(),E&&E.c(),x=space(),q&&q.c(),m=space(),u=element("span"),i=svg_element("svg"),_=svg_element("path"),w=space(),F=element("span"),b=text(L[10]),n=text(" min read"),h=space(),r=element("span"),p=svg_element("svg"),O=svg_element("path"),o=space(),W=element("div"),$=text(`Page :
              `),J=element("span"),Q=text(`
              /
              `),tt=element("span"),ot=space(),ht=element("div"),_t=element("canvas"),this.h()},l(I){t=claim_element(I,"DIV",{class:!0});var V=children(t);c=claim_element(V,"DIV",{class:!0});var N=children(c);gt&&gt.l(N),g=claim_space(N),z&&z.l(N),M=claim_space(N),d&&d.l(N),S=claim_space(N),f&&f.l(N),y=claim_space(N),E&&E.l(N),x=claim_space(N),q&&q.l(N),m=claim_space(N),u=claim_element(N,"SPAN",{class:!0,style:!0});var j=children(u);i=claim_svg_element(j,"svg",{class:!0,xmlns:!0,viewBox:!0});var H=children(i);_=claim_svg_element(H,"path",{d:!0}),children(_).forEach(detach),H.forEach(detach),w=claim_space(j),F=claim_element(j,"SPAN",{class:!0});var s=children(F);b=claim_text(s,L[10]),n=claim_text(s," min read"),s.forEach(detach),j.forEach(detach),h=claim_space(N),r=claim_element(N,"SPAN",{class:!0,style:!0});var a=children(r);p=claim_svg_element(a,"svg",{class:!0,xmlns:!0,viewBox:!0});var v=children(p);O=claim_svg_element(v,"path",{d:!0}),children(O).forEach(detach),v.forEach(detach),o=claim_space(a),W=claim_element(a,"DIV",{class:!0});var T=children(W);$=claim_text(T,`Page :
              `),J=claim_element(T,"SPAN",{}),children(J).forEach(detach),Q=claim_text(T,`
              /
              `),tt=claim_element(T,"SPAN",{}),children(tt).forEach(detach),T.forEach(detach),a.forEach(detach),N.forEach(detach),ot=claim_space(V),ht=claim_element(V,"DIV",{class:!0});var k=children(ht);_t=claim_element(k,"CANVAS",{width:!0,height:!0,class:!0}),children(_t).forEach(detach),k.forEach(detach),V.forEach(detach),this.h()},h(){attr(_,"d",`M16.32 7.1A8 8 0 1 1 9 4.06V2h2v2.06c1.46.18 2.8.76 3.9
                1.62l1.46-1.46 1.42 1.42-1.46 1.45zM10 18a6 6 0 1 0 0-12 6 6 0 0
                0 0 12zM7 0h6v2H7V0zm5.12 8.46l1.42 1.42L10 13.4 8.59
                12l3.53-3.54z`),attr(i,"class","icon svelte-19h83wp"),attr(i,"xmlns","http://www.w3.org/2000/svg"),attr(i,"viewBox","0 0 20 20"),attr(F,"class","text svelte-19h83wp"),attr(u,"class","page-info svelte-19h83wp"),attr(u,"style",l=L[5].includes("timeInfo")?"":"display: none;"),attr(O,"d",`M16 2h4v15a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V0h16v2zm0 2v13a1 1 0
                0 0 1 1 1 1 0 0 0 1-1V4h-2zM2 2v15a1 1 0 0 0 1 1h11.17a2.98 2.98
                0 0 1-.17-1V2H2zm2 8h8v2H4v-2zm0 4h8v2H4v-2zM4 4h8v4H4V4z`),attr(p,"class","icon svelte-19h83wp"),attr(p,"xmlns","http://www.w3.org/2000/svg"),attr(p,"viewBox","0 0 20 20"),attr(W,"class","text svelte-19h83wp"),attr(r,"class","page-info svelte-19h83wp"),attr(r,"style",dt=L[5].includes("pageInfo")?"":"display: none;"),attr(c,"class","line svelte-19h83wp"),attr(_t,"width",L[16]),attr(_t,"height",L[17]),attr(_t,"class","svelte-19h83wp"),attr(ht,"class",vt=null_to_empty(L[6]===!0?"viewer":"null")+" svelte-19h83wp"),attr(t,"class","control-start svelte-19h83wp")},m(I,V){insert_hydration(I,t,V),append_hydration(t,c),gt&&gt.m(c,null),append_hydration(c,g),z&&z.m(c,null),append_hydration(c,M),d&&d.m(c,null),append_hydration(c,S),f&&f.m(c,null),append_hydration(c,y),E&&E.m(c,null),append_hydration(c,x),q&&q.m(c,null),append_hydration(c,m),append_hydration(c,u),append_hydration(u,i),append_hydration(i,_),append_hydration(u,w),append_hydration(u,F),append_hydration(F,b),append_hydration(F,n),append_hydration(c,h),append_hydration(c,r),append_hydration(r,p),append_hydration(p,O),append_hydration(r,o),append_hydration(r,W),append_hydration(W,$),append_hydration(W,J),L[51](J),append_hydration(W,Q),append_hydration(W,tt),L[52](tt),append_hydration(t,ot),append_hydration(t,ht),append_hydration(ht,_t),L[53](_t),St=!0},p(I,V){V[0]&32&&(e=I[5].includes("navigation")),e?gt?(gt.p(I,V),V[0]&32&&transition_in(gt,1)):(gt=create_if_block_8(I),gt.c(),transition_in(gt,1),gt.m(c,g)):gt&&(group_outros(),transition_out(gt,1,1,()=>{gt=null}),check_outros()),V[0]&32&&(P=I[5].includes("zoom")),P?z?(z.p(I,V),V[0]&32&&transition_in(z,1)):(z=create_if_block_7(I),z.c(),transition_in(z,1),z.m(c,M)):z&&(group_outros(),transition_out(z,1,1,()=>{z=null}),check_outros()),V[0]&32&&(G=I[5].includes("print")),G?d?(d.p(I,V),V[0]&32&&transition_in(d,1)):(d=create_if_block_6(I),d.c(),transition_in(d,1),d.m(c,S)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros()),V[0]&32&&(C=I[5].includes("rotate")),C?f?(f.p(I,V),V[0]&32&&transition_in(f,1)):(f=create_if_block_5(I),f.c(),transition_in(f,1),f.m(c,y)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),V[0]&32&&(U=I[5].includes("download")),U?E?(E.p(I,V),V[0]&32&&transition_in(E,1)):(E=create_if_block_4(I),E.c(),transition_in(E,1),E.m(c,x)):E&&(group_outros(),transition_out(E,1,1,()=>{E=null}),check_outros()),V[0]&32&&(D=I[5].includes("autoflip")),D?q?(q.p(I,V),V[0]&32&&transition_in(q,1)):(q=create_if_block_2(I),q.c(),transition_in(q,1),q.m(c,m)):q&&(group_outros(),transition_out(q,1,1,()=>{q=null}),check_outros()),(!St||V[0]&1024)&&set_data(b,I[10]),(!St||V[0]&32&&l!==(l=I[5].includes("timeInfo")?"":"display: none;"))&&attr(u,"style",l),(!St||V[0]&32&&dt!==(dt=I[5].includes("pageInfo")?"":"display: none;"))&&attr(r,"style",dt),(!St||V[0]&65536)&&attr(_t,"width",I[16]),(!St||V[0]&131072)&&attr(_t,"height",I[17]),(!St||V[0]&64&&vt!==(vt=null_to_empty(I[6]===!0?"viewer":"null")+" svelte-19h83wp"))&&attr(ht,"class",vt)},i(I){St||(transition_in(gt),transition_in(z),transition_in(d),transition_in(f),transition_in(E),transition_in(q),St=!0)},o(I){transition_out(gt),transition_out(z),transition_out(d),transition_out(f),transition_out(E),transition_out(q),St=!1},d(I){I&&detach(t),gt&&gt.d(),z&&z.d(),d&&d.d(),f&&f.d(),E&&E.d(),q&&q.d(),L[51](null),L[52](null),L[53](null)}}}function create_if_block(L){let t,c,e,g,P,M,G,S,C,y,U,x,D,m;return{c(){t=element("div"),c=element("p"),e=text("This document requires a password to open:"),g=space(),P=element("p"),M=text(L[15]),G=space(),S=element("div"),C=element("input"),y=space(),U=element("button"),x=text("Submit"),this.h()},l(u){t=claim_element(u,"DIV",{class:!0});var i=children(t);c=claim_element(i,"P",{});var _=children(c);e=claim_text(_,"This document requires a password to open:"),_.forEach(detach),g=claim_space(i),P=claim_element(i,"P",{class:!0});var w=children(P);M=claim_text(w,L[15]),w.forEach(detach),G=claim_space(i),S=claim_element(i,"DIV",{class:!0});var F=children(S);C=claim_element(F,"INPUT",{type:!0,class:!0}),y=claim_space(F),U=claim_element(F,"BUTTON",{class:!0});var b=children(U);x=claim_text(b,"Submit"),b.forEach(detach),F.forEach(detach),i.forEach(detach),this.h()},h(){attr(P,"class","password-message svelte-19h83wp"),attr(C,"type","password"),attr(C,"class","password-input svelte-19h83wp"),attr(U,"class","password-button svelte-19h83wp"),attr(S,"class","password-container svelte-19h83wp"),attr(t,"class","password-viewer svelte-19h83wp")},m(u,i){insert_hydration(u,t,i),append_hydration(t,c),append_hydration(c,e),append_hydration(t,g),append_hydration(t,P),append_hydration(P,M),append_hydration(t,G),append_hydration(t,S),append_hydration(S,C),set_input_value(C,L[13]),append_hydration(S,y),append_hydration(S,U),append_hydration(U,x),D||(m=[listen(C,"input",L[41]),listen(U,"click",L[25])],D=!0)},p(u,i){i[0]&32768&&set_data(M,u[15]),i[0]&8192&&C.value!==u[13]&&set_input_value(C,u[13])},i:noop,o:noop,d(u){u&&detach(t),D=!1,run_all(m)}}}function create_if_block_8(L){let t,c,e,g;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_8],default:[create_default_slot_8]},$$scope:{ctx:L}}}),e=new Tooltip({props:{$$slots:{activator:[create_activator_slot_7],default:[create_default_slot_7]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment),c=space(),create_component(e.$$.fragment)},l(P){claim_component(t.$$.fragment,P),c=claim_space(P),claim_component(e.$$.fragment,P)},m(P,M){mount_component(t,P,M),insert_hydration(P,c,M),mount_component(e,P,M),g=!0},p(P,M){const G={};M[0]&1|M[2]&64&&(G.$$scope={dirty:M,ctx:P}),t.$set(G);const S={};M[0]&5|M[2]&64&&(S.$$scope={dirty:M,ctx:P}),e.$set(S)},i(P){g||(transition_in(t.$$.fragment,P),transition_in(e.$$.fragment,P),g=!0)},o(P){transition_out(t.$$.fragment,P),transition_out(e.$$.fragment,P),g=!1},d(P){destroy_component(t,P),P&&detach(c),destroy_component(e,P)}}}function create_default_slot_8(L){let t;return{c(){t=text("Previous")},l(c){t=claim_text(c,"Previous")},m(c,e){insert_hydration(c,t,e)},d(c){c&&detach(t)}}}function create_activator_slot_8(L){let t,c,e,g,P,M;return{c(){t=element("span"),c=svg_element("svg"),e=svg_element("polygon"),this.h()},l(G){t=claim_element(G,"SPAN",{slot:!0,class:!0});var S=children(t);c=claim_svg_element(S,"svg",{class:!0,xmlns:!0,viewBox:!0});var C=children(c);e=claim_svg_element(C,"polygon",{points:!0}),children(e).forEach(detach),C.forEach(detach),S.forEach(detach),this.h()},h(){attr(e,"points",`3.828 9 9.899 2.929 8.485 1.515 0 10 .707 10.707 8.485
                  18.485 9.899 17.071 3.828 11 20 11 20 9 3.828 9`),attr(c,"class","icon svelte-19h83wp"),attr(c,"xmlns","http://www.w3.org/2000/svg"),attr(c,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",g="button-control "+(L[0]<=1?"disabled":null)+" svelte-19h83wp")},m(G,S){insert_hydration(G,t,S),append_hydration(t,c),append_hydration(c,e),P||(M=[listen(t,"click",L[42]),listen(t,"keydown",L[39])],P=!0)},p(G,S){S[0]&1&&g!==(g="button-control "+(G[0]<=1?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",g)},d(G){G&&detach(t),P=!1,run_all(M)}}}function create_default_slot_7(L){let t;return{c(){t=text("Next")},l(c){t=claim_text(c,"Next")},m(c,e){insert_hydration(c,t,e)},d(c){c&&detach(t)}}}function create_activator_slot_7(L){let t,c,e,g,P,M;return{c(){t=element("span"),c=svg_element("svg"),e=svg_element("polygon"),this.h()},l(G){t=claim_element(G,"SPAN",{slot:!0,class:!0});var S=children(t);c=claim_svg_element(S,"svg",{class:!0,xmlns:!0,viewBox:!0});var C=children(c);e=claim_svg_element(C,"polygon",{points:!0}),children(e).forEach(detach),C.forEach(detach),S.forEach(detach),this.h()},h(){attr(e,"points",`16.172 9 10.101 2.929 11.515 1.515 20 10 19.293 10.707
                  11.515 18.485 10.101 17.071 16.172 11 0 11 0 9`),attr(c,"class","icon svelte-19h83wp"),attr(c,"xmlns","http://www.w3.org/2000/svg"),attr(c,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",g="button-control "+(L[0]>=L[2]?"disabled":null)+" svelte-19h83wp")},m(G,S){insert_hydration(G,t,S),append_hydration(t,c),append_hydration(c,e),P||(M=[listen(t,"click",L[43]),listen(t,"keydown",L[38])],P=!0)},p(G,S){S[0]&5&&g!==(g="button-control "+(G[0]>=G[2]?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",g)},d(G){G&&detach(t),P=!1,run_all(M)}}}function create_if_block_7(L){let t,c,e,g;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_6],default:[create_default_slot_6]},$$scope:{ctx:L}}}),e=new Tooltip({props:{$$slots:{activator:[create_activator_slot_5],default:[create_default_slot_5]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment),c=space(),create_component(e.$$.fragment)},l(P){claim_component(t.$$.fragment,P),c=claim_space(P),claim_component(e.$$.fragment,P)},m(P,M){mount_component(t,P,M),insert_hydration(P,c,M),mount_component(e,P,M),g=!0},p(P,M){const G={};M[0]&2|M[2]&64&&(G.$$scope={dirty:M,ctx:P}),t.$set(G);const S={};M[0]&2|M[2]&64&&(S.$$scope={dirty:M,ctx:P}),e.$set(S)},i(P){g||(transition_in(t.$$.fragment,P),transition_in(e.$$.fragment,P),g=!0)},o(P){transition_out(t.$$.fragment,P),transition_out(e.$$.fragment,P),g=!1},d(P){destroy_component(t,P),P&&detach(c),destroy_component(e,P)}}}function create_default_slot_6(L){let t;return{c(){t=text("Zoom In")},l(c){t=claim_text(c,"Zoom In")},m(c,e){insert_hydration(c,t,e)},d(c){c&&detach(t)}}}function create_activator_slot_6(L){let t,c,e,g,P,M;return{c(){t=element("span"),c=svg_element("svg"),e=svg_element("path"),this.h()},l(G){t=claim_element(G,"SPAN",{slot:!0,class:!0});var S=children(t);c=claim_svg_element(S,"svg",{class:!0,xmlns:!0,viewBox:!0});var C=children(c);e=claim_svg_element(C,"path",{"fill-rule":!0,d:!0}),children(e).forEach(detach),C.forEach(detach),S.forEach(detach),this.h()},h(){attr(e,"fill-rule","evenodd"),attr(e,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM7
                  7V5h2v2h2v2H9v2H7V9H5V7h2z`),attr(c,"class","icon svelte-19h83wp"),attr(c,"xmlns","http://www.w3.org/2000/svg"),attr(c,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",g="button-control "+(L[1]>=maxScale?"disabled":null)+" svelte-19h83wp")},m(G,S){insert_hydration(G,t,S),append_hydration(t,c),append_hydration(c,e),P||(M=[listen(t,"click",L[44]),listen(t,"keydown",L[37])],P=!0)},p(G,S){S[0]&2&&g!==(g="button-control "+(G[1]>=maxScale?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",g)},d(G){G&&detach(t),P=!1,run_all(M)}}}function create_default_slot_5(L){let t;return{c(){t=text("Zoom Out")},l(c){t=claim_text(c,"Zoom Out")},m(c,e){insert_hydration(c,t,e)},d(c){c&&detach(t)}}}function create_activator_slot_5(L){let t,c,e,g,P,M;return{c(){t=element("span"),c=svg_element("svg"),e=svg_element("path"),this.h()},l(G){t=claim_element(G,"SPAN",{slot:!0,class:!0});var S=children(t);c=claim_svg_element(S,"svg",{class:!0,xmlns:!0,viewBox:!0});var C=children(c);e=claim_svg_element(C,"path",{"fill-rule":!0,d:!0}),children(e).forEach(detach),C.forEach(detach),S.forEach(detach),this.h()},h(){attr(e,"fill-rule","evenodd"),attr(e,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM5
                  7h6v2H5V7z`),attr(c,"class","icon svelte-19h83wp"),attr(c,"xmlns","http://www.w3.org/2000/svg"),attr(c,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",g="button-control "+(L[1]<=minScale?"disabled":null)+" svelte-19h83wp")},m(G,S){insert_hydration(G,t,S),append_hydration(t,c),append_hydration(c,e),P||(M=[listen(t,"click",L[45]),listen(t,"keydown",L[36])],P=!0)},p(G,S){S[0]&2&&g!==(g="button-control "+(G[1]<=minScale?"disabled":null)+" svelte-19h83wp")&&attr(t,"class",g)},d(G){G&&detach(t),P=!1,run_all(M)}}}function create_if_block_6(L){let t,c;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_4],default:[create_default_slot_4]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,g){mount_component(t,e,g),c=!0},p(e,g){const P={};g[0]&8|g[2]&64&&(P.$$scope={dirty:g,ctx:e}),t.$set(P)},i(e){c||(transition_in(t.$$.fragment,e),c=!0)},o(e){transition_out(t.$$.fragment,e),c=!1},d(e){destroy_component(t,e)}}}function create_default_slot_4(L){let t;return{c(){t=text("Print")},l(c){t=claim_text(c,"Print")},m(c,e){insert_hydration(c,t,e)},d(c){c&&detach(t)}}}function create_activator_slot_4(L){let t,c,e,g,P;return{c(){t=element("span"),c=svg_element("svg"),e=svg_element("path"),this.h()},l(M){t=claim_element(M,"SPAN",{slot:!0,class:!0});var G=children(t);c=claim_svg_element(G,"svg",{class:!0,xmlns:!0,viewBox:!0});var S=children(c);e=claim_svg_element(S,"path",{d:!0}),children(e).forEach(detach),S.forEach(detach),G.forEach(detach),this.h()},h(){attr(e,"d",`M4 16H0V6h20v10h-4v4H4v-4zm2-4v6h8v-6H6zM4 0h12v5H4V0zM2
                  8v2h2V8H2zm4 0v2h2V8H6z`),attr(c,"class","icon svelte-19h83wp"),attr(c,"xmlns","http://www.w3.org/2000/svg"),attr(c,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(M,G){insert_hydration(M,t,G),append_hydration(t,c),append_hydration(c,e),g||(P=[listen(t,"click",L[46]),listen(t,"keydown",L[35])],g=!0)},p:noop,d(M){M&&detach(t),g=!1,run_all(P)}}}function create_if_block_5(L){let t,c,e,g;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_3],default:[create_default_slot_3]},$$scope:{ctx:L}}}),e=new Tooltip({props:{$$slots:{activator:[create_activator_slot_2],default:[create_default_slot_2]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment),c=space(),create_component(e.$$.fragment)},l(P){claim_component(t.$$.fragment,P),c=claim_space(P),claim_component(e.$$.fragment,P)},m(P,M){mount_component(t,P,M),insert_hydration(P,c,M),mount_component(e,P,M),g=!0},p(P,M){const G={};M[2]&64&&(G.$$scope={dirty:M,ctx:P}),t.$set(G);const S={};M[2]&64&&(S.$$scope={dirty:M,ctx:P}),e.$set(S)},i(P){g||(transition_in(t.$$.fragment,P),transition_in(e.$$.fragment,P),g=!0)},o(P){transition_out(t.$$.fragment,P),transition_out(e.$$.fragment,P),g=!1},d(P){destroy_component(t,P),P&&detach(c),destroy_component(e,P)}}}function create_default_slot_3(L){let t;return{c(){t=text("Anti-Clockwise")},l(c){t=claim_text(c,"Anti-Clockwise")},m(c,e){insert_hydration(c,t,e)},d(c){c&&detach(t)}}}function create_activator_slot_3(L){let t,c,e,g,P;return{c(){t=element("span"),c=svg_element("svg"),e=svg_element("path"),this.h()},l(M){t=claim_element(M,"SPAN",{slot:!0,class:!0});var G=children(t);c=claim_svg_element(G,"svg",{class:!0,xmlns:!0,viewBox:!0});var S=children(c);e=claim_svg_element(S,"path",{d:!0}),children(e).forEach(detach),S.forEach(detach),G.forEach(detach),this.h()},h(){attr(e,"d",`M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z`),attr(c,"class","icon rot-icon svelte-19h83wp"),attr(c,"xmlns","http://www.w3.org/2000/svg"),attr(c,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(M,G){insert_hydration(M,t,G),append_hydration(t,c),append_hydration(c,e),g||(P=[listen(t,"click",L[47]),listen(t,"keydown",L[34])],g=!0)},p:noop,d(M){M&&detach(t),g=!1,run_all(P)}}}function create_default_slot_2(L){let t;return{c(){t=text("Clockwise")},l(c){t=claim_text(c,"Clockwise")},m(c,e){insert_hydration(c,t,e)},d(c){c&&detach(t)}}}function create_activator_slot_2(L){let t,c,e,g,P;return{c(){t=element("span"),c=svg_element("svg"),e=svg_element("path"),this.h()},l(M){t=claim_element(M,"SPAN",{slot:!0,class:!0});var G=children(t);c=claim_svg_element(G,"svg",{class:!0,xmlns:!0,viewBox:!0});var S=children(c);e=claim_svg_element(S,"path",{d:!0}),children(e).forEach(detach),S.forEach(detach),G.forEach(detach),this.h()},h(){attr(e,"d",`M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z`),attr(c,"class","icon svelte-19h83wp"),attr(c,"xmlns","http://www.w3.org/2000/svg"),attr(c,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(M,G){insert_hydration(M,t,G),append_hydration(t,c),append_hydration(c,e),g||(P=[listen(t,"click",L[48]),listen(t,"keydown",L[33])],g=!0)},p:noop,d(M){M&&detach(t),g=!1,run_all(P)}}}function create_if_block_4(L){let t,c;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot_1],default:[create_default_slot_1]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,g){mount_component(t,e,g),c=!0},p(e,g){const P={};g[0]&24|g[2]&64&&(P.$$scope={dirty:g,ctx:e}),t.$set(P)},i(e){c||(transition_in(t.$$.fragment,e),c=!0)},o(e){transition_out(t.$$.fragment,e),c=!1},d(e){destroy_component(t,e)}}}function create_default_slot_1(L){let t;return{c(){t=text("Download")},l(c){t=claim_text(c,"Download")},m(c,e){insert_hydration(c,t,e)},d(c){c&&detach(t)}}}function create_activator_slot_1(L){let t,c,e,g,P;return{c(){t=element("span"),c=svg_element("svg"),e=svg_element("path"),this.h()},l(M){t=claim_element(M,"SPAN",{slot:!0,class:!0});var G=children(t);c=claim_svg_element(G,"svg",{class:!0,xmlns:!0,viewBox:!0});var S=children(c);e=claim_svg_element(S,"path",{d:!0}),children(e).forEach(detach),S.forEach(detach),G.forEach(detach),this.h()},h(){attr(e,"d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"),attr(c,"class","icon svelte-19h83wp"),attr(c,"xmlns","http://www.w3.org/2000/svg"),attr(c,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-19h83wp")},m(M,G){insert_hydration(M,t,G),append_hydration(t,c),append_hydration(c,e),g||(P=[listen(t,"click",L[49]),listen(t,"keydown",L[32])],g=!0)},p:noop,d(M){M&&detach(t),g=!1,run_all(P)}}}function create_if_block_2(L){let t,c;return t=new Tooltip({props:{$$slots:{activator:[create_activator_slot],default:[create_default_slot]},$$scope:{ctx:L}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,g){mount_component(t,e,g),c=!0},p(e,g){const P={};g[0]&6144|g[2]&64&&(P.$$scope={dirty:g,ctx:e}),t.$set(P)},i(e){c||(transition_in(t.$$.fragment,e),c=!0)},o(e){transition_out(t.$$.fragment,e),c=!1},d(e){destroy_component(t,e)}}}function create_default_slot(L){let t=(L[11]===!0?L[12]:"Auto Turn Page")+"",c;return{c(){c=text(t)},l(e){c=claim_text(e,t)},m(e,g){insert_hydration(e,c,g)},p(e,g){g[0]&6144&&t!==(t=(e[11]===!0?e[12]:"Auto Turn Page")+"")&&set_data(c,t)},d(e){e&&detach(c)}}}function create_else_block(L){let t;return{c(){t=svg_element("path"),this.h()},l(c){t=claim_svg_element(c,"path",{d:!0}),children(t).forEach(detach),this.h()},h(){attr(t,"d",`M9.896,3.838L0.792,1.562v14.794l9.104,2.276L19,16.356V1.562L9.896,3.838z
                    M9.327,17.332L1.93,15.219V3.27 l7.397,1.585V17.332z
                    M17.862,15.219l-7.397,2.113V4.855l7.397-1.585V15.219z`)},m(c,e){insert_hydration(c,t,e)},d(c){c&&detach(t)}}}function create_if_block_3(L){let t;return{c(){t=svg_element("path"),this.h()},l(c){t=claim_svg_element(c,"path",{d:!0}),children(t).forEach(detach),this.h()},h(){attr(t,"d","M4 18h12V6h-4V2H4v16zm-2 1V0h12l4 4v16H2v-1z")},m(c,e){insert_hydration(c,t,e)},d(c){c&&detach(t)}}}function create_activator_slot(L){let t,c,e,g;function P(S,C){return S[11]===!0?create_if_block_3:create_else_block}let M=P(L),G=M(L);return{c(){t=element("span"),c=svg_element("svg"),G.c(),this.h()},l(S){t=claim_element(S,"SPAN",{slot:!0,class:!0});var C=children(t);c=claim_svg_element(C,"svg",{class:!0,xmlns:!0,viewBox:!0});var y=children(c);G.l(y),y.forEach(detach),C.forEach(detach),this.h()},h(){attr(c,"class","icon svelte-19h83wp"),attr(c,"xmlns","http://www.w3.org/2000/svg"),attr(c,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","page-info button-control svelte-19h83wp")},m(S,C){insert_hydration(S,t,C),append_hydration(t,c),G.m(c,null),e||(g=[listen(t,"click",L[50]),listen(t,"keydown",L[31])],e=!0)},p(S,C){M!==(M=P(S))&&(G.d(1),G=M(S),G&&(G.c(),G.m(c,null)))},d(S){S&&detach(t),G.d(),e=!1,run_all(g)}}}function create_fragment(L){let t,c,e,g,P,M,G,S,C,y,U,x;add_render_callback(L[40]);const D=[create_if_block,create_if_block_1,create_else_block_1],m=[];function u(i,_){return i[14]===!0?0:i[5].length?1:2}return e=u(L),g=m[e]=D[e](L),{c(){t=element("div"),c=element("div"),g.c(),M=space(),G=element("button"),S=svg_element("svg"),C=svg_element("path"),this.h()},l(i){t=claim_element(i,"DIV",{class:!0});var _=children(t);c=claim_element(_,"DIV",{class:!0});var w=children(c);g.l(w),w.forEach(detach),M=claim_space(_),G=claim_element(_,"BUTTON",{id:!0,class:!0});var F=children(G);S=claim_svg_element(F,"svg",{class:!0,xmlns:!0,viewBox:!0});var b=children(S);C=claim_svg_element(b,"path",{d:!0}),children(C).forEach(detach),b.forEach(detach),F.forEach(detach),_.forEach(detach),this.h()},h(){attr(c,"class",P=null_to_empty(L[6]===!0?"control":"null")+" svelte-19h83wp"),attr(C,"d","M7 10v8h6v-8h5l-8-8-8 8h5z"),attr(S,"class","icon svelte-19h83wp"),attr(S,"xmlns","http://www.w3.org/2000/svg"),attr(S,"viewBox","0 0 20 20"),attr(G,"id","topBtn"),attr(G,"class","svelte-19h83wp"),attr(t,"class","parent svelte-19h83wp")},m(i,_){insert_hydration(i,t,_),append_hydration(t,c),m[e].m(c,null),append_hydration(t,M),append_hydration(t,G),append_hydration(G,S),append_hydration(S,C),y=!0,U||(x=[listen(window_1,"resize",L[40]),listen(G,"click",L[55])],U=!0)},p(i,_){let w=e;e=u(i),e===w?m[e].p(i,_):(group_outros(),transition_out(m[w],1,1,()=>{m[w]=null}),check_outros(),g=m[e],g?g.p(i,_):(g=m[e]=D[e](i),g.c()),transition_in(g,1),g.m(c,null)),(!y||_[0]&64&&P!==(P=null_to_empty(i[6]===!0?"control":"null")+" svelte-19h83wp"))&&attr(c,"class",P)},i(i){y||(transition_in(g),y=!0)},o(i){transition_out(g),y=!1},d(i){i&&detach(t),m[e].d(),U=!1,run_all(x)}}}const minScale=1,maxScale=2.3;function instance(L,t,c){let{url:e}=t,{data:g}=t,{scale:P=1.8}=t,{pageNum:M=1}=t,{flipTime:G=120}=t,{showButtons:S=["navigation","zoom","print","rotate","download","autoflip","timeInfo","pageInfo"]}=t,{showBorder:C=!0}=t,{totalPage:y=0}=t,{downloadFileName:U=""}=t;pdfExports.GlobalWorkerOptions.workerSrc=new URL(""+new URL("../assets/pdf.worker.0be00963.js",import.meta.url).href,self.location);let x,D=0,m=0,u=null,i=!1,_=null,w=0,F="",b=0,n=!1,l,h,r=G,p=[],O="",o=!1,W="",$=!1;const J=mt=>{i=!0,u.getPage(mt).then(function(at){let R=at.getViewport({scale:P,rotation:w});const B=x.getContext("2d");c(7,x.height=R.height,x),c(7,x.width=R.width,x);let ct={canvasContext:B,viewport:R};at.render(ct).promise.then(function(){if(i=!1,_!==null){if(M<u.totalPage)p[M]=x,c(0,M++,M),u.getPage(M).then(J);else for(let Tt=1;Tt<p.length;Tt++)x.appendChild(p[Tt]);_=null}})}),S.length&&c(8,D.textContent=mt,D)},Q=mt=>{i?_=mt:J(mt)},tt=()=>{M<=1||(c(0,M--,M),Q(M))},dt=()=>{M>=u.numPages||(c(0,M++,M),Q(M))},ot=()=>{P<=maxScale&&(c(1,P=P+.1),Q(M))},ht=()=>{P>=minScale&&(c(1,P=P-.1),Q(M))},_t=mt=>{onPrint(mt)},vt=()=>{w=w+90,Q(M)},St=()=>{w=w-90,Q(M)},gt=()=>{z()},z=async()=>{pdfExports.getDocument({...e&&{url:e},...g&&{data:g},...O&&{password:O}}).promise.then(async function(at){if(u=at,c(14,o=!1),await tick(),S.length&&c(9,m.textContent=u.numPages,m),c(2,y=u.numPages),S.length)for(let R=1;R<=y;R++)getPageText(R,u).then(function(B){F=F.concat(B),c(10,b=calcRT(F))});c(30,$=!0)}).catch(function(at){c(14,o=!0),c(15,W=at.message)})};z();const d=()=>{c(11,n=!n),n===!1&&(clearInterval(l),clearInterval(h)),n===!0&&M<=y&&(h=setInterval(()=>{c(12,r=r-1)},1e3),l=setInterval(()=>{c(12,r=G),dt()},G*1e3))},f=({url:mt,data:at})=>{let R=U||mt&&mt.substring(mt.lastIndexOf("/")+1);savePDF({fileURL:mt,data:at,name:R})};onDestroy(()=>{clearInterval(l),clearInterval(h)});let E,q;function I(mt){bubble.call(this,L,mt)}function V(mt){bubble.call(this,L,mt)}function N(mt){bubble.call(this,L,mt)}function j(mt){bubble.call(this,L,mt)}function H(mt){bubble.call(this,L,mt)}function s(mt){bubble.call(this,L,mt)}function a(mt){bubble.call(this,L,mt)}function v(mt){bubble.call(this,L,mt)}function T(mt){bubble.call(this,L,mt)}function k(){c(16,E=window_1.innerWidth),c(17,q=window_1.innerHeight)}function X(){O=this.value,c(13,O)}const nt=()=>tt(),K=()=>dt(),it=()=>ot(),lt=()=>ht(),et=()=>_t(e),rt=()=>St(),ut=()=>vt(),ft=()=>f({url:e,data:g}),wt=()=>d();function yt(mt){binding_callbacks[mt?"unshift":"push"](()=>{D=mt,c(8,D)})}function Ct(mt){binding_callbacks[mt?"unshift":"push"](()=>{m=mt,c(9,m)})}function Y(mt){binding_callbacks[mt?"unshift":"push"](()=>{x=mt,c(7,x)})}function At(mt){binding_callbacks[mt?"unshift":"push"](()=>{x=mt,c(7,x)})}const Et=()=>window.scrollTo(0,0);return L.$$set=mt=>{"url"in mt&&c(3,e=mt.url),"data"in mt&&c(4,g=mt.data),"scale"in mt&&c(1,P=mt.scale),"pageNum"in mt&&c(0,M=mt.pageNum),"flipTime"in mt&&c(28,G=mt.flipTime),"showButtons"in mt&&c(5,S=mt.showButtons),"showBorder"in mt&&c(6,C=mt.showBorder),"totalPage"in mt&&c(2,y=mt.totalPage),"downloadFileName"in mt&&c(29,U=mt.downloadFileName)},L.$$.update=()=>{L.$$.dirty[0]&1073741825&&$&&Q(M)},[M,P,y,e,g,S,C,x,D,m,b,n,r,O,o,W,E,q,tt,dt,ot,ht,_t,vt,St,gt,d,f,G,U,$,I,V,N,j,H,s,a,v,T,k,X,nt,K,it,lt,et,rt,ut,ft,wt,yt,Ct,Y,At,Et]}class PdfViewer extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{url:3,data:4,scale:1,pageNum:0,flipTime:28,showButtons:5,showBorder:6,totalPage:2,downloadFileName:29},null,[-1,-1,-1])}}const PdfViewer$1=PdfViewer;export{PdfViewer$1 as default};
